{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Apps/IkazeProperty.rw/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;;;AAKA,MAAM,yBAAW,2KAAgB,MAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,6LAAC;QACC,WAAW,CAAC,qSAAqS,EAAE,aAAa,IAAI;QACpU,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///D:/Apps/IkazeProperty.rw/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;;;AAKA,MAAM,sBAAQ,2KAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,CAAC,6VAA6V,EAAE,aAAa,IAAI;QAC5X,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///D:/Apps/IkazeProperty.rw/src/components/chat/InquiryChat.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { MessageCircle, Send, X, User, Shield } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { useAuth } from '@/contexts/AuthContext'\n\ninterface Message {\n  id: string\n  text: string\n  sender: 'admin' | 'customer'\n  timestamp: Date\n  senderName?: string\n}\n\ninterface InquiryChatProps {\n  inquiryId: string\n  customerId: string\n  customerName: string\n  customerEmail: string\n  isOpen?: boolean\n  onToggle?: () => void\n}\n\nexport default function InquiryChat({ \n  inquiryId, \n  customerId, \n  customerName, \n  customerEmail, \n  isOpen: controlledIsOpen, \n  onToggle \n}: InquiryChatProps) {\n  const { user } = useAuth()\n  const [isInternalOpen, setIsInternalOpen] = useState(false)\n  const [messages, setMessages] = useState<Message[]>([])\n  const [inputText, setInputText] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n  const [isTyping, setIsTyping] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  const isControlled = controlledIsOpen !== undefined\n  const isOpen = isControlled ? controlledIsOpen : isInternalOpen\n  const toggleChat = isControlled ? onToggle : () => setIsInternalOpen(!isInternalOpen)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  useEffect(() => {\n    if (isOpen && inquiryId) {\n      loadMessages()\n    }\n  }, [isOpen, inquiryId])\n\n  const loadMessages = async () => {\n    try {\n      setIsLoading(true)\n      \n      // Get session token for API call\n      const { supabaseClient } = await import('@/lib/supabase-client')\n      const { data: { session } } = await supabaseClient.auth.getSession()\n      \n      if (!session?.access_token) {\n        return\n      }\n\n      // Load chat messages for this inquiry\n      const response = await fetch(`/api/inquiries/${inquiryId}/chat`, {\n        headers: {\n          'Authorization': `Bearer ${session.access_token}`\n        }\n      })\n\n      if (response.ok) {\n        const result = await response.json()\n        setMessages(result.data || [])\n      }\n    } catch (error) {\n      console.error('Error loading messages:', error)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const sendMessage = async () => {\n    if (!inputText.trim() || !user) return\n\n    const newMessage: Message = {\n      id: Date.now().toString(),\n      text: inputText.trim(),\n      sender: 'admin',\n      timestamp: new Date(),\n      senderName: user.email\n    }\n\n    try {\n      setIsTyping(true)\n      setInputText('')\n\n      // Get session token for API call\n      const { supabaseClient } = await import('@/lib/supabase-client')\n      const { data: { session } } = await supabaseClient.auth.getSession()\n      \n      if (!session?.access_token) {\n        throw new Error('No session token')\n      }\n\n      // Send message via API\n      const response = await fetch(`/api/inquiries/${inquiryId}/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`\n        },\n        body: JSON.stringify({\n          message: newMessage.text,\n          sender: 'admin'\n        })\n      })\n\n      if (response.ok) {\n        setMessages(prev => [...prev, newMessage])\n      } else {\n        throw new Error('Failed to send message')\n      }\n    } catch (error) {\n      console.error('Error sending message:', error)\n      // Revert the input if sending failed\n      setInputText(newMessage.text)\n    } finally {\n      setIsTyping(false)\n    }\n  }\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault()\n      sendMessage()\n    }\n  }\n\n  const formatTime = (date: Date) => {\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n  }\n\n  const formatDate = (date: Date) => {\n    const today = new Date()\n    const messageDate = new Date(date)\n    \n    if (messageDate.toDateString() === today.toDateString()) {\n      return 'Today'\n    }\n    \n    const yesterday = new Date(today)\n    yesterday.setDate(yesterday.getDate() - 1)\n    \n    if (messageDate.toDateString() === yesterday.toDateString()) {\n      return 'Yesterday'\n    }\n    \n    return messageDate.toLocaleDateString()\n  }\n\n  const groupMessagesByDate = (messages: Message[]) => {\n    const groups: { [date: string]: Message[] } = {}\n    \n    messages.forEach(message => {\n      const date = new Date(message.timestamp).toDateString()\n      if (!groups[date]) {\n        groups[date] = []\n      }\n      groups[date].push(message)\n    })\n    \n    return groups\n  }\n\n  if (!isOpen) {\n    return null\n  }\n\n  const messageGroups = groupMessagesByDate(messages)\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <Card className=\"w-full max-w-2xl h-[600px] flex flex-col\">\n        <CardHeader className=\"flex-shrink-0 border-b\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"flex items-center space-x-2\">\n                <MessageCircle className=\"h-5 w-5 text-blue-600\" />\n                <CardTitle className=\"text-lg\">Inquiry Chat</CardTitle>\n              </div>\n              <Badge variant=\"outline\" className=\"text-xs\">\n                {customerName}\n              </Badge>\n            </div>\n            <Button variant=\"ghost\" size=\"sm\" onClick={toggleChat}>\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n          <div className=\"text-sm text-gray-600\">\n            <p>Customer: {customerName} ({customerEmail})</p>\n            <p>Inquiry ID: {inquiryId}</p>\n          </div>\n        </CardHeader>\n\n        <CardContent className=\"flex-1 flex flex-col p-0 overflow-hidden\">\n          {/* Messages Area */}\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n            {isLoading ? (\n              <div className=\"flex items-center justify-center h-full\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n              </div>\n            ) : messages.length === 0 ? (\n              <div className=\"text-center text-gray-500 mt-8\">\n                <MessageCircle className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n                <p>No messages yet. Start the conversation!</p>\n              </div>\n            ) : (\n              Object.entries(messageGroups).map(([date, dateMessages]) => (\n                <div key={date} className=\"space-y-3\">\n                  <div className=\"flex items-center justify-center\">\n                    <div className=\"bg-gray-100 rounded-full px-3 py-1\">\n                      <span className=\"text-xs text-gray-600 font-medium\">\n                        {formatDate(new Date(date))}\n                      </span>\n                    </div>\n                  </div>\n                  \n                  {dateMessages.map((message) => (\n                    <div\n                      key={message.id}\n                      className={`flex ${message.sender === 'admin' ? 'justify-end' : 'justify-start'}`}\n                    >\n                      <div className={`max-w-[70%] ${message.sender === 'admin' ? 'order-2' : 'order-1'}`}>\n                        <div className=\"flex items-center space-x-2 mb-1\">\n                          {message.sender === 'admin' ? (\n                            <div className=\"flex items-center space-x-1 text-xs text-gray-500\">\n                              <Shield className=\"h-3 w-3\" />\n                              <span>Admin</span>\n                            </div>\n                          ) : (\n                            <div className=\"flex items-center space-x-1 text-xs text-gray-500\">\n                              <User className=\"h-3 w-3\" />\n                              <span>{customerName}</span>\n                            </div>\n                          )}\n                          <span className=\"text-xs text-gray-400\">\n                            {formatTime(message.timestamp)}\n                          </span>\n                        </div>\n                        <div\n                          className={`rounded-lg px-4 py-2 ${\n                            message.sender === 'admin'\n                              ? 'bg-blue-600 text-white'\n                              : 'bg-gray-100 text-gray-900'\n                          }`}\n                        >\n                          <p className=\"text-sm whitespace-pre-wrap\">{message.text}</p>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ))\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Message Input */}\n          <div className=\"border-t p-4\">\n            <div className=\"flex space-x-2\">\n              <Input\n                value={inputText}\n                onChange={(e) => setInputText(e.target.value)}\n                onKeyPress={handleKeyPress}\n                placeholder=\"Type your message...\"\n                disabled={isTyping || !user}\n                className=\"flex-1\"\n              />\n              <Button\n                onClick={sendMessage}\n                disabled={!inputText.trim() || isTyping || !user}\n                size=\"sm\"\n                className=\"bg-blue-600 hover:bg-blue-700\"\n              >\n                <Send className=\"h-4 w-4\" />\n              </Button>\n            </div>\n            {!user && (\n              <p className=\"text-xs text-red-600 mt-2\">You must be logged in to send messages</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 619, "column": 0}, "map": {"version":3,"sources":["file:///D:/Apps/IkazeProperty.rw/src/app/%5Blocale%5D/dashboard/admin/inquiries/%5Bid%5D/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useParams, useRouter } from 'next/navigation'\nimport Link from 'next/link'\nimport { \n  ArrowLeft,\n  MessageSquare, \n  Home, \n  Car, \n  Trees, \n  Package, \n  User,\n  Calendar,\n  CheckCircle,\n  XCircle,\n  Clock,\n  Edit,\n  Save,\n  Ban\n} from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Badge } from '@/components/ui/badge'\nimport { useAuth } from '@/contexts/AuthContext'\nimport InquiryChat from '@/components/chat/InquiryChat'\n\nexport default function InquiryDetailPage() {\n  const params = useParams()\n  const router = useRouter()\n  const { user, isLoading: authLoading } = useAuth()\n  const [inquiry, setInquiry] = useState<any>(null)\n  const [loading, setLoading] = useState(true)\n  const [updating, setUpdating] = useState(false)\n  const [adminNotes, setAdminNotes] = useState('')\n  const [isEditingNotes, setIsEditingNotes] = useState(false)\n  const [isChatOpen, setIsChatOpen] = useState(false)\n\n  const inquiryId = params.id as string\n\n  useEffect(() => {\n    if (user && !authLoading) {\n      fetchInquiry()\n    }\n  }, [user, authLoading, inquiryId])\n\n  const fetchInquiry = async () => {\n    try {\n      setLoading(true)\n      \n      if (!user) {\n        return\n      }\n\n      // Get session token for API call\n      const { supabaseClient } = await import('@/lib/supabase-client')\n      const { data: { session } } = await supabaseClient.auth.getSession()\n      \n      if (!session?.access_token) {\n        return\n      }\n\n      // Fetch specific inquiry\n      const response = await fetch(`/api/inquiries?role=admin`, {\n        headers: {\n          'Authorization': `Bearer ${session.access_token}`\n        }\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch inquiry')\n      }\n\n      const result = await response.json()\n      const inquiries = result.data || []\n      const foundInquiry = inquiries.find((inq: any) => inq.id === inquiryId)\n\n      if (!foundInquiry) {\n        throw new Error('Inquiry not found')\n      }\n\n      setInquiry(foundInquiry)\n      setAdminNotes(foundInquiry.admin_notes || '')\n    } catch (error) {\n      console.error('Error fetching inquiry:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleUpdateStatus = async (newStatus: string) => {\n    try {\n      setUpdating(true)\n\n      // Get session token for API call\n      const { supabaseClient } = await import('@/lib/supabase-client')\n      const { data: { session } } = await supabaseClient.auth.getSession()\n      \n      if (!session?.access_token) {\n        throw new Error('No session token')\n      }\n\n      const response = await fetch('/api/inquiries', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`\n        },\n        body: JSON.stringify({\n          inquiry_id: inquiryId,\n          status: newStatus,\n          admin_notes: adminNotes\n        })\n      })\n\n      if (!response.ok) {\n        const result = await response.json()\n        throw new Error(result.error || 'Failed to update inquiry')\n      }\n\n      // Refresh inquiry data\n      await fetchInquiry()\n      setIsEditingNotes(false)\n    } catch (error) {\n      console.error('Error updating inquiry:', error)\n      alert('Error updating inquiry. Please try again.')\n    } finally {\n      setUpdating(false)\n    }\n  }\n\n  const handleSaveNotes = async () => {\n    try {\n      setUpdating(true)\n\n      // Get session token for API call\n      const { supabaseClient } = await import('@/lib/supabase-client')\n      const { data: { session } } = await supabaseClient.auth.getSession()\n      \n      if (!session?.access_token) {\n        throw new Error('No session token')\n      }\n\n      const response = await fetch('/api/inquiries', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`\n        },\n        body: JSON.stringify({\n          inquiry_id: inquiryId,\n          status: inquiry.status,\n          admin_notes: adminNotes\n        })\n      })\n\n      if (!response.ok) {\n        const result = await response.json()\n        throw new Error(result.error || 'Failed to update admin notes')\n      }\n\n      // Refresh inquiry data\n      await fetchInquiry()\n      setIsEditingNotes(false)\n    } catch (error) {\n      console.error('Error updating admin notes:', error)\n      alert('Error updating admin notes. Please try again.')\n    } finally {\n      setUpdating(false)\n    }\n  }\n\n  const getCategoryIcon = (category: string) => {\n    switch (category) {\n      case 'house': return <Home className=\"h-5 w-5\" />\n      case 'car': return <Car className=\"h-5 w-5\" />\n      case 'land': return <Trees className=\"h-5 w-5\" />\n      case 'other': return <Package className=\"h-5 w-5\" />\n      default: return <Package className=\"h-5 w-5\" />\n    }\n  }\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'pending':\n        return <Badge className=\"bg-yellow-100 text-yellow-800\">Pending</Badge>\n      case 'approved':\n        return <Badge className=\"bg-green-100 text-green-800\">Approved</Badge>\n      case 'rejected':\n        return <Badge className=\"bg-red-100 text-red-800\">Rejected</Badge>\n      case 'connected':\n        return <Badge className=\"bg-blue-100 text-blue-800\">Connected</Badge>\n      default:\n        return <Badge className=\"bg-gray-100 text-gray-800\">Unknown</Badge>\n    }\n  }\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'pending': return <Clock className=\"h-4 w-4\" />\n      case 'approved': return <CheckCircle className=\"h-4 w-4\" />\n      case 'rejected': return <XCircle className=\"h-4 w-4\" />\n      case 'connected': return <CheckCircle className=\"h-4 w-4\" />\n      default: return <Clock className=\"h-4 w-4\" />\n    }\n  }\n\n  if (authLoading || loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading inquiry details...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-gray-600\">You must be logged in to view this page.</p>\n          <Link href=\"/auth/login\">\n            <Button className=\"mt-4\">Log In</Button>\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  if (!inquiry) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-gray-600\">Inquiry not found.</p>\n          <Link href=\"/dashboard/admin/inquiries\">\n            <Button className=\"mt-4\">Back to Inquiries</Button>\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <Link href=\"/dashboard/admin/inquiries\">\n                <Button variant=\"outline\" className=\"mr-4\">\n                  <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                  Back to Inquiries\n                </Button>\n              </Link>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">Inquiry Details</h1>\n                <p className=\"text-gray-600\">Review and manage this inquiry</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              {getStatusBadge(inquiry.status)}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Main Content */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            {/* Listing Information */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  {getCategoryIcon(inquiry.listings?.category)}\n                  <span className=\"ml-2\">Listing Information</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-gray-900\">{inquiry.listings?.title || 'N/A'}</h3>\n                    <p className=\"text-2xl font-bold text-red-600\">${inquiry.listings?.price?.toLocaleString() || 'N/A'}</p>\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <p className=\"text-sm text-gray-600\">Category</p>\n                      <p className=\"font-medium\">{inquiry.listings?.category || 'N/A'}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-gray-600\">Listing ID</p>\n                      <p className=\"font-medium\">{inquiry.listings?.id || 'N/A'}</p>\n                    </div>\n                  </div>\n                  <Link href={`/listings/${inquiry.listings?.category}/${inquiry.listings?.id}`}>\n                    <Button variant=\"outline\" className=\"w-full\">\n                      View Full Listing\n                    </Button>\n                  </Link>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Buyer Information */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <User className=\"h-5 w-5 mr-2\" />\n                  Buyer Information\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div>\n                    <p className=\"text-sm text-gray-600\">Name</p>\n                    <p className=\"font-medium\">{inquiry.buyer?.full_name || 'N/A'}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-gray-600\">Email</p>\n                    <p className=\"font-medium\">{inquiry.buyer?.email || 'N/A'}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-gray-600\">User ID</p>\n                    <p className=\"font-medium text-sm\">{inquiry.buyer_id}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Seller Information */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <User className=\"h-5 w-5 mr-2\" />\n                  Seller Information\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div>\n                    <p className=\"text-sm text-gray-600\">Name</p>\n                    <p className=\"font-medium\">{inquiry.seller?.full_name || 'N/A'}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-gray-600\">Email</p>\n                    <p className=\"font-medium\">{inquiry.seller?.email || 'N/A'}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-gray-600\">User ID</p>\n                    <p className=\"font-medium text-sm\">{inquiry.seller_id}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Buyer Message */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <MessageSquare className=\"h-5 w-5 mr-2\" />\n                  Buyer's Message\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"bg-gray-50 rounded-lg p-4\">\n                  <p className=\"text-gray-700 whitespace-pre-wrap\">{inquiry.message || 'No message provided'}</p>\n                </div>\n                <div className=\"mt-4 flex items-center text-sm text-gray-600\">\n                  <Calendar className=\"h-4 w-4 mr-1\" />\n                  Sent on {new Date(inquiry.created_at).toLocaleDateString()} at {new Date(inquiry.created_at).toLocaleTimeString()}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Sidebar */}\n          <div className=\"space-y-6\">\n            {/* Status Management */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Status Management</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm font-medium\">Current Status</span>\n                    {getStatusBadge(inquiry.status)}\n                  </div>\n                  \n                  {inquiry.status === 'pending' && (\n                    <div className=\"space-y-2\">\n                      <Button\n                        onClick={() => handleUpdateStatus('approved')}\n                        disabled={updating}\n                        className=\"w-full bg-green-600 hover:bg-green-700\"\n                      >\n                        <CheckCircle className=\"h-4 w-4 mr-2\" />\n                        Approve Inquiry\n                      </Button>\n                      <Button\n                        onClick={() => handleUpdateStatus('rejected')}\n                        disabled={updating}\n                        variant=\"outline\"\n                        className=\"w-full border-red-600 text-red-600 hover:bg-red-50\"\n                      >\n                        <XCircle className=\"h-4 w-4 mr-2\" />\n                        Reject Inquiry\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Admin Notes */}\n            <Card>\n              <CardHeader>\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle>Admin Notes</CardTitle>\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => setIsEditingNotes(!isEditingNotes)}\n                  >\n                    {isEditingNotes ? <Ban className=\"h-4 w-4\" /> : <Edit className=\"h-4 w-4\" />}\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent>\n                {isEditingNotes ? (\n                  <div className=\"space-y-4\">\n                    <Textarea\n                      value={adminNotes}\n                      onChange={(e) => setAdminNotes(e.target.value)}\n                      placeholder=\"Add your notes about this inquiry...\"\n                      rows={6}\n                      className=\"w-full\"\n                    />\n                    <div className=\"flex space-x-2\">\n                      <Button\n                        onClick={handleSaveNotes}\n                        disabled={updating}\n                        className=\"flex-1\"\n                      >\n                        <Save className=\"h-4 w-4 mr-2\" />\n                        Save Notes\n                      </Button>\n                      <Button\n                        onClick={() => {\n                          setIsEditingNotes(false)\n                          setAdminNotes(inquiry.admin_notes || '')\n                        }}\n                        variant=\"outline\"\n                        disabled={updating}\n                      >\n                        Cancel\n                      </Button>\n                    </div>\n                  </div>\n                ) : (\n                  <div>\n                    {adminNotes ? (\n                      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                        <p className=\"text-blue-800 whitespace-pre-wrap\">{adminNotes}</p>\n                      </div>\n                    ) : (\n                      <p className=\"text-gray-500 italic\">No admin notes yet. Click the edit button to add notes.</p>\n                    )}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Chat */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Live Chat</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Button\n                  onClick={() => setIsChatOpen(true)}\n                  className=\"w-full bg-blue-600 hover:bg-blue-700\"\n                  disabled={!inquiry?.buyer}\n                >\n                  <MessageSquare className=\"h-4 w-4 mr-2\" />\n                  Chat with Customer\n                </Button>\n                <p className=\"text-xs text-gray-600 mt-2\">\n                  Start a real-time conversation with {inquiry?.buyer?.full_name || 'the customer'}\n                </p>\n              </CardContent>\n            </Card>\n\n            {/* Timeline */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Timeline</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"w-2 h-2 bg-blue-600 rounded-full mt-2\"></div>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium\">Inquiry Created</p>\n                      <p className=\"text-xs text-gray-600\">{new Date(inquiry.created_at).toLocaleDateString()} at {new Date(inquiry.created_at).toLocaleTimeString()}</p>\n                    </div>\n                  </div>\n                  \n                  {inquiry.updated_at && (\n                    <div className=\"flex items-start space-x-3\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"w-2 h-2 bg-green-600 rounded-full mt-2\"></div>\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium\">Last Updated</p>\n                        <p className=\"text-xs text-gray-600\">{new Date(inquiry.updated_at).toLocaleDateString()} at {new Date(inquiry.updated_at).toLocaleTimeString()}</p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n\n      {/* Chat Component */}\n      {inquiry && (\n        <InquiryChat\n          inquiryId={inquiryId}\n          customerId={inquiry.buyer_id}\n          customerName={inquiry.buyer?.full_name || 'Customer'}\n          customerEmail={inquiry.buyer?.email || ''}\n          isOpen={isChatOpen}\n          onToggle={() => setIsChatOpen(!isChatOpen)}\n        />\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}