{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Apps/IkazeProperty.rw/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;;;AAKA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAC,6VAA6V,EAAE,aAAa,IAAI;QAC5X,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///D:/Apps/IkazeProperty.rw/src/app/%5Blocale%5D/listings/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport { Search, Home, Car, Trees, Package, Filter, MapPin, Calendar, Eye, Heart, ArrowRight } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Badge } from '@/components/ui/badge'\nimport { fetchListingsWithDetails } from '@/lib/supabase-client'\nimport Image from 'next/image'\n\nexport default function ListingsPage() {\n  const [listings, setListings] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [selectedCategory, setSelectedCategory] = useState('all')\n\n  const categories = [\n    { id: 'houses', name: 'Houses & Apartments', icon: Home, count: 0, color: 'bg-blue-500' },\n    { id: 'cars', name: 'Cars & Vehicles', icon: Car, count: 0, color: 'bg-green-500' },\n    { id: 'land', name: 'Land & Plots', icon: Trees, count: 0, color: 'bg-yellow-500' },\n    { id: 'other', name: 'Other Items', icon: Package, count: 0, color: 'bg-purple-500' }\n  ]\n\n  useEffect(() => {\n    fetchAllListings()\n  }, [])\n\n  const fetchAllListings = async () => {\n    try {\n      setLoading(true)\n      const allListings = []\n      \n      // Fetch listings from all categories\n      for (const category of categories) {\n        const { listings: categoryListings } = await fetchListingsWithDetails({\n          category: category.id,\n          limit: 10 // Get recent listings from each category\n        })\n        allListings.push(...categoryListings)\n      }\n      \n      setListings(allListings)\n    } catch (error) {\n      console.error('Error fetching listings:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const filteredListings = listings.filter(listing =>\n    listing.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    listing.description?.toLowerCase().includes(searchTerm.toLowerCase())\n  )\n\n  const formatLocation = (location: any) => {\n    if (!location) return 'Rwanda'\n    \n    if (typeof location === 'string') {\n      return location\n    }\n    \n    if (typeof location === 'object' && location !== null) {\n      // Handle location object with nested properties\n      const parts = [\n        location.village,\n        location.sector,\n        location.address,\n        location.district,\n        location.province\n      ].filter(Boolean)\n      \n      return parts.length > 0 ? parts.join(', ') : 'Rwanda'\n    }\n    \n    return 'Rwanda'\n  }\n\n  const formatPrice = (price: number, currency: string = 'RWF') => {\n    return new Intl.NumberFormat('en-RW', {\n      style: 'currency',\n      currency: currency,\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }).format(price)\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-8\"></div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n              {[...Array(4)].map((_, i) => (\n                <div key={i} className=\"h-48 bg-gray-200 rounded-lg\"></div>\n              ))}\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {[...Array(6)].map((_, i) => (\n                <div key={i} className=\"h-64 bg-gray-200 rounded-lg\"></div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">Browse Listings</h1>\n              <p className=\"text-gray-600 mt-1\">Discover properties, vehicles, and more across Rwanda</p>\n            </div>\n            <div className=\"flex items-center gap-2 w-full sm:w-auto\">\n              <div className=\"relative flex-1 sm:flex-initial\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input\n                  type=\"text\"\n                  placeholder=\"Search listings...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"pl-10 w-full sm:w-64\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Categories */}\n        <div className=\"mb-8\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Browse by Category</h2>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {categories.map((category) => {\n              const Icon = category.icon\n              return (\n                <Link key={category.id} href={`/listings/${category.id}`}>\n                  <Card className=\"hover:shadow-lg transition-shadow cursor-pointer group\">\n                    <CardContent className=\"p-6\">\n                      <div className={`w-12 h-12 ${category.color} rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`}>\n                        <Icon className=\"h-6 w-6 text-white\" />\n                      </div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">{category.name}</h3>\n                      <p className=\"text-gray-600 text-sm mb-4\">\n                        Explore {category.name.toLowerCase()} in Rwanda\n                      </p>\n                      <div className=\"flex items-center text-red-600 text-sm font-medium group-hover:text-red-700\">\n                        Browse {category.name}\n                        <ArrowRight className=\"h-4 w-4 ml-1\" />\n                      </div>\n                    </CardContent>\n                  </Card>\n                </Link>\n              )\n            })}\n          </div>\n        </div>\n\n        {/* Recent Listings */}\n        {filteredListings.length > 0 && (\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Recent Listings</h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {filteredListings.slice(0, 6).map((listing) => (\n                <Link key={listing.id} href={`/listings/${listing.category}/${listing.id}`}>\n                  <Card className=\"hover:shadow-lg transition-shadow cursor-pointer group\">\n                    <div className=\"relative\">\n                      {listing.media && listing.media.length > 0 ? (\n                        <div className=\"aspect-video relative overflow-hidden rounded-t-lg\">\n                          <Image\n                            src={listing.media[0].url}\n                            alt={listing.title}\n                            fill\n                            className=\"object-cover group-hover:scale-105 transition-transform duration-300\"\n                          />\n                        </div>\n                      ) : (\n                        <div className=\"aspect-video bg-gray-200 rounded-t-lg flex items-center justify-center\">\n                          <Package className=\"h-12 w-12 text-gray-400\" />\n                        </div>\n                      )}\n                      <div className=\"absolute top-2 right-2\">\n                        <Badge className=\"bg-red-600 text-white\">\n                          {listing.category}\n                        </Badge>\n                      </div>\n                    </div>\n                    <CardContent className=\"p-4\">\n                      <h3 className=\"font-semibold text-gray-900 mb-2 line-clamp-1\">{listing.title}</h3>\n                      <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">{listing.description}</p>\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <div className=\"text-lg font-bold text-red-600\">\n                          {formatPrice(listing.price, listing.currency)}\n                        </div>\n                        <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n                          <Eye className=\"h-4 w-4\" />\n                          <span>{listing.views || 0}</span>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center justify-between text-sm text-gray-500\">\n                        <div className=\"flex items-center gap-1\">\n                          <MapPin className=\"h-4 w-4\" />\n                          <span>{formatLocation(listing.location)}</span>\n                        </div>\n                        <div className=\"flex items-center gap-1\">\n                          <Calendar className=\"h-4 w-4\" />\n                          <span>{new Date(listing.created_at).toLocaleDateString()}</span>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                </Link>\n              ))}\n            </div>\n            \n            {/* View More Button */}\n            <div className=\"text-center mt-8\">\n              <Link href=\"/listings/houses\">\n                <Button size=\"lg\" className=\"bg-red-600 hover:bg-red-700\">\n                  View All Houses\n                </Button>\n              </Link>\n            </div>\n          </div>\n        )}\n\n        {/* No Listings Found */}\n        {filteredListings.length === 0 && (\n          <div className=\"text-center py-12\">\n            <Package className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No listings found</h3>\n            <p className=\"text-gray-600 mb-6\">\n              {searchTerm ? 'Try adjusting your search terms' : 'Check back later for new listings'}\n            </p>\n            <Link href=\"/listings/houses\">\n              <Button variant=\"outline\">\n                Browse Houses\n              </Button>\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}