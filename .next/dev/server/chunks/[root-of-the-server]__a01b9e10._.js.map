{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Apps/IkazeProperty.rw/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\n// Environment variables with fallbacks for development\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || 'https://swshkufpktnacbotddpb.supabase.co';\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN3c2hrdWZwa3RuYWNib3RkZHBiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA0NTE4MzksImV4cCI6MjA4NjAyNzgzOX0.XjlJZscCno-_czhwXqwdSlKgUUpDZty6i37mtwqcnA8';\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN3c2hrdWZwa3RuYWNib3RkZHBiIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc3MDQ1MTgzOSwiZXhwIjoyMDg2MDI3ODM5fQ.T_LnaxClQV-ddubCnBnVk0d0lgkmT0GUs1EsD1qVG3U';\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\n// For server-side operations\nexport const supabaseAdmin = createClient(\n  supabaseUrl,\n  supabaseServiceRoleKey\n);\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,uDAAuD;AACvD,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AACrE,MAAM,yBAAyB,QAAQ,GAAG,CAAC,yBAAyB,IAAI;AAEjE,MAAM,WAAW,IAAA,gMAAY,EAAC,aAAa;AAG3C,MAAM,gBAAgB,IAAA,gMAAY,EACvC,aACA"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///D:/Apps/IkazeProperty.rw/src/app/api/ads/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { supabaseAdmin } from '@/lib/supabase'\n\nexport async function GET(request: Request) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const placement = searchParams.get('placement')\n    const status = searchParams.get('status') || 'active'\n\n    if (!placement) {\n      return NextResponse.json(\n        { error: 'Placement parameter is required' },\n        { status: 400 }\n      )\n    }\n\n    // First, get the placement ID from ad_rotations table\n    const { data: rotations, error: rotationError } = await supabaseAdmin\n      .from('ad_rotations')\n      .select('ad_campaign_id')\n      .eq('is_active', true)\n      // Note: You'll need to add placement_id to your ad_rotations table or use a different approach\n      .limit(10)\n\n    if (rotationError) {\n      console.error('Error fetching rotations:', rotationError)\n    }\n\n    // For now, let's fetch all active campaigns and filter by type\n    const { data: campaigns, error } = await supabaseAdmin\n      .from('ad_campaigns')\n      .select('*')\n      .eq('status', status)\n      .order('created_at', { ascending: false })\n      .limit(5)\n\n    if (error) {\n      console.error('Error fetching ad campaigns:', error)\n      return NextResponse.json(\n        { error: 'Failed to fetch ad campaigns' },\n        { status: 500 }\n      )\n    }\n\n    if (!campaigns || campaigns.length === 0) {\n      return NextResponse.json({ ad: null })\n    }\n\n    // Get the first campaign (you can implement rotation logic later)\n    const campaign = campaigns[0]\n\n    const adData = {\n      id: campaign.id,\n      title: campaign.title,\n      image: campaign.primary_image_url || campaign.media_urls?.[0] || null,\n      link: campaign.cta_link,\n      description: campaign.description,\n      type: campaign.ad_type,\n      isSponsored: campaign.ad_type !== 'premium_listing',\n      campaignId: campaign.id,\n      budget: parseFloat(campaign.budget_total) || 0,\n      spent: parseFloat(campaign.spent_amount) || 0,\n      startDate: campaign.start_date,\n      endDate: campaign.end_date,\n      advertiser: {\n        name: 'Advertiser', // You can join with users table to get real name\n        email: null\n      }\n    }\n\n    return NextResponse.json({ ad: adData })\n  } catch (error) {\n    console.error('Error in ads API:', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAgB;IACxC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,YAAY,aAAa,GAAG,CAAC;QACnC,MAAM,SAAS,aAAa,GAAG,CAAC,aAAa;QAE7C,IAAI,CAAC,WAAW;YACd,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAkC,GAC3C;gBAAE,QAAQ;YAAI;QAElB;QAEA,sDAAsD;QACtD,MAAM,EAAE,MAAM,SAAS,EAAE,OAAO,aAAa,EAAE,GAAG,MAAM,yIAAa,CAClE,IAAI,CAAC,gBACL,MAAM,CAAC,kBACP,EAAE,CAAC,aAAa,KACjB,+FAA+F;SAC9F,KAAK,CAAC;QAET,IAAI,eAAe;YACjB,QAAQ,KAAK,CAAC,6BAA6B;QAC7C;QAEA,+DAA+D;QAC/D,MAAM,EAAE,MAAM,SAAS,EAAE,KAAK,EAAE,GAAG,MAAM,yIAAa,CACnD,IAAI,CAAC,gBACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAU,QACb,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM,GACvC,KAAK,CAAC;QAET,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA+B,GACxC;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,CAAC,aAAa,UAAU,MAAM,KAAK,GAAG;YACxC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;YAAK;QACtC;QAEA,kEAAkE;QAClE,MAAM,WAAW,SAAS,CAAC,EAAE;QAE7B,MAAM,SAAS;YACb,IAAI,SAAS,EAAE;YACf,OAAO,SAAS,KAAK;YACrB,OAAO,SAAS,iBAAiB,IAAI,SAAS,UAAU,EAAE,CAAC,EAAE,IAAI;YACjE,MAAM,SAAS,QAAQ;YACvB,aAAa,SAAS,WAAW;YACjC,MAAM,SAAS,OAAO;YACtB,aAAa,SAAS,OAAO,KAAK;YAClC,YAAY,SAAS,EAAE;YACvB,QAAQ,WAAW,SAAS,YAAY,KAAK;YAC7C,OAAO,WAAW,SAAS,YAAY,KAAK;YAC5C,WAAW,SAAS,UAAU;YAC9B,SAAS,SAAS,QAAQ;YAC1B,YAAY;gBACV,MAAM;gBACN,OAAO;YACT;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAO;IACxC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}