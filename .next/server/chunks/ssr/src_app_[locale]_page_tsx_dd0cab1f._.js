module.exports=[91990,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(87532),f=a.i(81010),g=a.i(48464),h=a.i(79161),i=a.i(83497),j=a.i(3314),k=a.i(60246),l=a.i(24669),m=a.i(32860),n=a.i(76472),o=a.i(77156),p=a.i(24987),q=a.i(41675),r=a.i(99570),s=a.i(91119),t=a.i(68982),u=a.i(86304),v=a.i(62297),w=a.i(24507);function x(){let[a,x]=(0,c.useState)(""),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)(0),[I,J]=(0,c.useState)("all"),[K,L]=(0,c.useState)("created_at"),[M,N]=(0,c.useState)(0),O=(0,c.useRef)(null),P=(0,c.useCallback)(a=>{!C&&(O.current&&O.current.disconnect(),O.current=new IntersectionObserver(a=>{a[0].isIntersecting&&E&&R()},{threshold:.1}),a&&O.current.observe(a))},[C,E]),Q=async(b,c=!1)=>{try{c?D(!0):B(!0);let d=w.supabaseClient.from("listings").select(`
          *,
          seller:users!listings_seller_id_fkey(
            full_name,
            email
          ),
          media:listing_media(
            url,
            media_type,
            is_primary,
            order_index
          ).order('is_primary', { ascending: false }).order('order_index', { ascending: true })
        `,{count:"exact"}).eq("status","available");"all"!==I&&(d=d.eq("category",I)),a.trim()&&(d=d.or(`title.ilike.%${a}%,description.ilike.%${a}%`)),d=d.order(K,{ascending:!1}).range(20*b,(b+1)*20-1);let{data:e,error:f,count:g}=await d;if(f)console.error("Error fetching listings:",f);else{c?z(a=>[...a,...e||[]]):(z(e||[]),N(g||0));let a=20===(e?.length||0)&&(b+1)*20<(g||0);F(a),c||H(0)}}catch(a){console.error("Error:",a)}finally{B(!1),D(!1)}},R=()=>{if(E&&!C){let a=G+1;H(a),Q(a,!0)}};(0,c.useEffect)(()=>{Q(0,!1)},[I,K]),(0,c.useEffect)(()=>{let a=setTimeout(()=>{0===G&&Q(0,!1)},500);return()=>clearTimeout(a)},[a]);let S=[{name:"Houses & Apartments",href:"/listings/houses",icon:f.Home,description:"Find your dream home or apartment",color:"bg-blue-500",count:"1,234"},{name:"Cars & Vehicles",href:"/listings/cars",icon:g.Car,description:"Quality vehicles for sale and rent",color:"bg-green-500",count:"856"},{name:"Land & Plots",href:"/listings/land",icon:h.Trees,description:"Perfect plots for development",color:"bg-yellow-500",count:"432"},{name:"Other Items",href:"/listings/other",icon:i.Package,description:"Electronics, furniture, and more",color:"bg-purple-500",count:"2,156"}],T=[{label:"Active Listings",value:"4,678",icon:i.Package},{label:"Verified Users",value:"12,456",icon:k.Users},{label:"Successful Transactions",value:"3,234",icon:l.TrendingUp},{label:"Trust Score",value:"98.5%",icon:j.Shield}];return(0,b.jsxs)("div",{className:"min-h-screen",children:[(0,b.jsx)("section",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white py-20",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"Find Your Perfect Property in Rwanda"}),(0,b.jsx)("p",{className:"text-xl md:text-2xl mb-8 text-red-100",children:"Secure transactions, admin-mediated connections, trusted marketplace"}),(0,b.jsx)("form",{onSubmit:a=>{a.preventDefault(),H(0),Q(0,!1)},className:"max-w-2xl mx-auto",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(e.Search,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",value:a,onChange:a=>x(a.target.value),placeholder:"Search properties, cars, land...",className:"w-full pl-10 pr-4 py-3 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white"})]}),(0,b.jsx)(r.Button,{type:"submit",className:"bg-white text-red-600 hover:bg-gray-100 px-8",children:"Search"})]})})]})})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsx)("div",{className:"py-6",children:(0,b.jsx)(v.HomepageLeaderboard,{})})}),(0,b.jsx)("section",{className:"py-16 bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"text-center mb-12",children:[(0,b.jsx)("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Browse Categories"}),(0,b.jsx)("p",{className:"text-lg text-gray-600",children:"Find exactly what you're looking for in our curated categories"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:S.map(a=>{let c=a.icon;return(0,b.jsx)(d.default,{href:a.href,children:(0,b.jsx)(s.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer group",children:(0,b.jsxs)(s.CardContent,{className:"p-6",children:[(0,b.jsx)("div",{className:`${a.color} w-12 h-12 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`,children:(0,b.jsx)(c,{className:"h-6 w-6 text-white"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:a.name}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-2xl font-bold text-red-600",children:a.count}),(0,b.jsx)(m.ArrowRight,{className:"h-5 w-5 text-gray-400 group-hover:text-red-600 transition-colors"})]})]})})},a.name)})})]})}),(0,b.jsxs)("section",{className:"py-16",children:[(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-12 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"All Listings"}),(0,b.jsx)("p",{className:"text-lg text-gray-600",children:M>0?`Showing ${y.length} of ${M} listings`:"Browse all available listings"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full lg:w-auto",children:[(0,b.jsxs)("select",{value:I,onChange:a=>{J(a.target.value),H(0)},className:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm","aria-label":"Filter by category",title:"Filter by category",children:[(0,b.jsx)("option",{value:"all",children:"All Categories"}),(0,b.jsx)("option",{value:"houses",children:"Houses & Apartments"}),(0,b.jsx)("option",{value:"cars",children:"Cars & Vehicles"}),(0,b.jsx)("option",{value:"land",children:"Land & Plots"}),(0,b.jsx)("option",{value:"other",children:"Other Items"})]}),(0,b.jsxs)("select",{value:K,onChange:a=>{L(a.target.value),H(0)},className:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm","aria-label":"Sort listings",title:"Sort listings",children:[(0,b.jsx)("option",{value:"created_at",children:"Newest First"}),(0,b.jsx)("option",{value:"price",children:"Price: Low to High"}),(0,b.jsx)("option",{value:"views",children:"Most Viewed"}),(0,b.jsx)("option",{value:"likes",children:"Most Liked"})]})]})]}),A&&0===y.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading listings..."})]}):0===y.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"ðŸ”"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No listings found"}),(0,b.jsx)("p",{className:"text-gray-600",children:a||"all"!==I?"Try adjusting your filters or search query":"Check back later for new listings"})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((a,c)=>{let d,e;return(0,b.jsxs)(s.Card,{ref:c===y.length-3?P:void 0,className:"hover:shadow-lg transition-shadow group",children:[(0,b.jsxs)(s.CardHeader,{className:"pb-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)(u.Badge,{className:`${(a=>{switch(a){case"houses":return"bg-blue-100 text-blue-800";case"cars":return"bg-green-100 text-green-800";case"land":return"bg-yellow-100 text-yellow-800";default:return"bg-purple-100 text-purple-800"}})(a.category)} border-0`,children:[(a=>{switch(a){case"houses":return"ðŸ ";case"cars":return"ðŸš—";case"land":return"ðŸŒ³";default:return"ðŸ“¦"}})(a.category)," ",a.category]}),(0,b.jsxs)("div",{className:"flex gap-1",children:[a.featured&&(0,b.jsx)(u.Badge,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"â­ Featured"}),a.promoted&&(0,b.jsx)(u.Badge,{variant:"secondary",className:"bg-red-100 text-red-800",children:"ðŸš€ Promoted"})]})]}),(0,b.jsx)(s.CardTitle,{className:"text-lg line-clamp-2",children:a.title})]}),(0,b.jsxs)(s.CardContent,{children:[(0,b.jsx)("div",{className:"mb-4",children:a.media&&a.media.length>0?(0,b.jsxs)("div",{className:"relative",children:["video"===a.media[0].media_type?(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("video",{src:a.media[0].url,className:"w-full h-48 object-cover rounded-lg",muted:!0,playsInline:!0,poster:a.media[0].url}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 rounded-lg",children:(0,b.jsx)("div",{className:"w-12 h-12 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-gray-800 ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):(0,b.jsx)("img",{src:a.media[0].url,alt:a.title,className:"w-full h-48 object-cover rounded-lg"}),a.media[0].is_primary&&(0,b.jsx)(u.Badge,{className:"absolute top-2 left-2 bg-red-600 text-white text-xs",children:"Primary"})]}):(0,b.jsx)("div",{className:"w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-gray-400 text-4xl mb-2",children:"ðŸ“·"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"No media available"})]})})}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-red-600 mb-3",children:[(d=a.price,e=a.currency,new Intl.NumberFormat("en-RW",{style:"currency",currency:"RWF"===e?"RWF":"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(d)),"negotiable"===a.price_type&&(0,b.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:"(Negotiable)"})]}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:a.description}),a.location&&"object"==typeof a.location&&(0,b.jsxs)("div",{className:"flex items-center text-gray-500 text-sm mb-3",children:[(0,b.jsx)(p.MapPin,{className:"h-4 w-4 mr-1"}),a.location?.district||"Location not specified"]}),(0,b.jsx)(t.default,{className:"mb-4"}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(o.Eye,{className:"h-4 w-4"}),a.views]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(n.Heart,{className:"h-4 w-4"}),a.likes]})]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(q.Calendar,{className:"h-4 w-4"}),new Date(a.created_at).toLocaleDateString()]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Listed by"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.seller?.full_name||"Anonymous"})]}),(0,b.jsx)(r.Button,{asChild:!0,children:(0,b.jsx)("a",{href:`/listings/${a.category}/${a.id}`,children:"View Details"})})]})]})]},a.id)})}),C&&(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading more listings..."})]}),!E&&y.length>0&&(0,b.jsx)("div",{className:"text-center py-8",children:(0,b.jsx)("p",{className:"text-gray-600",children:y.length===M?`You've reached the end of ${M} listings`:"No more listings to load"})})]}),(0,b.jsx)("div",{className:"hidden lg:block",children:(0,b.jsx)("div",{className:"ml-6",children:(0,b.jsx)(v.HomepageSidebar,{})})})]}),(0,b.jsx)("section",{className:"py-16 bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"text-center mb-12",children:[(0,b.jsx)("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Trusted by Thousands"}),(0,b.jsx)("p",{className:"text-lg text-gray-600",children:"Join Rwanda's most trusted marketplace platform"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:T.map(a=>{let c=a.icon;return(0,b.jsx)(s.Card,{children:(0,b.jsxs)(s.CardContent,{className:"p-6 text-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(c,{className:"h-6 w-6 text-red-600"})}),(0,b.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:a.value}),(0,b.jsx)("div",{className:"text-gray-600",children:a.label})]})},a.label)})})]})}),(0,b.jsx)("section",{className:"py-16",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"text-center mb-12",children:[(0,b.jsx)("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"How It Works"}),(0,b.jsx)("p",{className:"text-lg text-gray-600",children:"Simple, secure, and transparent process"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("span",{className:"text-white font-bold text-xl",children:"1"})}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Browse & Find"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Search through our curated listings to find your perfect property or item"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("span",{className:"text-white font-bold text-xl",children:"2"})}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Express Interest"}),(0,b.jsx)("p",{className:"text-gray-600",children:'Click "Express Interest" and our admin team will facilitate a secure connection'})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("span",{className:"text-white font-bold text-xl",children:"3"})}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Complete Transaction"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Complete your transaction with our 30% commission guarantee and support"})]})]})]})}),(0,b.jsx)("section",{className:"py-16 bg-red-600 text-white",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,b.jsx)("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Get Started?"}),(0,b.jsx)("p",{className:"text-xl mb-8 text-red-100",children:"Join thousands of Rwandans buying and selling with confidence"}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,b.jsx)(d.default,{href:"/create-listing",children:(0,b.jsx)(r.Button,{size:"lg",className:"bg-white text-red-600 hover:bg-gray-100",children:"Start Selling"})}),(0,b.jsx)(d.default,{href:"/listings",children:(0,b.jsx)(r.Button,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white hover:text-red-600",children:"Browse Listings"})})]})]})})]})}a.s(["default",()=>x])}];

//# sourceMappingURL=src_app_%5Blocale%5D_page_tsx_dd0cab1f._.js.map