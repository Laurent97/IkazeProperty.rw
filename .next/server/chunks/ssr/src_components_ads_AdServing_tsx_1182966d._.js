module.exports=[62297,54059,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(71987),e=a.i(70106);let f=(0,e.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var g=a.i(76270),h=a.i(34044);function i({placementCode:a,className:e="",maxWidth:i,maxHeight:j,showCloseButton:k=!1,showMinimizeButton:l=!0}){let[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),w=a=>{switch(a){case"banner":return"w-full max-w-[970px] h-[250px]";case"sponsored":default:return"w-full max-w-[300px] h-[250px]";case"premium_listing":return"w-full max-w-[400px] h-[300px]"}};(0,c.useEffect)(()=>{(async()=>{try{p(!0);let b=await fetch(`/api/ads?placement=${a}&status=active`),c=await b.json();b.ok&&c.ad?n(c.ad):n(null)}catch(a){console.error("Error fetching ad:",a),n(null)}finally{p(!1)}})()},[a]),(0,c.useEffect)(()=>{!m||u||q||s||(x("impression"),v(!0))},[m,u,q,s,a]);let x=async a=>{try{await fetch("/api/ads/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaignId:m?.campaignId||m?.id,type:a,userAgent:navigator.userAgent,ip:null,referrer:document.referrer})})}catch(a){console.error("Error recording analytics:",a)}},y=()=>{m&&(x("click"),m.link?.startsWith("#")?window.location.href=m.link:m.link&&window.open(m.link,"_blank","noopener,noreferrer"))},z=()=>{t(!s)};if(!m||q||o)return o?(0,b.jsx)("div",{className:`${e} bg-gray-100 animate-pulse flex items-center justify-center ${w(m?.type||"banner")}`,children:(0,b.jsx)("div",{className:"text-gray-400 text-sm",children:"Loading ad..."})}):null;if(s)return(0,b.jsx)("div",{className:`${e} relative group bg-gray-100 border border-gray-300 rounded-lg p-2 cursor-pointer hover:bg-gray-200 transition-colors minimized-ad-bar`,onClick:z,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 bg-red-600 rounded flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white text-xs font-bold",children:"AD"})}),(0,b.jsx)("span",{className:"text-xs text-gray-600 font-medium",children:m.title}),m.isSponsored&&(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"â€¢ SPONSORED"})]}),(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),z()},className:"bg-white hover:bg-gray-50 rounded-full p-1 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity touch-target","aria-label":"Restore ad",title:"Restore ad",children:(0,b.jsx)(h.Maximize2,{className:"h-3 w-3 text-gray-600"})})]})});let A=`relative group cursor-pointer ${e} ${w(m.type)}`;switch(m.type){case"banner":return(0,b.jsx)("div",{className:A,onClick:y,children:(0,b.jsxs)("div",{className:"relative overflow-hidden rounded-lg",children:[l&&(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),z()},className:"absolute top-2 right-2 z-10 bg-white/80 hover:bg-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity touch-target","aria-label":"Minimize ad",title:"Minimize ad",children:(0,b.jsx)(g.Minimize2,{className:"h-3 w-3 text-gray-600"})}),m.image?(0,b.jsx)(d.default,{src:m.image,alt:m.title,width:i||728,height:j||250,className:"w-full h-auto object-cover",unoptimized:m.image?.startsWith("/api/placeholder")}):(0,b.jsx)("div",{className:`bg-gray-200 flex items-center justify-center ${w("banner")}`,children:(0,b.jsx)("span",{className:"text-gray-500",children:"Ad Space"})}),m.isSponsored&&(0,b.jsx)("div",{className:"absolute top-2 left-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:"SPONSORED"}),m.description&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 text-white p-2 text-sm",children:m.description})]})});case"sponsored":return(0,b.jsxs)("div",{className:A,onClick:y,children:[l&&(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),z()},className:"absolute top-2 right-2 z-10 bg-white/80 hover:bg-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity touch-target","aria-label":"Minimize ad",title:"Minimize ad",children:(0,b.jsx)(g.Minimize2,{className:"h-3 w-3 text-gray-600"})}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[m.image?(0,b.jsx)(d.default,{src:m.image,alt:m.title,width:i||300,height:j||250,className:"w-full h-auto object-cover",unoptimized:m.image?.startsWith("/api/placeholder")}):(0,b.jsx)("div",{className:`bg-gray-100 flex items-center justify-center p-8 ${w("sponsored")}`,children:(0,b.jsxs)("span",{className:"text-gray-500 text-center",children:["Ad Space",(0,b.jsx)("br",{}),i,"x",j]})}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("h4",{className:"font-semibold text-sm text-gray-900 mb-1",children:m.title}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[m.isSponsored&&(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"SPONSORED"}),(0,b.jsx)(f,{className:"h-3 w-3 text-gray-400"})]})]})]})]});case"premium_listing":return(0,b.jsxs)("div",{className:A,onClick:y,children:[l&&(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),z()},className:"absolute top-2 right-2 z-10 bg-white/80 hover:bg-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity touch-target","aria-label":"Minimize ad",title:"Minimize ad",children:(0,b.jsx)(g.Minimize2,{className:"h-3 w-3 text-gray-600"})}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden hover:shadow-md transition-shadow",children:[m.image?(0,b.jsx)(d.default,{src:m.image,alt:m.title,width:i||400,height:j||300,className:"w-full h-auto object-cover",unoptimized:m.image?.startsWith("/api/placeholder")}):(0,b.jsx)("div",{className:`bg-gray-100 flex items-center justify-center ${w("premium_listing")}`,children:(0,b.jsx)("span",{className:"text-gray-500",children:"Premium Listing"})}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:m.title}),m.description&&(0,b.jsx)("p",{className:"text-sm text-gray-600",children:m.description}),m.isSponsored&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("span",{className:"bg-red-100 text-red-600 text-xs px-2 py-1 rounded",children:"PROMOTED"})})]})]})]});default:return(0,b.jsx)("div",{className:A,onClick:y,children:(0,b.jsx)("div",{className:"bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-gray-500 mb-2",children:"Ad Space"}),(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:[i,"x",j]})]})})})}}function j(a){return(0,b.jsx)(i,{...a,placementCode:"homepage_leaderboard",maxWidth:970,maxHeight:250,showMinimizeButton:!0})}function k(a){return(0,b.jsx)(i,{...a,placementCode:"homepage_sidebar",maxWidth:300,maxHeight:250,showMinimizeButton:!0})}a.s(["HomepageLeaderboard",()=>j,"HomepageSidebar",()=>k],62297);var l=a.i(50778),m=a.i(16286),n=a.i(48124),o=a.i(48464),p=a.i(79161),q=a.i(81010),r=a.i(3314);let s=(0,e.default)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);var t=a.i(13655),u=a.i(41675),v=a.i(24987),w=a.i(83497),x=a.i(41379),y=a.i(77156),z=a.i(43108),A=a.i(41710),B=a.i(16201),C=a.i(99570);function D({listingId:a,className:d=""}){let[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(""),m=async()=>{f(!0),l("");try{let b=await fetch("/api/watermark-policy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"create_session",listingId:a,durationHours:1})}),c=await b.json();c.success?(h(c.sessionToken),j(c.expiresAt),setTimeout(()=>{window.location.reload()},1e3)):l(c.error||"Failed to request access")}catch(a){l("Failed to request access")}finally{f(!1)}};return g?(0,b.jsxs)("div",{className:`flex items-center gap-2 text-xs text-green-600 ${d}`,children:[(0,b.jsx)(B.CheckCircle,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:["Access granted until ",new Date(i||"").toLocaleTimeString()]})]}):(0,b.jsxs)("div",{className:`flex items-center gap-2 ${d}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,b.jsx)(z.Lock,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:"Details restricted"})]}),(0,b.jsx)(C.Button,{onClick:m,disabled:e,variant:"outline",size:"sm",className:"text-xs h-6 px-2",children:e?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.Clock,{className:"h-3 w-3 animate-spin"}),"Requesting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.Eye,{className:"h-3 w-3"}),"Request Access"]})}),k&&(0,b.jsx)("span",{className:"text-xs text-red-500",children:k})]})}function E({category:a,listing:d,className:e=""}){let[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(!1);(0,c.useEffect)(()=>{g(!0),i(!1)},[d.id]);let j=(()=>{switch(a.toLowerCase()){case"houses":case"house":let c=d.house_details;if(!c)return null;let e=[];return c.bedrooms&&e.push({icon:l.Bed,label:"Bedrooms",value:`${c.bedrooms} bed`}),c.bathrooms&&e.push({icon:m.Bath,label:"Bathrooms",value:`${c.bathrooms} bath`}),c.total_area&&e.push({icon:n.Square,label:"Area",value:`${c.total_area}m\xb2`}),c.year_built&&e.push({icon:u.Calendar,label:"Built",value:c.year_built.toString()}),c.furnished&&"unfurnished"!==c.furnished&&e.push({icon:q.Home,label:"Furnished",value:c.furnished.replace("_"," ")}),c.parking&&"none"!==c.parking&&e.push({icon:o.Car,label:"Parking",value:c.parking}),e.slice(0,4).map((a,c)=>{let d=a.icon;return(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[(0,b.jsx)(d,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.value})]},c)});case"cars":case"car":let f=d.car_details;if(!f)return null;let g=[];return f.year_manufacture&&g.push({icon:u.Calendar,label:"Year",value:f.year_manufacture.toString()}),f.mileage&&g.push({icon:s,label:"Mileage",value:`${f.mileage.toLocaleString()} km`}),f.fuel_type&&g.push({icon:t.Fuel,label:"Fuel",value:f.fuel_type}),f.transmission&&g.push({icon:s,label:"Transmission",value:f.transmission}),f.make&&f.model&&g.push({icon:o.Car,label:"Model",value:`${f.make} ${f.model}`}),f.color&&g.push({icon:o.Car,label:"Color",value:f.color}),f.doors&&g.push({icon:o.Car,label:"Doors",value:`${f.doors} doors`}),f.seats&&g.push({icon:o.Car,label:"Seats",value:`${f.seats} seats`}),g.slice(0,4).map((a,c)=>{let d=a.icon;return(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[(0,b.jsx)(d,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.value})]},c)});case"land":let h=d.land_details;if(!h)return null;let i=[];return h.plot_size&&h.size_unit&&i.push({icon:n.Square,label:"Size",value:`${h.plot_size} ${h.size_unit}`}),h.plot_type&&i.push({icon:p.Trees,label:"Type",value:h.plot_type}),h.shape&&i.push({icon:n.Square,label:"Shape",value:h.shape}),h.topography&&i.push({icon:p.Trees,label:"Topography",value:h.topography}),h.road_access&&i.push({icon:v.MapPin,label:"Access",value:h.road_access}),h.land_title_type&&i.push({icon:r.Shield,label:"Title",value:h.land_title_type}),h.fenced&&i.push({icon:r.Shield,label:"Fenced",value:"Yes"}),h.surveyed&&i.push({icon:v.MapPin,label:"Surveyed",value:"Yes"}),i.slice(0,4).map((a,c)=>{let d=a.icon;return(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[(0,b.jsx)(d,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.value})]},c)});default:let j=d.other_item_details;if(!j)return null;let k=[];return j.subcategory&&k.push({icon:w.Package,label:"Category",value:j.subcategory}),j.condition&&k.push({icon:r.Shield,label:"Condition",value:j.condition.replace("_"," ")}),j.brand&&k.push({icon:w.Package,label:"Brand",value:j.brand}),j.model&&k.push({icon:w.Package,label:"Model",value:j.model}),j.warranty_available&&k.push({icon:r.Shield,label:"Warranty",value:"Available"}),k.slice(0,4).map((a,c)=>{let d=a.icon;return(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[(0,b.jsx)(d,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.value})]},c)})}})();return j&&0!==j.length?h?(0,b.jsx)("div",{className:`flex flex-wrap gap-2 mb-3 ${e}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,b.jsx)(x.EyeOff,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:"Checking permissions..."})]})}):f?(0,b.jsx)("div",{className:`flex flex-wrap gap-2 mb-3 ${e}`,children:j}):(0,b.jsxs)("div",{className:`flex flex-wrap items-center gap-2 mb-3 ${e}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,b.jsx)(x.EyeOff,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:"Details hidden"})]}),(0,b.jsx)(D,{listingId:d.id})]}):null}a.s(["default",()=>E],54059)}];

//# sourceMappingURL=src_components_ads_AdServing_tsx_1182966d._.js.map