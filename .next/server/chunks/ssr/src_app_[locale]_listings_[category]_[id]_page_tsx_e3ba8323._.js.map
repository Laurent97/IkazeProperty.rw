{"version":3,"sources":["../../../../src/app/%5Blocale%5D/listings/%5Bcategory%5D/%5Bid%5D/page.tsx","../../../../src/components/listing/inquiry-button.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useParams, useRouter } from 'next/navigation'\nimport { ArrowLeft, MapPin, User } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport type { Database } from '@/types/database'\nimport type { PaymentMethod, CryptoType } from '@/types/payment'\nimport AdminContactInfo from '@/components/listing/admin-contact'\nimport FavoriteButton from '@/components/listing/favorite-button'\nimport InquiryButton from '@/components/listing/inquiry-button'\nimport { usePaymentContext } from '@/contexts/PaymentContext'\n\ntype Listing = Database['public']['Tables']['listings']['Row'] & {\n  seller?: {\n    id: string\n    full_name: string | null\n    email: string | null\n    avatar_url: string | null\n  }\n}\n\ntype ListingMedia = Database['public']['Tables']['listing_media']['Row']\n\nexport default function ListingDetailPage() {\n  const router = useRouter()\n  const params = useParams() as { locale: string; category: string; id: string }\n  const { category, id } = params\n  \n  const { paymentSettings } = usePaymentContext()\n  \n  const [listing, setListing] = useState<Listing | null>(null)\n  const [media, setMedia] = useState<ListingMedia[]>([])\n  const [loading, setLoading] = useState(true)\n  const [selectedImageIndex, setSelectedImageIndex] = useState(0)\n  const [similarListings, setSimilarListings] = useState<Listing[]>([])\n  const [error, setError] = useState('')\n  const [showVisitModal, setShowVisitModal] = useState(false)\n  const [visitMethod, setVisitMethod] = useState<PaymentMethod>('mtn_momo')\n  const [visitSubmitting, setVisitSubmitting] = useState(false)\n  const [visitError, setVisitError] = useState('')\n  const [visitSuccess, setVisitSuccess] = useState('')\n  const [paymentScreenshot, setPaymentScreenshot] = useState<File | null>(null)\n  const [paymentProof, setPaymentProof] = useState<File | null>(null)\n  const [paymentStep, setPaymentStep] = useState<'details' | 'proof' | 'confirmation'>('details')\n  const [availableMethods, setAvailableMethods] = useState<PaymentMethod[]>([])\n  const [visitFeeAmount] = useState(15000)\n\n  const fetchSimilarListings = async (currentListing: Listing) => {\n    try {\n      const { supabaseClient } = await import('@/lib/supabase-client')\n      const { data, error } = await supabaseClient\n        .from('listings')\n        .select(`\n          id,\n          title,\n          price,\n          currency,\n          location,\n          transaction_type,\n          price_type,\n          media:listing_media(\n            url,\n            media_type\n          ).order('is_primary', { ascending: false }).limit(1)\n        `)\n        .eq('category', currentListing.category)\n        .eq('status', 'available')\n        .neq('id', currentListing.id)\n        .limit(6)\n        .order('created_at', { ascending: false })\n\n      if (error) {\n        console.error('Error fetching similar listings:', error)\n      } else {\n        setSimilarListings(data || [])\n      }\n    } catch (err) {\n      console.error('Error fetching similar listings:', err)\n    }\n  }\n\n  useEffect(() => {\n    let isActive = true\n\n    const fetchListing = async () => {\n      if (!id) return\n      setLoading(true)\n      setError('')\n\n      try {\n        const { supabaseClient } = await import('@/lib/supabase-client')\n        const { data, error: listingError } = await supabaseClient\n          .from('listings')\n          .select(`\n            *,\n            seller:users!listings_seller_id_fkey(\n              id,\n              full_name,\n              email,\n              avatar_url\n            ),\n            listing_media(\n              id,\n              url,\n              public_id,\n              media_type,\n              order_index,\n              is_primary\n            )\n          `)\n          .eq('id', id)\n          .single()\n\n        if (listingError || !data) {\n          if (isActive) {\n            setError('Listing not found')\n            setLoading(false)\n          }\n          return\n        }\n\n        if ((data as any).category !== category) {\n          if (isActive) {\n            setError('Listing not found')\n            setLoading(false)\n          }\n          return\n        }\n\n        const { data: mediaData, error: mediaError } = await supabaseClient\n          .from('listing_media')\n          .select('*')\n          .eq('listing_id', id)\n          .order('order_index', { ascending: true })\n\n        console.log('üì∏ Media query result:', {\n          listingId: id,\n          mediaData,\n          mediaError,\n          mediaCount: mediaData?.length || 0\n        })\n\n        if (isActive) {\n          setListing(data as Listing)\n          setMedia(mediaData || [])\n          setSelectedImageIndex(0)\n          setLoading(false)\n        }\n\n        if (data) {\n          fetchSimilarListings(data as Listing)\n        }\n      } catch (err) {\n        console.error('Error fetching listing:', err)\n        if (isActive) {\n          setError('Listing not found')\n          setLoading(false)\n        }\n      }\n    }\n\n    fetchListing()\n\n    return () => {\n      isActive = false\n    }\n  }, [category, id])\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 no-overflow-x\">\n        <div className=\"max-w-5xl mx-auto px-3 sm:px-4 lg:px-6 lg:px-8 py-4 sm:py-8\">\n          <p className=\"text-gray-600 text-sm sm:text-base\">Loading listing...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error || !listing) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 no-overflow-x\">\n        <div className=\"max-w-5xl mx-auto px-3 sm:px-4 lg:px-6 lg:px-8 py-4 sm:py-8\">\n          <Button variant=\"outline\" onClick={() => router.back()} className=\"touch-target\">\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back\n          </Button>\n          <div className=\"mt-4 sm:mt-6 text-gray-700 text-sm sm:text-base\">{error || 'Listing not found'}</div>\n        </div>\n\n        {/* Similar Items Section */}\n        {similarListings.length > 0 && (\n          <div className=\"mt-12\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Similar Items You Might Like</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4\">\n                  {similarListings.map((similarListing) => (\n                    <Card key={similarListing.id} className=\"hover:shadow-lg transition-shadow cursor-pointer touch-target\">\n                      <CardContent className=\"p-3 sm:p-4\">\n                        <div className=\"relative\">\n                          {(similarListing as any).media && (similarListing as any).media.length > 0 ? (\n                            <img\n                              src={(similarListing as any).media[0].url}\n                              alt={(similarListing as any).title}\n                              className=\"w-full h-24 sm:h-28 md:h-32 object-cover rounded-lg\"\n                            />\n                          ) : (\n                            <div className=\"w-full h-24 sm:h-28 md:h-32 bg-gray-200 rounded-lg flex items-center justify-center\">\n                              <div className=\"text-gray-400 text-2xl sm:text-3xl mb-1 sm:mb-2\">üì∑</div>\n                              <p className=\"text-gray-500 text-xs sm:text-sm\">No media available</p>\n                            </div>\n                          )}\n                        </div>\n                        <div className=\"mt-2 sm:mt-3\">\n                          <h4 className=\"text-sm sm:text-base lg:text-lg font-semibold text-gray-900 mb-1 line-clamp-1\">\n                            {similarListing.title}\n                          </h4>\n                          <div className=\"text-base sm:text-lg lg:text-xl font-bold text-red-600 mb-1 sm:mb-2\">\n                            {similarListing.currency} {similarListing.price?.toLocaleString()}\n                          </div>\n                          <div className=\"text-xs sm:text-sm text-gray-600 capitalize\">\n                            {similarListing.transaction_type} ‚Ä¢ {similarListing.price_type}\n                          </div>\n                          <div className=\"flex items-center text-xs sm:text-sm text-gray-500 mt-1\">\n                            <MapPin className=\"h-3 w-3 sm:h-4 sm:w-4 mr-1\" />\n                            {(() => {\n                              const similarLocation = similarListing.location as any\n                              console.log('üìç Similar listing location:', similarLocation)\n                              \n                              if (!similarLocation) return 'Location not specified'\n                              \n                              if (typeof similarLocation === 'string') {\n                                return similarLocation\n                              }\n                              \n                              if (typeof similarLocation === 'object' && similarLocation !== null) {\n                                return similarLocation.district || \n                                       similarLocation.sector || \n                                       similarLocation.province || \n                                       'Location not specified'\n                              }\n                              \n                              return 'Location not specified'\n                            })()}\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  const primaryImage = media.find((m) => m.is_primary) || media[0]\n  const price = listing.price?.toLocaleString() || '0'\n  const location = listing.location as {\n    province?: string\n    district?: string\n    sector?: string\n    cell?: string\n    village?: string\n    address?: string\n  }\n\n  // Helper function to safely extract location string\n  const getLocationString = (locationField: any) => {\n    if (typeof locationField === 'string') return locationField\n    if (typeof locationField === 'object' && locationField !== null) {\n      return Object.values(locationField).filter(Boolean).join(', ')\n    }\n    return ''\n  }\n\n  // Helper function to mask phone numbers\n  const maskPhoneNumber = (phoneNumber: string) => {\n    if (!phoneNumber || phoneNumber.length < 4) return phoneNumber\n    return phoneNumber.slice(0, 3) + '*'.repeat(phoneNumber.length - 4) + phoneNumber.slice(-2)\n  }\n  const visitPaymentInfo = (listing.visit_fee_payment_methods || {}) as {\n    mtn_momo?: { phone_number?: string }\n    airtel_money?: { phone_number?: string }\n    equity_bank?: { account_name?: string; account_number?: string }\n    crypto?: { wallet_address?: string }\n  }\n\n  const loadPaymentMethods = async () => {\n    try {\n      const response = await fetch('/api/payments/methods')\n      const data = await response.json()\n      if (response.ok && data?.methods) {\n        const methods = data.methods.filter((m: any) => m.isActive).map((m: any) => m.id) as PaymentMethod[]\n        setAvailableMethods(methods)\n        if (methods.length > 0) {\n          setVisitMethod(methods[0])\n        }\n      }\n    } catch (err) {\n      console.error('Error loading payment methods:', err)\n    }\n  }\n\n  const submitVisitRequest = async () => {\n    setVisitSubmitting(true)\n    setVisitError('')\n    setVisitSuccess('')\n    \n    try {\n      const { supabaseClient } = await import('@/lib/supabase-client')\n      const { data: { session } } = await supabaseClient.auth.getSession()\n      if (!session?.access_token) {\n        setVisitError('Please login to request a visit')\n        return\n      }\n\n      // Prepare request body with admin-configured payment details\n      const requestBody: any = {\n        listing_id: listing.id,\n        payment_method: visitMethod,\n        visit_fee: visitFeeAmount\n      }\n\n      // Add method-specific details from admin settings\n      if (visitMethod === 'mtn_momo') {\n        requestBody.phone_number = paymentSettings?.mobile_money_details?.mtn?.phone_number || ''\n        requestBody.account_name = paymentSettings?.mobile_money_details?.mtn?.account_name || ''\n        requestBody.merchant_id = paymentSettings?.mobile_money_details?.mtn?.merchant_id || ''\n      } else if (visitMethod === 'airtel_money') {\n        requestBody.phone_number = paymentSettings?.mobile_money_details?.airtel?.phone_number || ''\n        requestBody.account_name = paymentSettings?.mobile_money_details?.airtel?.account_name || ''\n        requestBody.merchant_id = paymentSettings?.mobile_money_details?.airtel?.merchant_id || ''\n      } else if (visitMethod === 'equity_bank') {\n        requestBody.bank_name = paymentSettings?.bank_details?.bank_name || ''\n        requestBody.account_name = paymentSettings?.bank_details?.account_name || ''\n        requestBody.account_number = paymentSettings?.bank_details?.account_number || ''\n        requestBody.branch_code = paymentSettings?.bank_details?.branch_code || ''\n      } else if (visitMethod === 'crypto') {\n        requestBody.crypto_type = 'bitcoin' // Default crypto type\n        requestBody.wallet_address = '' // Will be configured by admin\n      }\n\n      // Add payment screenshot if uploaded\n      if (paymentScreenshot) {\n        const formData = new FormData()\n        formData.append('screenshot', paymentScreenshot)\n        requestBody.screenshot = formData\n      }\n\n      // Add payment proof if uploaded\n      if (paymentProof) {\n        const formData = new FormData()\n        formData.append('proof', paymentProof)\n        requestBody.proof = formData\n      }\n\n      const response = await fetch('/api/visits', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`\n        },\n        body: JSON.stringify(requestBody)\n      })\n\n      const result = await response.json()\n      if (!response.ok) {\n        setVisitError(result.error || 'Failed to request visit')\n        return\n      }\n\n      // Move to proof upload step after successful request\n      setPaymentStep('proof')\n      setVisitSuccess('Thank you for your payment. Please allow 10-20 minutes for payment confirmation. Once verified, you will receive a call to schedule your visit dates and provide you with the details of the assigned agent who will conduct the property tour.')\n      setShowVisitModal(false) // Close the modal after successful submission\n      \n    } catch (err: any) {\n      setVisitError(err.message || 'Failed to request visit')\n    } finally {\n      setVisitSubmitting(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-5xl mx-auto px-3 sm:px-4 lg:px-6 lg:px-8 py-4 sm:py-8\">\n        <Button variant=\"outline\" onClick={() => router.back()} className=\"touch-target\">\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          Back\n        </Button>\n\n        <div className=\"mt-4 sm:mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8\">\n          <div className=\"lg:col-span-2 space-y-4 sm:space-y-6\">\n            <Card>\n              <CardContent className=\"p-0\">\n                {/* Image Gallery */}\n                <div className=\"relative\">\n                  {media.length > 0 ? (\n                    <div className=\"space-y-4\">\n                      {/* Main Image Display with Navigation */}\n                      <div className=\"relative group\">\n                        {media[selectedImageIndex]?.media_type === 'video' ? (\n                          <div className=\"relative aspect-video bg-gray-100 rounded-lg overflow-hidden\">\n                            <video\n                              src={media[selectedImageIndex].url}\n                              className=\"w-full h-48 sm:h-64 md:h-80 lg:h-96 object-cover\"\n                              controls\n                              autoPlay={false}\n                            />\n                            <div className=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 opacity-0 group-hover:opacity-100 transition-opacity\">\n                              <div className=\"w-12 h-12 sm:w-14 sm:h-14 lg:w-16 lg:h-16 bg-white bg-opacity-90 rounded-full flex items-center justify-center\">\n                                <svg className=\"w-6 h-6 sm:w-7 sm:h-7 lg:w-8 lg:h-8 text-gray-800\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                  <path d=\"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z\" />\n                                </svg>\n                              </div>\n                            </div>\n                          </div>\n                        ) : (\n                          <img\n                            src={media[selectedImageIndex]?.url}\n                            alt={listing.title}\n                            className=\"w-full h-48 sm:h-64 md:h-80 lg:h-96 object-cover rounded-lg\"\n                          />\n                        )}\n                        \n                        {/* Navigation Arrows */}\n                        {media.length > 1 && (\n                          <>\n                            {/* Left Arrow */}\n                            <button\n                              onClick={() => setSelectedImageIndex((prev) => prev === 0 ? media.length - 1 : prev - 1)}\n                              className=\"absolute left-2 sm:left-4 top-1/2 transform -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 bg-white bg-opacity-90 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg touch-target\"\n                              aria-label=\"Previous image\"\n                            >\n                              <svg className=\"w-4 h-4 sm:w-5 sm:h-5 text-gray-800\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                              </svg>\n                            </button>\n                            \n                            {/* Right Arrow */}\n                            <button\n                              onClick={() => setSelectedImageIndex((prev) => (prev + 1) % media.length)}\n                              className=\"absolute right-2 sm:right-4 top-1/2 transform -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 bg-white bg-opacity-90 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg touch-target\"\n                              aria-label=\"Next image\"\n                            >\n                              <svg className=\"w-4 h-4 sm:w-5 sm:h-5 text-gray-800\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                              </svg>\n                            </button>\n                          </>\n                        )}\n                        \n                        {/* Primary Badge */}\n                        {media[selectedImageIndex]?.is_primary && (\n                          <Badge className=\"absolute top-2 sm:top-4 left-2 sm:left-4 bg-red-600 text-white text-xs\">\n                            Primary\n                          </Badge>\n                        )}\n                        \n                        {/* Media Type Badge */}\n                        {media[selectedImageIndex]?.media_type === 'video' && (\n                          <Badge className=\"absolute top-2 sm:top-4 right-2 sm:right-4 bg-blue-600 text-white text-xs\">\n                            Video\n                          </Badge>\n                        )}\n                      </div>\n\n                      {/* Thumbnail Gallery */}\n                      {media.length > 1 && (\n                        <>\n                          <div className=\"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-1.5 sm:gap-2 mt-3 sm:mt-4\">\n                            {media.map((item, index) => (\n                              <div\n                                key={item.id}\n                                className={`relative group cursor-pointer ${\n                                  selectedImageIndex === index ? 'ring-2 ring-blue-500 rounded-lg' : ''\n                                }`}\n                                onClick={() => setSelectedImageIndex(index)}\n                              >\n                                {item.media_type === 'video' ? (\n                                  <div className=\"relative aspect-video bg-gray-100 rounded-lg overflow-hidden\">\n                                    <video\n                                      src={item.url}\n                                      className=\"w-full h-full object-cover\"\n                                      muted\n                                      onMouseEnter={(e) => {\n                                        const video = e.target as HTMLVideoElement\n                                        if (video) video.play()\n                                      }}\n                                      onMouseLeave={(e) => {\n                                        const video = e.target as HTMLVideoElement\n                                        if (video) video.pause()\n                                      }}\n                                    />\n                                    <div className=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50\">\n                                      <svg className=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                        <path d=\"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z\" />\n                                      </svg>\n                                    </div>\n                                  </div>\n                                ) : (\n                                  <img\n                                    src={item.url}\n                                    alt={`${listing.title} - ${index + 1}`}\n                                    className=\"w-full h-14 sm:h-16 md:h-20 object-cover rounded-lg\"\n                                  />\n                                )}\n                                {item.is_primary && (\n                                  <div className=\"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full\"></div>\n                                )}\n                              </div>\n                            ))}\n                          </div>\n                          \n                          {/* Dot Indicators */}\n                          <div className=\"flex justify-center space-x-1.5 sm:space-x-2 mt-3 sm:mt-4\">\n                            {media.map((_, index) => (\n                              <button\n                                key={index}\n                                onClick={() => setSelectedImageIndex(index)}\n                                className={`w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-colors touch-target ${\n                                  selectedImageIndex === index\n                                    ? 'bg-blue-600'\n                                    : 'bg-gray-300 hover:bg-gray-400'\n                                }`}\n                                aria-label={`Go to image ${index + 1}`}\n                              />\n                            ))}\n                          </div>\n                        </>\n                      )}\n                    </div>\n                  ) : (\n                    <div className=\"w-full h-48 sm:h-64 md:h-80 lg:h-96 bg-gray-200 rounded-lg flex items-center justify-center\">\n                      <div className=\"text-center\">\n                        <div className=\"text-gray-400 text-4xl sm:text-5xl md:text-6xl mb-2\">üì∑</div>\n                        <p className=\"text-gray-500 text-xs sm:text-sm\">No media available</p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Description</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-gray-700 whitespace-pre-line\">{listing.description}</p>\n              </CardContent>\n            </Card>\n          </div>\n\n          <div className=\"space-y-4 sm:space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>{listing.title}</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"text-2xl font-bold text-red-600\">\n                  {listing.currency} {price}\n                </div>\n                <div className=\"text-sm text-gray-600 capitalize\">\n                  {listing.transaction_type} ‚Ä¢ {listing.price_type}\n                </div>\n                <div className=\"flex items-start text-sm text-gray-700\">\n                  <MapPin className=\"h-4 w-4 mr-2 mt-0.5 text-gray-500\" />\n                  <div>\n                    {[\n                      getLocationString(location?.address),\n                      getLocationString(location?.sector),\n                      getLocationString(location?.district),\n                      getLocationString(location?.province)\n                    ]\n                      .filter(Boolean)\n                      .join(', ') || 'Location not provided'}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>For any questions, ideas, or inquiries, reach out to us on this number</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center\">\n                    <User className=\"h-5 w-5 text-gray-500\" />\n                  </div>\n                  <div>\n                    <div className=\"text-sm font-medium text-gray-900\">\n                      {listing.seller?.full_name || 'Unknown Seller'}\n                    </div>\n                  </div>\n                </div>\n                \n                <AdminContactInfo />\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Visit Fee</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"text-sm text-gray-700\">\n                  Visit fee: <strong>{listing.visit_fee_amount?.toLocaleString() || visitFeeAmount.toLocaleString()} RWF</strong>\n                </div>\n                <div className=\"text-xs text-gray-600\">\n                  Seller receives 70%. Platform keeps 30%.\n                </div>\n\n                <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-3 text-xs text-gray-700 space-y-1\">\n                  {visitPaymentInfo.mtn_momo?.phone_number && (\n                    <div>MTN MoMo: {maskPhoneNumber(visitPaymentInfo.mtn_momo.phone_number)}</div>\n                  )}\n                  {visitPaymentInfo.airtel_money?.phone_number && (\n                    <div>Airtel Money: {maskPhoneNumber(visitPaymentInfo.airtel_money.phone_number)}</div>\n                  )}\n                  {visitPaymentInfo.equity_bank?.account_number && (\n                    <div>\n                      Equity: {visitPaymentInfo.equity_bank.account_name || 'Account'} ‚Ä¢ {visitPaymentInfo.equity_bank.account_number}\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"flex flex-col space-y-3\">\n                  <InquiryButton \n                    listingId={listing.id} \n                    sellerId={listing.seller_id || ''} \n                    title={listing.title}\n                    className=\"w-full\"\n                  />\n                  <div className=\"flex space-x-3\">\n                    <Button\n                      onClick={() => {\n                        loadPaymentMethods()\n                        setShowVisitModal(true)\n                      }}\n                      className=\"flex-1 bg-red-600 hover:bg-red-700\"\n                    >\n                      Request a Visit\n                    </Button>\n                    <FavoriteButton \n                      listingId={listing.id} \n                      size=\"md\"\n                      className=\"flex-shrink-0\"\n                    />\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n\n      {showVisitModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-3 sm:p-4 z-50\">\n          <Card className=\"w-full max-w-md\">\n            <CardContent className=\"p-4 sm:p-6 space-y-3 sm:space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-base sm:text-lg font-semibold\">Request a Visit</h3>\n                <button\n                  onClick={() => setShowVisitModal(false)}\n                  className=\"text-gray-400 hover:text-gray-600 touch-target p-1\"\n                  aria-label=\"Close modal\"\n                >\n                  √ó\n                </button>\n              </div>\n\n              <div className=\"text-sm text-gray-700\">\n                Visit fee: <strong>{visitFeeAmount.toLocaleString()} RWF</strong>\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                Seller receives 70%. Platform keeps 30%.\n              </div>\n              \n              {/* Payment proof upload */}\n              <div className=\"space-y-3\">\n                <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-3 text-sm text-gray-700\">\n                  <h4 className=\"font-medium mb-2\">Upload payment proof</h4>\n                  <input\n                      id=\"payment-proof-upload\"\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={(e: any) => setPaymentProof(e.target.files?.[0] || null)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                      aria-label=\"Upload payment confirmation\"\n                      title=\"Upload screenshot or photo of payment confirmation\"\n                    />\n                    {paymentProof && (\n                      <div className=\"mt-2 text-xs text-gray-500\">\n                        Proof: {paymentProof.name}\n                        <button\n                          type=\"button\"\n                          onClick={() => setPaymentProof(null)}\n                          className=\"ml-2 text-red-500 hover:text-red-700\"\n                        >\n                          Remove\n                        </button>\n                      </div>\n                    )}\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <label htmlFor=\"payment-method\" className=\"block text-sm font-medium text-gray-700\">Payment Method</label>\n                <select\n                  id=\"payment-method\"\n                  value={visitMethod}\n                  onChange={(e: React.ChangeEvent<HTMLSelectElement>) => setVisitMethod(e.target.value as PaymentMethod)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                  title=\"Payment Method Selection\"\n                >\n                  {availableMethods.map((method) => {\n                    const methodNames: Record<PaymentMethod, string> = {\n                      mtn_momo: 'MTN Mobile Money',\n                      airtel_money: 'Airtel Money',\n                      equity_bank: 'Equity Bank',\n                      crypto: 'Cryptocurrency',\n                      wallet: 'Wallet Balance'\n                    }\n                    return (\n                      <option key={method} value={method}>\n                        {methodNames[method] || method}\n                      </option>\n                    )\n                  })}\n                </select>\n\n                {(visitMethod === 'mtn_momo' || visitMethod === 'airtel_money') && (\n                  <div className=\"space-y-3\">\n                    <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                      <h4 className=\"font-medium text-gray-900 mb-3\">\n                        {visitMethod === 'mtn_momo' ? 'MTN Mobile Money' : 'Airtel Money'} Payment Details\n                      </h4>\n                      <p className=\"text-xs text-gray-600 mb-3\">Send payment to the number below:</p>\n                      \n                      <div className=\"space-y-2\">\n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"text-sm text-gray-600\">Phone Number:</span>\n                          <span className=\"text-sm font-medium text-gray-900\">\n                            {visitMethod === 'mtn_momo' \n                              ? paymentSettings?.mobile_money_details?.mtn?.phone_number || 'Not configured'\n                              : paymentSettings?.mobile_money_details?.airtel?.phone_number || 'Not configured'\n                            }\n                          </span>\n                        </div>\n                        \n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"text-sm text-gray-600\">Account Name:</span>\n                          <span className=\"text-sm font-medium text-gray-900\">\n                            {visitMethod === 'mtn_momo' \n                              ? paymentSettings?.mobile_money_details?.mtn?.account_name || 'Not configured'\n                              : paymentSettings?.mobile_money_details?.airtel?.account_name || 'Not configured'\n                            }\n                          </span>\n                        </div>\n                        \n                        {(visitMethod === 'mtn_momo' \n                          ? paymentSettings?.mobile_money_details?.mtn?.merchant_id\n                          : paymentSettings?.mobile_money_details?.airtel?.merchant_id) && (\n                          <div className=\"flex justify-between items-center\">\n                            <span className=\"text-sm text-gray-600\">Merchant ID:</span>\n                            <span className=\"text-sm font-medium text-gray-900\">\n                              {visitMethod === 'mtn_momo' \n                                ? paymentSettings?.mobile_money_details?.mtn?.merchant_id\n                                : paymentSettings?.mobile_money_details?.airtel?.merchant_id\n                              }\n                            </span>\n                          </div>\n                        )}\n                      </div>\n                      \n                      {(visitMethod === 'mtn_momo' \n                        ? paymentSettings?.mobile_money_details?.mtn?.payment_instructions\n                        : paymentSettings?.mobile_money_details?.airtel?.payment_instructions) && (\n                        <div className=\"mt-3 p-3 bg-blue-50 border border-blue-200 rounded\">\n                          <p className=\"text-sm font-medium text-blue-800 mb-1\">Payment Instructions:</p>\n                          <p className=\"text-sm text-blue-700\">\n                            {visitMethod === 'mtn_momo' \n                              ? paymentSettings?.mobile_money_details?.mtn?.payment_instructions\n                              : paymentSettings?.mobile_money_details?.airtel?.payment_instructions\n                            }\n                          </p>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n                \n                {visitMethod === 'equity_bank' && (\n                  <div className=\"space-y-3\">\n                    <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                      <h4 className=\"font-medium text-gray-900 mb-3\">Bank Transfer Details</h4>\n                      <p className=\"text-xs text-gray-600 mb-3\">Send payment to the account below:</p>\n                      \n                      <div className=\"space-y-2\">\n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"text-sm text-gray-600\">Bank Name:</span>\n                          <span className=\"text-sm font-medium text-gray-900\">\n                            {paymentSettings?.bank_details?.bank_name || 'Not configured'}\n                          </span>\n                        </div>\n                        \n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"text-sm text-gray-600\">Account Name:</span>\n                          <span className=\"text-sm font-medium text-gray-900\">\n                            {paymentSettings?.bank_details?.account_name || 'Not configured'}\n                          </span>\n                        </div>\n                        \n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"text-sm text-gray-600\">Account Number:</span>\n                          <span className=\"text-sm font-medium text-gray-900\">\n                            {paymentSettings?.bank_details?.account_number || 'Not configured'}\n                          </span>\n                        </div>\n                        \n                        {paymentSettings?.bank_details?.branch_code && (\n                          <div className=\"flex justify-between items-center\">\n                            <span className=\"text-sm text-gray-600\">Branch Code:</span>\n                            <span className=\"text-sm font-medium text-gray-900\">\n                              {paymentSettings?.bank_details?.branch_code}\n                            </span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                {visitMethod === 'crypto' && (\n                  <div className=\"space-y-3\">\n                    <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                      <h4 className=\"font-medium text-gray-900 mb-3\">Cryptocurrency Payment</h4>\n                      <p className=\"text-sm text-gray-600\">\n                        Cryptocurrency payment details will be displayed here once configured by administrator.\n                      </p>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"flex space-x-3\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setShowVisitModal(false)}\n                  className=\"flex-1\"\n                  aria-label=\"Cancel visit request\"\n                >\n                  Cancel\n                </Button>\n                <Button\n                  onClick={submitVisitRequest}\n                  disabled={visitSubmitting}\n                  className=\"flex-1 bg-red-600 hover:bg-red-700\"\n                  aria-label=\"Submit visit request\"\n                >\n                  {visitSubmitting ? 'Submitting...' : 'Pay Visit Fee'}\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n    </div>\n  )\n}\n","'use client'\n\nimport { useState } from 'react'\nimport { MessageSquare, AlertCircle, CheckCircle, Clock } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent } from '@/components/ui/card'\nimport { getCurrentUser } from '@/lib/auth'\n\ninterface InquiryButtonProps {\n  listingId: string\n  sellerId: string\n  title: string\n  className?: string\n}\n\nexport default function InquiryButton({ \n  listingId, \n  sellerId, \n  title, \n  className = '' \n}: InquiryButtonProps) {\n  const [showModal, setShowModal] = useState(false)\n  const [message, setMessage] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const [success, setSuccess] = useState(false)\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n    setError('')\n\n    try {\n      const user = await getCurrentUser()\n      if (!user) {\n        window.location.href = '/auth/login'\n        return\n      }\n\n      // Get session token for authorization\n      const { supabaseClient } = await import('@/lib/supabase-client')\n      const { data: { session } } = await supabaseClient.auth.getSession()\n      \n      if (!session?.access_token) {\n        window.location.href = '/auth/login'\n        return\n      }\n\n      const response = await fetch('/api/inquiries', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`\n        },\n        body: JSON.stringify({\n          listing_id: listingId,\n          message: message.trim()\n        })\n      })\n\n      const result = await response.json()\n\n      if (!response.ok) {\n        throw new Error(result.error || 'Failed to submit inquiry')\n      }\n\n      setSuccess(true)\n      setMessage('')\n      setTimeout(() => {\n        setShowModal(false)\n        setSuccess(false)\n      }, 3000)\n    } catch (err: any) {\n      setError(err.message || 'Failed to submit inquiry')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (showModal) {\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n        <Card className=\"w-full max-w-md\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">\n                Express Interest\n              </h3>\n              <button\n                onClick={() => setShowModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                √ó\n              </button>\n            </div>\n\n            <div className=\"mb-4\">\n              <p className=\"text-sm text-gray-600 mb-2\">\n                Listing: <strong>{title}</strong>\n              </p>\n            </div>\n\n            {success ? (\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 text-center\">\n                <CheckCircle className=\"h-8 w-8 text-green-600 mx-auto mb-2\" />\n                <h4 className=\"font-semibold text-green-800 mb-1\">Inquiry Submitted!</h4>\n                <p className=\"text-sm text-green-700\">\n                  Your inquiry has been sent for admin review. You'll be notified once it's approved.\n                </p>\n              </div>\n            ) : (\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                {error && (\n                  <div className=\"bg-red-50 border border-red-200 rounded-lg p-3 flex items-center\">\n                    <AlertCircle className=\"h-4 w-4 text-red-600 mr-2\" />\n                    <span className=\"text-red-800 text-sm\">{error}</span>\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Your Message *\n                  </label>\n                  <textarea\n                    value={message}\n                    onChange={(e) => setMessage(e.target.value)}\n                    placeholder=\"Introduce yourself and express your interest in this listing...\"\n                    rows={4}\n                    required\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500\"\n                  />\n                </div>\n\n                <div className=\"flex space-x-3\">\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => setShowModal(false)}\n                    className=\"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50\"\n                  >\n                    Cancel\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    disabled={loading || !message.trim()}\n                    className=\"flex-1 bg-red-600 hover:bg-red-700\"\n                  >\n                    {loading ? 'Submitting...' : 'Submit Inquiry'}\n                  </Button>\n                </div>\n              </form>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  return (\n    <Button\n      onClick={() => setShowModal(true)}\n      className={`bg-red-600 hover:bg-red-700 ${className}`}\n    >\n      <MessageSquare className=\"h-4 w-4 mr-2\" />\n      Express Interest\n    </Button>\n  )\n}\n"],"names":[],"mappings":"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"}