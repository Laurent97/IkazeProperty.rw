module.exports=[77156,a=>{"use strict";let b=(0,a.i(70106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},96638,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(76472),f=a.i(81010),g=a.i(48464),h=a.i(79161),i=a.i(83497),j=a.i(77156),k=a.i(87532),l=a.i(24987),m=a.i(81560),n=a.i(99570),o=a.i(91119),p=a.i(63672);function q(){let[a,q]=(0,c.useState)(null),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{let a=await (0,p.getCurrentUser)();if(!a){console.log("No user authenticated, skipping favorites fetch"),s([]),u(!1);return}q(a);let b=await fetch("/api/favorites");if(b.ok){let a=await b.json();s(a.favorites||[])}else console.error("Error fetching favorites:",b.statusText),s([])}catch(a){console.error("Error fetching favorites:",a),s([])}finally{u(!1)}})()},[]);let x=async a=>{try{let b=await fetch(`/api/favorites?listingId=${a}`,{method:"DELETE"});b.ok?s(r.filter(b=>b.id!==a)):console.error("Error removing favorite:",b.statusText)}catch(a){console.error("Error removing favorite:",a)}},y=r.filter(a=>a.title.toLowerCase().includes(v.toLowerCase()));return t?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading your favorites..."})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Favorites"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Properties and items you've saved for later"})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:[y.length," items saved"]})]})})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)(o.Card,{className:"mb-6",children:(0,b.jsx)(o.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(k.Search,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search favorites...",value:v,onChange:a=>w(a.target.value),className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]})})}),0===y.length?(0,b.jsx)(o.Card,{children:(0,b.jsxs)(o.CardContent,{className:"p-16 text-center",children:[(0,b.jsx)(e.Heart,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:v?"No matching favorites":"No favorites yet"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:v?"Try adjusting your search terms":"Start browsing and save properties you're interested in"}),!v&&(0,b.jsx)(d.default,{href:"/listings",children:(0,b.jsx)(n.Button,{className:"bg-red-600 hover:bg-red-700",children:"Browse Listings"})})]})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(a=>{let c;return(0,b.jsxs)(o.Card,{className:"hover:shadow-lg transition-shadow group",children:[(0,b.jsxs)("div",{className:"relative",children:[(c=(a.listing_media?[...a.listing_media].sort((a,b)=>a.is_primary&&!b.is_primary?-1:!a.is_primary&&b.is_primary?1:a.order_index-b.order_index):[])[0])?(0,b.jsxs)("div",{className:"relative",children:["video"===c.media_type?(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("video",{src:c.url,className:"w-full h-48 object-cover rounded-t-lg",muted:!0,playsInline:!0}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30",children:(0,b.jsx)("div",{className:"w-10 h-10 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-gray-800 ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):(0,b.jsx)("img",{src:c.url,alt:a.title,className:"w-full h-48 object-cover rounded-t-lg",onError:b=>{b.target.src=`https://via.placeholder.com/400x300/cccccc/969696?text=${a.category}+Image`}}),c.is_primary&&(0,b.jsx)("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-2 py-1 rounded text-xs font-semibold",children:"Primary"}),a.featured&&(0,b.jsx)("div",{className:"absolute top-2 right-2 bg-red-600 text-white px-2 py-1 rounded text-xs font-semibold",children:"FEATURED"}),(0,b.jsx)("span",{className:`absolute bottom-2 right-2 px-2 py-1 text-xs rounded-full ${(a=>{switch(a){case"available":return"bg-green-100 text-green-800";case"sold":return"bg-red-100 text-red-800";case"rented":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(a.status)}`,children:a.status})]}):(0,b.jsx)("div",{className:"w-full h-48 bg-gray-200 rounded-t-lg flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-gray-400 text-3xl mb-2",children:"ðŸ“·"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"No media available"})]})}),(0,b.jsx)("button",{onClick:()=>x(a.id),className:"absolute top-2 right-2 bg-white/90 backdrop-blur-sm rounded-full p-2 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-50",title:"Remove from favorites",children:(0,b.jsx)(e.Heart,{className:"h-4 w-4 text-red-600 fill-current"})})]}),(0,b.jsxs)(o.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("div",{className:"w-6 h-6 bg-red-100 rounded flex items-center justify-center",children:(a=>{switch(a){case"houses":return(0,b.jsx)(f.Home,{className:"h-4 w-4"});case"cars":return(0,b.jsx)(g.Car,{className:"h-4 w-4"});case"land":return(0,b.jsx)(h.Trees,{className:"h-4 w-4"});default:return(0,b.jsx)(i.Package,{className:"h-4 w-4"})}})(a.category)}),(0,b.jsx)("span",{className:"text-xs text-gray-500 capitalize",children:a.category})]}),(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:a.title}),(0,b.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,b.jsxs)("span",{className:"text-2xl font-bold text-red-600",children:["RWF ",a.price.toLocaleString()]})}),a.location&&(0,b.jsxs)("p",{className:"text-gray-600 text-sm mb-3 flex items-center",children:[(0,b.jsx)(l.MapPin,{className:"h-4 w-4 mr-1"}),"string"==typeof a.location?a.location:"Location not specified"]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsxs)("span",{className:"flex items-center",children:[(0,b.jsx)(j.Eye,{className:"h-4 w-4 mr-1"}),a.views||0]}),(0,b.jsxs)("span",{className:"flex items-center",children:[(0,b.jsx)(e.Heart,{className:"h-4 w-4 mr-1"}),a.likes||0]})]}),(0,b.jsx)("span",{className:"text-xs",children:new Date(a.created_at).toLocaleDateString()})]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(d.default,{href:`/listings/${a.category}/${a.id}`,className:"flex-1",children:(0,b.jsxs)(n.Button,{size:"sm",className:"w-full bg-red-600 hover:bg-red-700",children:[(0,b.jsx)(j.Eye,{className:"h-4 w-4 mr-1"}),"View Details"]})}),(0,b.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>x(a.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Remove from favorites",children:(0,b.jsx)(m.Trash2,{className:"h-4 w-4"})})]})]})]},a.id)})})]})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=_5cf5aeea._.js.map