module.exports=[24669,a=>{"use strict";let b=(0,a.i(70106).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],24669)},63588,a=>{"use strict";let b=(0,a.i(70106).default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);a.s(["MessageSquare",()=>b],63588)},3314,a=>{"use strict";let b=(0,a.i(70106).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],3314)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},8586,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(81010),g=a.i(46842),h=a.i(70106);let i=(0,h.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var j=a.i(72692),k=a.i(33508),l=a.i(63588),m=a.i(76472),n=a.i(15618),o=a.i(24669),p=a.i(3314);let q=(0,h.default)("megaphone",[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]]);var r=a.i(99570),s=a.i(63672),t=a.i(11642);function u({children:a}){let[h,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),z=(0,e.usePathname)(),{setUser:A}=(0,t.useAuth)();(0,c.useEffect)(()=>{B()},[]);let B=async()=>{try{let a=await (0,s.getCurrentUser)();if(!a){console.log("No user authenticated, redirecting to login"),window.location.href="/auth/login";return}u(a);try{let b=await (0,s.getUserProfile)(a.id);w(b)}catch(b){console.log("User profile not found, using default values"),w({id:a.id,email:a.email,full_name:a.user_metadata?.full_name||"User",role:"user"})}}catch(a){console.error("Error fetching user data:",a),window.location.href="/auth/login"}},C=async()=>{try{await (0,s.signOut)(),A(null),window.location.href="/"}catch(a){console.error("Error signing out:",a)}},D=v?.role==="admin",E=[{name:"Dashboard",href:D?"/dashboard/admin":"/dashboard/user",icon:f.Home,current:z===(D?"/dashboard/admin":"/dashboard/user")}];return D?E.push({name:"Users",href:"/dashboard/admin/users",icon:g.User,current:"/dashboard/admin/users"===z},{name:"Listings",href:"/dashboard/admin/listings",icon:f.Home,current:"/dashboard/admin/listings"===z},{name:"Ads",href:"/dashboard/admin/ads",icon:q,current:"/dashboard/admin/ads"===z||"/admin/ads"===z},{name:"Inquiries",href:"/dashboard/admin/inquiries",icon:l.MessageSquare,current:"/dashboard/admin/inquiries"===z},{name:"Transactions",href:"/dashboard/admin/transactions",icon:o.TrendingUp,current:"/dashboard/admin/transactions"===z}):E.push({name:"My Listings",href:"/dashboard/my-listings",icon:f.Home,current:"/dashboard/my-listings"===z},{name:"My Inquiries",href:"/dashboard/my-inquiries",icon:l.MessageSquare,current:"/dashboard/my-inquiries"===z},{name:"Favorites",href:"/dashboard/favorites",icon:m.Heart,current:"/dashboard/favorites"===z},{name:"Transactions",href:"/dashboard/transactions",icon:o.TrendingUp,current:"/dashboard/transactions"===z}),(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[x&&(0,b.jsx)("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>y(!1)}),(0,b.jsxs)("div",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0
        ${x?"translate-x-0":"-translate-x-full"}
      `,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[(0,b.jsxs)(d.default,{href:"/",className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white font-bold text-lg",children:"I"})}),(0,b.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"IkazeProperty"})]}),(0,b.jsx)("button",{onClick:()=>y(!1),className:"lg:hidden text-gray-400 hover:text-gray-600","aria-label":"Close sidebar",children:(0,b.jsx)(k.X,{className:"h-6 w-6"})})]}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col overflow-y-auto",children:[(0,b.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(g.User,{className:"h-5 w-5 text-red-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:v?.full_name||"User"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:v?.email||h?.email}),(0,b.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${D?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:D?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Shield,{className:"h-3 w-3 mr-1"}),"Admin"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.User,{className:"h-3 w-3 mr-1"}),"User"]})})]})]})}),(0,b.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:E.map(a=>{let c=a.icon;return(0,b.jsxs)(d.default,{href:a.href,className:`
                    group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors
                    ${a.current?"bg-red-50 text-red-700 border-r-2 border-red-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}
                  `,children:[(0,b.jsx)(c,{className:"mr-3 h-5 w-5"}),a.name]},a.name)})}),(0,b.jsx)("div",{className:"px-4 py-6 border-t border-gray-200",children:D?(0,b.jsx)(d.default,{href:"/admin/ads",children:(0,b.jsxs)(r.Button,{className:"w-full bg-red-600 hover:bg-red-700 mb-2",children:[(0,b.jsx)(q,{className:"h-4 w-4 mr-2"}),"Manage Ads"]})}):(0,b.jsx)(d.default,{href:"/create-listing",children:(0,b.jsxs)(r.Button,{className:"w-full bg-red-600 hover:bg-red-700",children:[(0,b.jsx)(n.Plus,{className:"h-4 w-4 mr-2"}),"New Listing"]})})}),(0,b.jsx)("div",{className:"px-4 py-4",children:(0,b.jsxs)(r.Button,{onClick:C,variant:"outline",className:"w-full border-gray-300 text-gray-700 hover:bg-gray-50",children:[(0,b.jsx)(i,{className:"h-4 w-4 mr-2"}),"Sign Out"]})})]})]}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,b.jsx)("div",{className:"sticky top-0 z-10 bg-white shadow-sm border-b border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8",children:[(0,b.jsx)("button",{onClick:()=>y(!0),className:"lg:hidden text-gray-400 hover:text-gray-600","aria-label":"Open sidebar",children:(0,b.jsx)(j.Menu,{className:"h-6 w-6"})}),(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsx)(d.default,{href:"/",children:(0,b.jsxs)(r.Button,{variant:"outline",className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:[(0,b.jsx)(f.Home,{className:"h-4 w-4 mr-2"}),"Back to Site"]})})})]})}),(0,b.jsx)("main",{className:"flex-1 overflow-auto",children:a})]})]})}a.s(["default",()=>u],8586)}];

//# sourceMappingURL=_57bf4d5c._.js.map