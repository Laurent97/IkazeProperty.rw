{"version":3,"sources":["../../../../src/app/%5Blocale%5D/dashboard/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { getCurrentUser, getUserProfile } from '@/lib/auth'\n\nexport default function DashboardPage() {\n  const router = useRouter()\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const redirectUser = async () => {\n      try {\n        const currentUser = await getCurrentUser()\n        if (!currentUser) {\n          router.push('/auth/login')\n          return\n        }\n\n        try {\n          const profile = await getUserProfile(currentUser.id)\n          const isAdmin = (profile as any)?.role === 'admin'\n\n          // Redirect to appropriate dashboard based on user role\n          if (isAdmin) {\n            router.push('/dashboard/admin')\n          } else {\n            router.push('/dashboard/user')\n          }\n        } catch (profileError) {\n          // If profile doesn't exist or any error occurs, treat as regular user\n          router.push('/dashboard/user')\n        }\n      } catch (error) {\n        router.push('/auth/login')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    redirectUser()\n  }, [router])\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-red-600\"></div>\n      </div>\n    )\n  }\n\n  return null\n}\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAS,AAAT,IACT,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,UAmCvC,CAjCA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KA8BR,CA7BqB,UACnB,GAAI,CACF,IAAM,EAAc,MAAM,CAAA,EAAA,EAAA,cAAA,AAAc,IACxC,GAAI,CAAC,EAAa,YAChB,EAAO,IAAI,CAAC,eAId,GAAI,CACF,IAAM,EAAU,MAAM,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAY,EAAE,EAClC,GAAiB,OAAS,QAIzC,EAAO,IAAI,CAAC,oBAEZ,EAAO,IAAI,CAAC,kBAEhB,CAAE,MAAO,EAAc,CAErB,EAAO,IAAI,CAAC,kBACd,CACF,CAAE,MAAO,EAAO,CACd,EAAO,IAAI,CAAC,cACd,QAAU,CACR,GAAW,EACb,EACF,GAGF,EAAG,CAAC,EAAO,EAEP,GAEA,CAAA,EAAA,EAAA,CAFS,EAET,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oEAKd,IACT"}