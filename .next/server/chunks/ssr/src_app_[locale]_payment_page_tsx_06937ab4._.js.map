{"version":3,"sources":["../../../../src/app/%5Blocale%5D/payment/page.tsx","../../../../src/components/payment/payment-selection.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter, useSearchParams } from 'next/navigation'\nimport Link from 'next/link'\nimport { ArrowLeft, CheckCircle, AlertCircle } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport PaymentSelection from '@/components/payment/payment-selection'\nimport { getSupabaseClient as supabaseClient } from '@/lib/supabase-client'\nimport { useAuth } from '@/contexts/AuthContext'\nimport type { PromotionPackage } from '@/types/payment'\n\nconst PROMOTION_PACKAGES: Record<string, PromotionPackage> = {\n  featured: {\n    id: 'featured',\n    name: 'Featured Listing',\n    description: 'Top placement and featured badge for 30 days',\n    price: 5000,\n    duration_days: 30,\n    features: ['Top placement in search results', 'Featured badge', 'Increased visibility'],\n    is_active: true,\n    sort_order: 1,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString()\n  },\n  urgent: {\n    id: 'urgent',\n    name: 'Urgent Listing',\n    description: 'Urgent badge and higher ranking for 14 days',\n    price: 3000,\n    duration_days: 14,\n    features: ['Urgent badge', 'Higher ranking', 'Priority support'],\n    is_active: true,\n    sort_order: 2,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString()\n  },\n  video: {\n    id: 'video',\n    name: 'Video Showcase',\n    description: 'Video showcase for your listing for 7 days',\n    price: 4000,\n    duration_days: 7,\n    features: ['Video showcase', 'Enhanced gallery', 'Social media sharing'],\n    is_active: true,\n    sort_order: 3,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString()\n  },\n  social: {\n    id: 'social',\n    name: 'Social Media Promotion',\n    description: 'Social media promotion for 3 days',\n    price: 1000,\n    duration_days: 3,\n    features: ['Social media posts', 'Targeted advertising', 'Performance tracking'],\n    is_active: true,\n    sort_order: 4,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString()\n  }\n}\n\nexport default function PaymentPage() {\n  const router = useRouter()\n  const searchParams = useSearchParams()\n  const { user } = useAuth()\n  \n  const [listingId, setListingId] = useState<string>('')\n  const [promotionType, setPromotionType] = useState<string>('')\n  const [listingTitle, setListingTitle] = useState<string>('')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string>('')\n  const [paymentCompleted, setPaymentCompleted] = useState(false)\n\n  useEffect(() => {\n    const listing = searchParams.get('listing_id')\n    const promotion = searchParams.get('promotion')\n    \n    if (!listing || !promotion) {\n      router.push('/dashboard/my-listings')\n      return\n    }\n    \n    setListingId(listing)\n    setPromotionType(promotion)\n    \n    // Fetch listing details\n    fetchListingDetails(listing)\n  }, [searchParams, router])\n\n  const fetchListingDetails = async (id: string) => {\n    try {\n      const { data: { session } } = await supabaseClient().auth.getSession()\n      if (!session?.access_token) {\n        throw new Error('Not authenticated')\n      }\n\n      const response = await fetch(`/api/listings/${id}`, {\n        headers: {\n          'Authorization': `Bearer ${session.access_token}`\n        }\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch listing')\n      }\n\n      const result = await response.json()\n      if (result.success && result.data) {\n        setListingTitle(result.data.title)\n      }\n    } catch (error) {\n      console.error('Error fetching listing:', error)\n      setError('Failed to load listing details')\n    }\n  }\n\n  const handlePaymentComplete = async (result: any) => {\n    setLoading(true)\n    try {\n      // Create promotion record\n      const { data: { session } } = await supabaseClient().auth.getSession()\n      if (!session?.access_token) {\n        throw new Error('Not authenticated')\n      }\n\n      const promotionPackage = PROMOTION_PACKAGES[promotionType]\n      \n      const promoResponse = await fetch('/api/promotions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`,\n        },\n        body: JSON.stringify({\n          listing_id: listingId,\n          promotion_type: promotionType,\n          price: promotionPackage.price,\n          duration_days: promotionPackage.duration_days,\n          payment_transaction_id: result.transaction?.id\n        })\n      })\n\n      const promoResult = await promoResponse.json()\n      \n      if (promoResult.success) {\n        setPaymentCompleted(true)\n        // Redirect to my listings after a delay\n        setTimeout(() => {\n          router.push('/dashboard/my-listings?promotion_success=true')\n        }, 3000)\n      } else {\n        throw new Error(promoResult.error || 'Failed to create promotion')\n      }\n    } catch (error: any) {\n      console.error('Error creating promotion:', error)\n      setError(error.message || 'Failed to create promotion after payment')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handlePaymentError = (errorMessage: string) => {\n    setError(errorMessage)\n  }\n\n  const promotionPackage = PROMOTION_PACKAGES[promotionType]\n\n  if (!listingId || !promotionType || !promotionPackage) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <AlertCircle className=\"h-12 w-12 text-red-600 mx-auto mb-4\" />\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Invalid Payment Request</h2>\n          <p className=\"text-gray-600 mb-4\">Missing required payment information</p>\n          <Link href=\"/dashboard/my-listings\">\n            <Button className=\"bg-red-600 hover:bg-red-700\">\n              Back to My Listings\n            </Button>\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  if (paymentCompleted) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center max-w-md mx-auto\">\n          <CheckCircle className=\"h-16 w-16 text-green-600 mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Payment Successful!</h2>\n          <p className=\"text-gray-600 mb-6\">\n            Your listing has been successfully promoted. You will be redirected to your listings shortly.\n          </p>\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 mb-6\">\n            <h3 className=\"font-semibold text-green-800 mb-2\">Promotion Details</h3>\n            <div className=\"text-sm text-green-700 space-y-1\">\n              <p><strong>Promotion:</strong> {promotionPackage.name}</p>\n              <p><strong>Duration:</strong> {promotionPackage.duration_days} days</p>\n              <p><strong>Amount Paid:</strong> {promotionPackage.price.toLocaleString()} RWF</p>\n            </div>\n          </div>\n          <Link href=\"/dashboard/my-listings\">\n            <Button className=\"bg-red-600 hover:bg-red-700\">\n              Go to My Listings\n            </Button>\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <Link href=\"/dashboard/my-listings\" className=\"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4\">\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to My Listings\n          </Link>\n          \n          <div className=\"text-center\">\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Complete Your Promotion Payment</h1>\n            <p className=\"text-gray-600\">Pay for your listing promotion to increase visibility</p>\n          </div>\n        </div>\n\n        {/* Error Display */}\n        {error && (\n          <div className=\"mb-6 bg-red-50 border border-red-200 rounded-lg p-4\">\n            <div className=\"flex items-start\">\n              <AlertCircle className=\"h-5 w-5 text-red-600 mt-0.5 mr-3\" />\n              <div>\n                <h3 className=\"text-sm font-medium text-red-800\">Payment Error</h3>\n                <p className=\"text-sm text-red-700 mt-1\">{error}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Promotion Summary */}\n          <div className=\"lg:col-span-1\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Promotion Summary</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <h4 className=\"font-semibold text-gray-900 mb-1\">Listing</h4>\n                  <p className=\"text-sm text-gray-600 truncate\">{listingTitle || 'Loading...'}</p>\n                </div>\n                \n                <div>\n                  <h4 className=\"font-semibold text-gray-900 mb-1\">Promotion Package</h4>\n                  <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"font-medium text-red-800\">{promotionPackage.name}</span>\n                      <Badge variant=\"secondary\" className=\"bg-red-100 text-red-800\">\n                        {promotionPackage.duration_days} days\n                      </Badge>\n                    </div>\n                    <p className=\"text-sm text-red-700 mb-2\">{promotionPackage.description}</p>\n                    <div className=\"text-2xl font-bold text-red-600\">\n                      {promotionPackage.price.toLocaleString()} RWF\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <h4 className=\"font-semibold text-gray-900 mb-2\">Features Included</h4>\n                  <ul className=\"space-y-1\">\n                    {promotionPackage.features.map((feature, index) => (\n                      <li key={index} className=\"flex items-center text-sm text-gray-600\">\n                        <CheckCircle className=\"h-4 w-4 text-green-600 mr-2 flex-shrink-0\" />\n                        {feature}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Payment Form */}\n          <div className=\"lg:col-span-2\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Payment Details</CardTitle>\n              </CardHeader>\n              <CardContent>\n                {loading ? (\n                  <div className=\"text-center py-12\">\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4\"></div>\n                    <p className=\"text-gray-600\">Processing payment...</p>\n                  </div>\n                ) : (\n                  <PaymentSelection\n                    amount={promotionPackage.price}\n                    currency=\"RWF\"\n                    transactionType=\"promotion\"\n                    listingId={listingId}\n                    description={`Promotion payment for ${promotionPackage.name}`}\n                    promotionPackage={promotionPackage}\n                    listingTitle={listingTitle}\n                    onPaymentComplete={handlePaymentComplete}\n                    onPaymentError={handlePaymentError}\n                  />\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { \n  PaymentMethod, \n  PaymentMethodOption, \n  PaymentSummary, \n  CryptoType,\n  UserWallet,\n  PromotionPackage\n} from '@/types/payment';\nimport { supabase } from '@/lib/supabase';\n\ninterface PaymentSelectionProps {\n  amount: number;\n  currency?: string;\n  transactionType?: string;\n  listingId?: string;\n  adCampaignId?: string;\n  description?: string;\n  promotionPackage?: PromotionPackage;\n  listingTitle?: string;\n  onPaymentComplete?: (transaction: any) => void;\n  onPaymentError?: (error: string) => void;\n}\n\nexport default function PaymentSelection({\n  amount,\n  currency = 'RWF',\n  transactionType,\n  listingId,\n  adCampaignId,\n  description,\n  promotionPackage,\n  listingTitle,\n  onPaymentComplete,\n  onPaymentError\n}: PaymentSelectionProps) {\n  const [selectedMethod, setSelectedMethod] = useState<PaymentMethod>('wallet');\n  const [loading, setLoading] = useState(false);\n  const [userWallet, setUserWallet] = useState<UserWallet | null>(null);\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [selectedCrypto, setSelectedCrypto] = useState<CryptoType>('bitcoin');\n  const [availableMethods, setAvailableMethods] = useState<PaymentMethodOption[]>([]);\n  const [paymentSummary, setPaymentSummary] = useState<PaymentSummary | null>(null);\n  const [cryptoAmount, setCryptoAmount] = useState(0);\n  const [exchangeRate, setExchangeRate] = useState(0);\n  const [methodConfig, setMethodConfig] = useState<Record<string, any>>({});\n\n  useEffect(() => {\n    loadAvailableMethods();\n    loadUserWallet();\n  }, []);\n\n  useEffect(() => {\n    calculatePaymentSummary();\n  }, [selectedMethod, amount, promotionPackage, methodConfig]);\n\n  useEffect(() => {\n    if (selectedMethod === 'crypto') {\n      calculateCryptoAmount();\n    }\n  }, [selectedMethod, selectedCrypto, amount, paymentSummary]);\n\n  useEffect(() => {\n    const loadConfig = async () => {\n      if (!['equity_bank', 'crypto', 'mtn_momo', 'airtel_money'].includes(selectedMethod)) {\n        return;\n      }\n      try {\n        const response = await fetch(`/api/payments/config/${selectedMethod}`);\n        const data = await response.json();\n        if (response.ok && data?.config) {\n          setMethodConfig((prev) => ({ ...prev, [selectedMethod]: data.config }));\n        }\n      } catch (error) {\n        console.error('Failed to load payment config:', error);\n      }\n    };\n\n    loadConfig();\n  }, [selectedMethod]);\n\n  const loadAvailableMethods = async () => {\n    try {\n      const response = await fetch('/api/payments/methods');\n      const data = await response.json();\n      if (response.ok && data?.methods) {\n        setAvailableMethods(data.methods.filter((m: PaymentMethodOption) => m.isActive));\n        return;\n      }\n    } catch (error) {\n      console.error('Failed to load payment methods:', error);\n    }\n\n    // Fallback to local defaults if API fails\n    setAvailableMethods([\n      {\n        id: 'wallet',\n        name: 'wallet',\n        displayName: 'Wallet Balance',\n        icon: '/icons/wallet.svg',\n        description: 'Use your available wallet balance',\n        isActive: true\n      },\n      {\n        id: 'mtn_momo',\n        name: 'mtn_momo',\n        displayName: 'MTN Mobile Money',\n        icon: '/icons/mtn-momo.png',\n        description: 'Pay with MTN Mobile Money',\n        isActive: true,\n        requiresPhone: true\n      },\n      {\n        id: 'airtel_money',\n        name: 'airtel_money',\n        displayName: 'Airtel Money',\n        icon: '/icons/airtel-money.png',\n        description: 'Pay with Airtel Money',\n        isActive: true,\n        requiresPhone: true\n      },\n      {\n        id: 'equity_bank',\n        name: 'equity_bank',\n        displayName: 'Equity Bank',\n        icon: '/icons/equity-bank.png',\n        description: 'Bank transfer to Equity Bank',\n        isActive: true\n      },\n      {\n        id: 'crypto',\n        name: 'crypto',\n        displayName: 'Cryptocurrency',\n        icon: '/icons/crypto.png',\n        description: 'Pay with Bitcoin, Ethereum, or USDT',\n        isActive: true,\n        requiresCryptoSelection: true,\n        supportedCryptos: ['bitcoin', 'ethereum', 'usdt']\n      }\n    ]);\n  };\n\n  const loadUserWallet = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (user) {\n        const { data: wallet } = await supabase\n          .from('user_wallets')\n          .select('*')\n          .eq('user_id', user.id)\n          .single();\n\n        setUserWallet(wallet);\n      }\n    } catch (error) {\n      console.error('Failed to load user wallet:', error);\n    }\n  };\n\n  const calculatePaymentSummary = () => {\n    let subtotal = amount;\n    if (promotionPackage) {\n      subtotal = promotionPackage.price;\n    }\n\n    let transactionFee = 0;\n    \n    if (selectedMethod !== 'wallet') {\n      const cfg = methodConfig[selectedMethod] || {};\n      const percent = Number(cfg.transaction_fee_percent || 0);\n      const fixed = Number(cfg.fixed_fee || 0);\n      if (percent || fixed) {\n        transactionFee = subtotal * (percent / 100) + fixed;\n      } else if (selectedMethod === 'crypto') {\n        transactionFee = subtotal * 0.01;\n      }\n    }\n\n    setPaymentSummary({\n      subtotal,\n      transactionFee,\n      total: subtotal + transactionFee,\n      currency,\n      paymentMethod: selectedMethod,\n      promotionPackage,\n      listingTitle\n    });\n  };\n\n  const calculateCryptoAmount = async () => {\n    try {\n      const map: Record<CryptoType, string> = {\n        bitcoin: 'BTC',\n        ethereum: 'ETH',\n        usdt: 'USDT'\n      };\n\n      const response = await fetch(`/api/payments/exchange-rate?from=${map[selectedCrypto]}&to=RWF`);\n      const data = await response.json();\n      if (!response.ok || !data?.rate) {\n        throw new Error(data?.error || 'Exchange rate unavailable');\n      }\n\n      const totalRwf = paymentSummary?.total || amount;\n      const crypto = totalRwf / Number(data.rate);\n\n      setCryptoAmount(crypto);\n      setExchangeRate(Number(data.rate));\n    } catch (error) {\n      console.error('Failed to calculate crypto amount:', error);\n    }\n  };\n\n  const handlePayment = async () => {\n    setLoading(true);\n    \n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session?.access_token) {\n        onPaymentError?.('User not authenticated');\n        return;\n      }\n\n      const paymentRequest = {\n        payment_method: selectedMethod,\n        amount: paymentSummary?.subtotal || amount,\n        currency,\n        transaction_type: transactionType || 'payment',\n        listing_id: listingId,\n        ad_campaign_id: adCampaignId,\n        description: description || `Payment for ${transactionType}`,\n        metadata: {\n          promotion_package_id: promotionPackage?.id,\n          listing_title: listingTitle\n        },\n        phone_number: phoneNumber,\n        crypto_type: selectedCrypto\n      };\n\n      const response = await fetch('/api/payments/initiate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`\n        },\n        body: JSON.stringify(paymentRequest)\n      });\n\n      const result = await response.json();\n\n      if (response.ok && result.success) {\n        onPaymentComplete?.(result);\n      } else {\n        onPaymentError?.(result.error || 'Payment failed');\n      }\n    } catch (error: any) {\n      console.error('Payment error:', error);\n      onPaymentError?.(error.message || 'Payment failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const canUseWallet = userWallet && userWallet.balance >= (paymentSummary?.total || amount);\n  const equityConfig = methodConfig.equity_bank || {};\n  const cryptoConfig = methodConfig.crypto || {};\n  const cryptoWallets = {\n    bitcoin: cryptoConfig?.bitcoin?.wallet_address,\n    ethereum: cryptoConfig?.ethereum?.wallet_address,\n    usdt: cryptoConfig?.usdt?.wallet_address\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Payment Summary */}\n      {paymentSummary && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Payment Summary</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            {promotionPackage && (\n              <div className=\"flex justify-between\">\n                <span>Promotion Package:</span>\n                <span className=\"font-medium\">{promotionPackage.name}</span>\n              </div>\n            )}\n            <div className=\"flex justify-between\">\n              <span>Subtotal:</span>\n              <span>{paymentSummary.subtotal.toLocaleString()} {paymentSummary.currency}</span>\n            </div>\n            {paymentSummary.transactionFee > 0 && (\n              <div className=\"flex justify-between\">\n                <span>Transaction Fee:</span>\n                <span>{paymentSummary.transactionFee.toLocaleString()} {paymentSummary.currency}</span>\n              </div>\n            )}\n            <div className=\"flex justify-between text-lg font-bold\">\n              <span>Total:</span>\n              <span className=\"text-red-600\">\n                {paymentSummary.total.toLocaleString()} {paymentSummary.currency}\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Wallet Balance Display */}\n      {userWallet && (\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Available Balance</p>\n                <p className=\"text-2xl font-bold text-green-600\">\n                  {userWallet.balance.toLocaleString()} {userWallet.currency}\n                </p>\n                {userWallet.locked_balance > 0 && (\n                  <p className=\"text-xs text-gray-500\">\n                    Pending: {userWallet.locked_balance.toLocaleString()} {userWallet.currency}\n                  </p>\n                )}\n              </div>\n              {canUseWallet ? (\n                <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800\">\n                  Available\n                </Badge>\n              ) : (\n                <Badge variant=\"destructive\">\n                  Insufficient\n                </Badge>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Payment Method Selection */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Select Payment Method</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid gap-3\">\n            {availableMethods.map((method) => (\n              <div\n                key={method.id}\n                className={`relative border rounded-lg p-4 cursor-pointer transition-all ${\n                  selectedMethod === method.id\n                    ? 'border-red-500 bg-red-50'\n                    : 'border-gray-200 hover:border-gray-300'\n                } ${!canUseWallet && method.id === 'wallet' ? 'opacity-50 cursor-not-allowed' : ''}`}\n                onClick={() => {\n                  if (method.id !== 'wallet' || canUseWallet) {\n                    setSelectedMethod(method.id);\n                  }\n                }}\n              >\n                <div className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"radio\"\n                    name=\"payment_method\"\n                    value={method.id}\n                    checked={selectedMethod === method.id}\n                    onChange={() => {}}\n                    disabled={!canUseWallet && method.id === 'wallet'}\n                    className=\"h-4 w-4 text-red-600 focus:ring-red-500\"\n                  />\n                  <img\n                    src={method.icon}\n                    alt={method.displayName}\n                    className=\"h-8 w-8 object-contain\"\n                    onError={(e) => {\n                      e.currentTarget.style.display = 'none';\n                    }}\n                  />\n                  <div className=\"flex-1\">\n                    <div className=\"font-medium\">{method.displayName}</div>\n                    <div className=\"text-sm text-gray-600\">{method.description}</div>\n                  </div>\n                  {method.isActive && (\n                    <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800\">\n                      Active\n                    </Badge>\n                  )}\n                </div>\n\n                {/* Phone Number Input for Mobile Money */}\n                {method.requiresPhone && selectedMethod === method.id && (\n                  <div className=\"mt-4 space-y-2\">\n                    <Label htmlFor={`${method.id}_phone`}>Phone Number</Label>\n                    <Input\n                      id={`${method.id}_phone`}\n                      type=\"tel\"\n                      placeholder=\"078X XXX XXX\"\n                      value={phoneNumber}\n                      onChange={(e) => setPhoneNumber(e.target.value)}\n                      className=\"mt-2\"\n                    />\n                    <p className=\"text-xs text-gray-500\">\n                      You will receive a payment prompt on your phone\n                    </p>\n                  </div>\n                )}\n\n                {/* Crypto Selection */}\n                {method.requiresCryptoSelection && selectedMethod === method.id && (\n                  <div className=\"mt-4 space-y-4\">\n                    <Label htmlFor=\"crypto_type\">Select Cryptocurrency</Label>\n                    <Select value={selectedCrypto} onValueChange={(value) => setSelectedCrypto(value as CryptoType)}>\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"bitcoin\">Bitcoin (BTC)</SelectItem>\n                        <SelectItem value=\"ethereum\">Ethereum (ETH)</SelectItem>\n                        <SelectItem value=\"usdt\">USDT</SelectItem>\n                      </SelectContent>\n                    </Select>\n\n                    <div className=\"bg-gray-50 p-3 rounded-lg\">\n                      <p className=\"text-sm\">\n                        <span className=\"font-medium\">Amount: </span>\n                        {cryptoAmount.toFixed(8)} {selectedCrypto.toUpperCase()}\n                      </p>\n                      <p className=\"text-sm\">\n                        <span className=\"font-medium\">≈ </span>\n                        {amount.toLocaleString()} {currency}\n                      </p>\n                      <p className=\"text-xs text-gray-500\">\n                        Exchange rate: 1 {selectedCrypto.toUpperCase()} ≈ {exchangeRate.toLocaleString()} RWF\n                      </p>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <Label>Send to:</Label>\n                      <div className=\"bg-white border p-3 rounded font-mono text-sm\">\n                        {cryptoWallets[selectedCrypto] || 'Wallet address not configured'}\n                      </div>\n                      <Button variant=\"outline\" size=\"sm\" className=\"w-full\">\n                        Copy Address\n                      </Button>\n                    </div>\n                  </div>\n                )}\n\n                {/* Bank Transfer Instructions */}\n                {method.id === 'equity_bank' && selectedMethod === method.id && (\n                  <div className=\"mt-4 space-y-3\">\n                    <div className=\"bg-blue-50 p-4 rounded-lg\">\n                      <h4 className=\"font-medium mb-2\">Bank Transfer Instructions</h4>\n                      <div className=\"space-y-2 text-sm\">\n                        <p><span className=\"font-medium\">Bank:</span> Equity Bank Rwanda</p>\n                        <p><span className=\"font-medium\">Account Name:</span> {equityConfig.account_name || 'Not configured'}</p>\n                        <p><span className=\"font-medium\">Account Number:</span> {equityConfig.account_number || 'Not configured'}</p>\n                        <p><span className=\"font-medium\">Reference:</span> IKZ{Date.now()}</p>\n                      </div>\n                      <p className=\"text-xs text-gray-600 mt-2\">\n                        Please include the reference number in your transfer description\n                      </p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Action Buttons */}\n      <div className=\"flex space-x-4\">\n        <Button variant=\"outline\" className=\"flex-1\">\n          Cancel\n        </Button>\n        <Button\n          onClick={handlePayment}\n          disabled={loading || !selectedMethod || (selectedMethod === 'wallet' && !canUseWallet)}\n          className=\"flex-1 bg-red-600 hover:bg-red-700\"\n        >\n          {loading ? 'Processing...' : `Pay ${paymentSummary?.total?.toLocaleString() || amount.toLocaleString()} ${currency}`}\n        </Button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}