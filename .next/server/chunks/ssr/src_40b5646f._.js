module.exports=[66718,a=>{"use strict";var b=a.i(87924);let c=a.i(72131).forwardRef(({className:a,type:c,...d},e)=>(0,b.jsx)("input",{type:c,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${a||""}`,ref:e,...d}));c.displayName="Input",a.s(["Input",()=>c])},70430,a=>{"use strict";var b=a.i(87924);let c=a.i(72131).forwardRef(({className:a,...c},d)=>(0,b.jsx)("label",{ref:d,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${a||""}`,...c}));c.displayName="Label",a.s(["Label",()=>c])},88042,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(91119),e=a.i(99570),f=a.i(66718),g=a.i(70430),h=a.i(45222),i=a.i(63672);function j(){let[a,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)({admin_phone:"",whatsapp_phone:"",support_email:"",office_address:""});(0,c.useEffect)(()=>{s()},[]);let s=async()=>{try{let a=await fetch("/api/site-settings"),b=await a.json();a.ok&&b?.settings&&r(b.settings)}catch(a){n(a.message||"Failed to load settings")}finally{j(!1)}},t=async()=>{l(!0),n(""),p("");try{let{data:{session:a}}=await i.supabase.auth.getSession();if(!a?.access_token)return void n("You must be logged in");console.log("Saving settings with data:",q);let b=await fetch("/api/site-settings/admin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.access_token}`,Accept:"application/json"},body:JSON.stringify(q)});console.log("Response status:",b.status),console.log("Response headers:",b.headers);let c=await b.json();if(console.log("Response data:",c),!b.ok)return void n(c.error||`Failed to save settings (Status: ${b.status})`);p("Settings saved successfully")}catch(a){console.error("Save error:",a),n(a.message||"Failed to save settings")}finally{l(!1)}};return a?(0,b.jsx)("div",{className:"container mx-auto py-8",children:(0,b.jsx)("div",{className:"text-center",children:"Loading site settings..."})}):(0,b.jsxs)("div",{className:"container mx-auto py-8 space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Site Settings"}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Default Contact Details"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[m&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700",children:m}),o&&(0,b.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-sm text-green-700",children:o}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"admin_phone",children:"Admin Phone"}),(0,b.jsx)(f.Input,{id:"admin_phone",value:q.admin_phone,onChange:a=>r({...q,admin_phone:a.target.value}),placeholder:process.env.NEXT_PUBLIC_PLATFORM_PHONE||"+250 XXX XXX XXX"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"whatsapp_phone",children:"WhatsApp Phone"}),(0,b.jsx)(f.Input,{id:"whatsapp_phone",value:q.whatsapp_phone,onChange:a=>r({...q,whatsapp_phone:a.target.value}),placeholder:process.env.NEXT_PUBLIC_PLATFORM_WHATSAPP||"+250 XXX XXX XXX"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"support_email",children:"Support Email"}),(0,b.jsx)(f.Input,{id:"support_email",value:q.support_email,onChange:a=>r({...q,support_email:a.target.value}),placeholder:process.env.NEXT_PUBLIC_PLATFORM_EMAIL||"contact@ikazeproperty.rw"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"office_address",children:"Office Address"}),(0,b.jsx)(f.Input,{id:"office_address",value:q.office_address,onChange:a=>r({...q,office_address:a.target.value}),placeholder:"KN 123 St, Kiyovu"})]}),(0,b.jsxs)("div",{className:"border-t pt-4 mt-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4 text-green-600",children:"WhatsApp Customer Service"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Update your WhatsApp customer service number and test the connection"}),(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Current WhatsApp Number:"}),(0,b.jsx)("p",{className:"text-lg font-bold text-green-600",children:q.whatsapp_phone||"Not set"})]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(e.Button,{onClick:t,disabled:k,className:"bg-red-600 hover:bg-red-700",children:k?"Saving...":"Save Settings"}),(0,b.jsxs)(e.Button,{onClick:()=>window.open(`https://wa.me/${q.whatsapp_phone?.replace(/[^\d]/g,"")}`,"_blank"),variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-50",disabled:!q.whatsapp_phone,children:[(0,b.jsx)(h.MessageCircle,{className:"h-4 w-4 mr-2"}),"Test WhatsApp Connection"]})]})]})]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=src_40b5646f._.js.map