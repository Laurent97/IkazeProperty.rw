module.exports=[27540,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(63672);function f(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(null);return((0,c.useEffect)(()=>{(async()=>{try{let{data:b,error:c}=await e.supabase.auth.getSession();if(c){console.error("Auth callback error:",c),i("Authentication failed. Please try again."),setTimeout(()=>{a.push("/login")},3e3);return}if(b.session){console.log("User authenticated:",b.session.user);let{data:c,error:d}=await e.supabase.from("users").select("*").eq("id",b.session.user.id).single();if(d&&"PGRST116"===d.code){let{error:a}=await e.supabase.from("users").insert({email:b.session.user.email||"",full_name:b.session.user.user_metadata?.full_name||b.session.user.user_metadata?.name||null,avatar_url:b.session.user.user_metadata?.avatar_url||null,role:"user",verified:!0});a&&console.error("Error creating profile:",a)}a.push("/dashboard")}else a.push("/login")}catch(b){console.error("Callback error:",b),i("An error occurred during authentication."),setTimeout(()=>{a.push("/login")},3e3)}finally{g(!1)}})()},[a]),f)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Completing sign in..."})]})}):h?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-red-600 mb-4",children:(0,b.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,b.jsx)("p",{className:"text-gray-600",children:h}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Redirecting to login page..."})]})}):null}a.s(["default",()=>f])}];

//# sourceMappingURL=src_app_%5Blocale%5D_auth_callback_page_tsx_0d2ea08e._.js.map