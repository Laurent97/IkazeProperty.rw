{"version":3,"sources":["../../../../src/app/%5Blocale%5D/dashboard/admin/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport { \n  Users, \n  Home, \n  Car, \n  Trees, \n  Package, \n  MessageSquare, \n  DollarSign, \n  TrendingUp,\n  Clock,\n  CheckCircle,\n  XCircle,\n  AlertCircle,\n  Eye,\n  Search,\n  Filter,\n  Settings\n} from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { supabase } from '@/lib/auth'\n\nexport default function AdminDashboard() {\n  const [stats, setStats] = useState({\n    totalUsers: 0,\n    totalListings: 0,\n    pendingInquiries: 0,\n    completedTransactions: 0,\n    totalRevenue: 0\n  })\n  const [pendingInquiries, setPendingInquiries] = useState([])\n  const [recentListings, setRecentListings] = useState([])\n  const [visitRequests, setVisitRequests] = useState([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    fetchDashboardData()\n  }, [])\n\n  const fetchDashboardData = async () => {\n    try {\n      // Fetch stats\n      const [\n        usersCount,\n        listingsCount,\n        inquiriesCount,\n        transactionsCount,\n        revenueData\n      ] = await Promise.all([\n        supabase.from('users').select('id', { count: 'exact' }),\n        supabase.from('listings').select('id', { count: 'exact' }),\n        supabase.from('inquiries').select('id', { count: 'exact', head: true }).eq('status', 'pending'),\n        supabase.from('transactions').select('id', { count: 'exact', head: true }).eq('status', 'completed'),\n        supabase.from('transactions').select('commission_amount').eq('status', 'completed')\n      ])\n\n      const totalRevenue = (revenueData.data as any[])?.reduce((sum, t) => sum + t.commission_amount, 0) || 0\n\n      setStats({\n        totalUsers: usersCount.count || 0,\n        totalListings: listingsCount.count || 0,\n        pendingInquiries: inquiriesCount.count || 0,\n        completedTransactions: transactionsCount.count || 0,\n        totalRevenue\n      })\n\n      // Fetch pending inquiries\n      const { data: inquiries } = await supabase\n        .from('inquiries')\n        .select(`\n          *,\n          listings(title, category),\n          buyer:users!inquiries_buyer_id_fkey(email, full_name),\n          seller:users!inquiries_seller_id_fkey(email, full_name)\n        `)\n        .eq('status', 'pending')\n        .order('created_at', { ascending: false })\n        .limit(5)\n\n      setPendingInquiries(inquiries || [])\n\n      // Fetch recent listings\n      const { data: listings } = await supabase\n        .from('listings')\n        .select(`\n          *,\n          seller:users!listings_seller_id_fkey(email, full_name)\n        `)\n        .order('created_at', { ascending: false })\n        .limit(5)\n\n      setRecentListings(listings || [])\n\n      // Fetch visit requests for payout\n      const { data: { session } } = await supabase.auth.getSession()\n      if (session?.access_token) {\n        const visitResponse = await fetch('/api/visits/admin', {\n          headers: {\n            'Authorization': `Bearer ${session.access_token}`\n          }\n        })\n        const visitData = await visitResponse.json()\n        if (visitResponse.ok) {\n          setVisitRequests(visitData.visits || [])\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching dashboard data:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleInquiryAction = async (inquiryId: string, action: 'approved' | 'rejected') => {\n    try {\n      await (supabase as any)\n        .from('inquiries')\n        .update({ \n          status: action,\n          admin_notes: action === 'approved' ? 'Approved by admin' : 'Rejected by admin'\n        })\n        .eq('id', inquiryId)\n\n      fetchDashboardData()\n    } catch (error) {\n      console.error('Error updating inquiry:', error)\n    }\n  }\n\n  const handleReleaseVisitPayout = async (visitId: string) => {\n    try {\n      const { data: { session } } = await supabase.auth.getSession()\n      if (!session?.access_token) return\n\n      const response = await fetch('/api/visits/release', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`\n        },\n        body: JSON.stringify({ visit_request_id: visitId })\n      })\n\n      if (!response.ok) {\n        const result = await response.json()\n        throw new Error(result.error || 'Failed to release payout')\n      }\n\n      fetchDashboardData()\n    } catch (error) {\n      console.error('Error releasing payout:', error)\n    }\n  }\n\n  const getCategoryIcon = (category: string) => {\n    switch (category) {\n      case 'houses': return <Home className=\"h-4 w-4\" />\n      case 'cars': return <Car className=\"h-4 w-4\" />\n      case 'land': return <Trees className=\"h-4 w-4\" />\n      case 'other': return <Package className=\"h-4 w-4\" />\n      default: return <Package className=\"h-4 w-4\" />\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading dashboard...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"p-6\">\n      {/* Header */}\n      <div className=\"bg-white border-b border-gray-200 -mx-6 px-6 py-6 mb-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Admin Dashboard</h1>\n            <p className=\"text-gray-600 mt-1\">Manage IkazeProperty.rw platform</p>\n          </div>\n          <div className=\"flex space-x-3\">\n            <Link href=\"/dashboard/admin/users\">\n              <Button variant=\"outline\" className=\"border-gray-300 text-gray-700 hover:bg-gray-50\">\n                <Users className=\"h-4 w-4 mr-2\" />\n                Users\n              </Button>\n            </Link>\n            <Link href=\"/dashboard/admin/listings\">\n              <Button variant=\"outline\" className=\"border-gray-300 text-gray-700 hover:bg-gray-50\">\n                <Home className=\"h-4 w-4 mr-2\" />\n                Listings\n              </Button>\n            </Link>\n            <Link href=\"/dashboard/admin/inquiries\">\n              <Button variant=\"outline\" className=\"border-gray-300 text-gray-700 hover:bg-gray-50\">\n                <MessageSquare className=\"h-4 w-4 mr-2\" />\n                Inquiries\n              </Button>\n            </Link>\n            <Link href=\"/dashboard/admin/transactions\">\n              <Button variant=\"outline\" className=\"border-gray-300 text-gray-700 hover:bg-gray-50\">\n                <DollarSign className=\"h-4 w-4 mr-2\" />\n                Transactions\n              </Button>\n            </Link>\n            <Link href=\"/dashboard/admin/settings\">\n              <Button variant=\"outline\" className=\"border-gray-300 text-gray-700 hover:bg-gray-50\">\n                <Settings className=\"h-4 w-4 mr-2\" />\n                Settings\n              </Button>\n            </Link>\n          </div>\n        </div>\n      </div>\n        {/* Stats Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8\">\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center\">\n                  <Users className=\"h-4 w-4 text-blue-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600\">Total Users</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats.totalUsers}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center\">\n                  <Home className=\"h-4 w-4 text-green-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600\">Total Listings</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats.totalListings}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center\">\n                  <Clock className=\"h-4 w-4 text-yellow-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600\">Pending Inquiries</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats.pendingInquiries}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center\">\n                  <CheckCircle className=\"h-4 w-4 text-purple-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600\">Completed</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats.completedTransactions}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center\">\n                  <DollarSign className=\"h-4 w-4 text-red-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600\">Total Revenue</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">\n                    RWF {stats.totalRevenue.toLocaleString()}\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n          {/* Pending Inquiries */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center\">\n                <AlertCircle className=\"h-5 w-5 mr-2 text-yellow-600\" />\n                Pending Inquiries ({pendingInquiries.length})\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {pendingInquiries.length === 0 ? (\n                <p className=\"text-gray-500 text-center py-4\">No pending inquiries</p>\n              ) : (\n                <div className=\"space-y-4\">\n                  {pendingInquiries.map((inquiry: any) => (\n                    <div key={inquiry.id} className=\"border border-gray-200 rounded-lg p-4\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center mb-1\">\n                            {getCategoryIcon(inquiry.listings.category)}\n                            <span className=\"ml-2 font-medium text-gray-900\">\n                              {inquiry.listings.title}\n                            </span>\n                          </div>\n                          <p className=\"text-sm text-gray-600 mb-2\">\n                            <strong>Buyer:</strong> {inquiry.buyer.full_name || inquiry.buyer.email}\n                          </p>\n                          <p className=\"text-sm text-gray-600 mb-2\">\n                            <strong>Seller:</strong> {inquiry.seller.full_name || inquiry.seller.email}\n                          </p>\n                          <p className=\"text-sm text-gray-700\">{inquiry.message}</p>\n                          <p className=\"text-xs text-gray-500 mt-2\">\n                            {new Date(inquiry.created_at).toLocaleDateString()}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"flex space-x-2 mt-3\">\n                        <Button\n                          size=\"sm\"\n                          onClick={() => handleInquiryAction(inquiry.id, 'approved')}\n                          className=\"bg-green-600 hover:bg-green-700\"\n                        >\n                          <CheckCircle className=\"h-4 w-4 mr-1\" />\n                          Approve\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => handleInquiryAction(inquiry.id, 'rejected')}\n                          className=\"border-red-600 text-red-600 hover:bg-red-50\"\n                        >\n                          <XCircle className=\"h-4 w-4 mr-1\" />\n                          Reject\n                        </Button>\n                        <Link href={`/dashboard/admin/inquiries/${inquiry.id}`}>\n                          <Button size=\"sm\" variant=\"outline\">\n                            <Eye className=\"h-4 w-4 mr-1\" />\n                            View\n                          </Button>\n                        </Link>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Recent Listings */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center\">\n                <TrendingUp className=\"h-5 w-5 mr-2 text-blue-600\" />\n                Recent Listings\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {recentListings.length === 0 ? (\n                <p className=\"text-gray-500 text-center py-4\">No listings yet</p>\n              ) : (\n                <div className=\"space-y-4\">\n                  {recentListings.map((listing: any) => (\n                    <div key={listing.id} className=\"border border-gray-200 rounded-lg p-4\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center mb-1\">\n                            {getCategoryIcon(listing.category)}\n                            <span className=\"ml-2 font-medium text-gray-900\">\n                              {listing.title}\n                            </span>\n                          </div>\n                          <p className=\"text-sm text-gray-600 mb-1\">\n                            <strong>Seller:</strong> {listing.seller.full_name || listing.seller.email}\n                          </p>\n                          <p className=\"text-lg font-bold text-red-600 mb-1\">\n                            RWF {listing.price.toLocaleString()}\n                          </p>\n                          <p className=\"text-xs text-gray-500\">\n                            {new Date(listing.created_at).toLocaleDateString()}\n                          </p>\n                        </div>\n                        <div className=\"ml-4\">\n                          <span className={`px-2 py-1 text-xs rounded-full ${\n                            listing.status === 'available' \n                              ? 'bg-green-100 text-green-800'\n                              : 'bg-gray-100 text-gray-800'\n                          }`}>\n                            {listing.status}\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"flex space-x-2 mt-3\">\n                        <Link href={`/listings/${listing.category}/${listing.id}`}>\n                          <Button size=\"sm\" variant=\"outline\">\n                            <Eye className=\"h-4 w-4 mr-1\" />\n                            View\n                          </Button>\n                        </Link>\n                        <Link href={`/dashboard/admin/listings/${listing.id}`}>\n                          <Button size=\"sm\" variant=\"outline\">\n                            Manage\n                          </Button>\n                        </Link>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8\">\n          {/* Visit Requests */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center\">\n                <DollarSign className=\"h-5 w-5 mr-2 text-green-600\" />\n                Visit Fee Requests ({visitRequests.length})\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {visitRequests.length === 0 ? (\n                <p className=\"text-gray-500 text-center py-4\">No visit requests</p>\n              ) : (\n                <div className=\"space-y-4\">\n                  {visitRequests.map((visit: any) => (\n                    <div key={visit.id} className=\"border border-gray-200 rounded-lg p-4\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center mb-1\">\n                            {getCategoryIcon(visit.listings?.category)}\n                            <span className=\"ml-2 font-medium text-gray-900\">\n                              {visit.listings?.title || 'Listing'}\n                            </span>\n                          </div>\n                          <p className=\"text-sm text-gray-600 mb-1\">\n                            <strong>Buyer:</strong> {visit.buyer?.full_name || visit.buyer?.email}\n                          </p>\n                          <p className=\"text-sm text-gray-600 mb-1\">\n                            <strong>Seller:</strong> {visit.seller?.full_name || visit.seller?.email}\n                          </p>\n                          <p className=\"text-sm text-gray-700\">\n                            Visit Fee: {Number(visit.visit_fee_amount || 0).toLocaleString()} RWF\n                          </p>\n                          <p className=\"text-xs text-gray-500 mt-1\">\n                            Status: {visit.status} â€¢ Payout: {visit.payout_status}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"flex space-x-2 mt-3\">\n                        <Button\n                          size=\"sm\"\n                          onClick={() => handleReleaseVisitPayout(visit.id)}\n                          disabled={visit.status !== 'paid' || visit.payout_status === 'released'}\n                          className=\"bg-green-600 hover:bg-green-700\"\n                        >\n                          Release to Seller (70%)\n                        </Button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}