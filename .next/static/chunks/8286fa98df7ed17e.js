(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86536,e=>{"use strict";let s=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],86536)},93479,e=>{"use strict";var s=e.i(43476);let a=e.i(71645).forwardRef(({className:e,type:a,...t},l)=>(0,s.jsx)("input",{type:a,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e||""}`,ref:l,...t}));a.displayName="Input",e.s(["Input",()=>a])},87316,e=>{"use strict";let s=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>s],87316)},71689,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},73884,e=>{"use strict";let s=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],73884)},3116,e=>{"use strict";let s=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>s],3116)},27612,e=>{"use strict";let s=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>s],27612)},88511,e=>{"use strict";let s=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>s],88511)},78583,e=>{"use strict";let s=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>s],78583)},56909,24687,e=>{"use strict";let s=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>s],56909);var a=e.i(43476);let t=e.i(71645).forwardRef(({className:e,...s},t)=>(0,a.jsx)("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e||""}`,ref:t,...s}));t.displayName="Textarea",e.s(["Textarea",()=>t],24687)},93468,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(18566),l=e.i(22016),i=e.i(71689),r=e.i(94351),n=e.i(5125),c=e.i(1107),d=e.i(88844),o=e.i(88511),x=e.i(27612),m=e.i(86536),h=e.i(56909),u=e.i(37727),g=e.i(69638),j=e.i(73884),f=e.i(3116),p=e.i(12426),y=e.i(84614),v=e.i(87316),N=e.i(46897),b=e.i(78583),w=e.i(19455),k=e.i(15288),C=e.i(93479),M=e.i(24687),B=e.i(87486),S=e.i(86909);function T(){let e=(0,t.useParams)(),T=(0,t.useRouter)(),L=e.id,[H,E]=(0,a.useState)(null),[_,P]=(0,a.useState)(!0),[q,D]=(0,a.useState)(!1),[z,A]=(0,a.useState)({}),[$,F]=(0,a.useState)([]);(0,a.useEffect)(()=>{I()},[L]);let I=async()=>{try{P(!0);let{data:e,error:s}=await S.supabase.from("listings").select(`
          *,
          seller:users!listings_seller_id_fkey(*)
        `).eq("id",L).single();if(s)throw s;E(e),A(e);let{data:a,error:t}=await S.supabase.from("inquiries").select(`
          *,
          buyer:users!inquiries_buyer_id_fkey(*)
        `).eq("listing_id",L).order("created_at",{ascending:!1});if(t)throw t;F(a||[])}catch(e){console.error("Error fetching listing details:",e)}finally{P(!1)}},R=e=>{switch(e){case"house":return(0,s.jsx)(r.Home,{className:"h-5 w-5"});case"car":return(0,s.jsx)(n.Car,{className:"h-5 w-5"});case"land":return(0,s.jsx)(c.Trees,{className:"h-5 w-5"});default:return(0,s.jsx)(d.Package,{className:"h-5 w-5"})}},V=e=>{switch(e){case"active":return(0,s.jsx)(B.Badge,{className:"bg-green-100 text-green-800",children:"Active"});case"pending":return(0,s.jsx)(B.Badge,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"sold":return(0,s.jsx)(B.Badge,{className:"bg-blue-100 text-blue-800",children:"Sold"});case"rejected":return(0,s.jsx)(B.Badge,{className:"bg-red-100 text-red-800",children:"Rejected"});default:return(0,s.jsx)(B.Badge,{className:"bg-gray-100 text-gray-800",children:"Unknown"})}},U=async()=>{try{let{error:e}=await S.supabase.from("listings").update(z).eq("id",L);if(e)throw e;E(z),D(!1),alert("Listing updated successfully!")}catch(e){console.error("Error updating listing:",e),alert("Error updating listing. Please try again.")}},O=async()=>{if(confirm("Are you sure you want to delete this listing? This action cannot be undone."))try{let{error:e}=await S.supabase.from("listings").delete().eq("id",L);if(e)throw e;T.push("/dashboard/admin/listings")}catch(e){console.error("Error deleting listing:",e),alert("Error deleting listing. Please try again.")}},X=async e=>{try{let{error:s}=await S.supabase.from("listings").update({status:e}).eq("id",L);if(s)throw s;E({...H,status:e}),A({...z,status:e})}catch(e){console.error("Error updating status:",e),alert("Error updating status. Please try again.")}};return _?(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading listing details..."})]})}):H?(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(l.default,{href:"/dashboard/admin/listings",children:(0,s.jsxs)(w.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(i.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Listings"]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Listing Details"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage listing information and inquiries"})]})]}),(0,s.jsx)("div",{className:"flex space-x-2",children:q?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(w.Button,{onClick:U,className:"bg-green-600 hover:bg-green-700",children:[(0,s.jsx)(h.Save,{className:"h-4 w-4 mr-2"}),"Save"]}),(0,s.jsxs)(w.Button,{onClick:()=>{D(!1),A(H)},variant:"outline",children:[(0,s.jsx)(u.X,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(w.Button,{onClick:()=>D(!0),variant:"outline",children:[(0,s.jsx)(o.Edit,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,s.jsxs)(w.Button,{onClick:O,variant:"outline",className:"text-red-600 hover:text-red-700",children:[(0,s.jsx)(x.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)(k.Card,{children:[(0,s.jsx)(k.CardHeader,{children:(0,s.jsxs)(k.CardTitle,{className:"flex items-center",children:[R(H.category),(0,s.jsx)("span",{className:"ml-2",children:"Listing Information"}),V(H.status)]})}),(0,s.jsx)(k.CardContent,{className:"space-y-4",children:q?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,s.jsx)(C.Input,{value:z.title||"",onChange:e=>A({...z,title:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)(M.Textarea,{value:z.description||"",onChange:e=>A({...z,description:e.target.value}),rows:4})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,s.jsx)(C.Input,{type:"number",value:z.price||"",onChange:e=>A({...z,price:parseFloat(e.target.value)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,s.jsxs)("select",{value:z.category||"",onChange:e=>A({...z,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"house",children:"House"}),(0,s.jsx)("option",{value:"car",children:"Car"}),(0,s.jsx)("option",{value:"land",children:"Land"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,s.jsx)(C.Input,{value:"string"==typeof z.location?z.location:JSON.stringify(z.location)||"",onChange:e=>A({...z,location:e.target.value})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:H.title}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:H.description})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.DollarSign,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Price:"}),(0,s.jsxs)("span",{className:"ml-2 font-medium",children:["$",H.price?.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[R(H.category),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Category:"}),(0,s.jsx)("span",{className:"ml-2 font-medium capitalize",children:H.category})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(N.MapPin,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Location:"}),(0,s.jsx)("span",{className:"ml-2 font-medium",children:"string"==typeof H.location?H.location:H.location&&`${H.location.village||""}, ${H.location.district||""}, ${H.location.province||""}`.replace(/^[,\s]+|[,\s]+$/g,"")||"Not specified"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(v.Calendar,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Available until:"}),(0,s.jsx)("span",{className:"ml-2 font-medium",children:H.available_until?new Date(H.available_until).toLocaleDateString():"Not specified"})]})]})]})})]}),(0,s.jsxs)(k.Card,{children:[(0,s.jsx)(k.CardHeader,{children:(0,s.jsxs)(k.CardTitle,{children:["Inquiries (",$.length,")"]})}),(0,s.jsx)(k.CardContent,{children:0===$.length?(0,s.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No inquiries yet"}):(0,s.jsx)("div",{className:"space-y-4",children:$.map(e=>(0,s.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,s.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center mb-1",children:[(0,s.jsx)(y.User,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.buyer?.full_name}),(0,s.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["(",e.buyer?.email,")"]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.message}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(v.Calendar,{className:"h-4 w-4 mr-1"}),new Date(e.created_at).toLocaleDateString()]}),V(e.status)]})]})})},e.id))})})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(k.Card,{children:[(0,s.jsx)(k.CardHeader,{children:(0,s.jsx)(k.CardTitle,{children:"Status Management"})}),(0,s.jsxs)(k.CardContent,{className:"space-y-3",children:[(0,s.jsxs)(w.Button,{onClick:()=>X("active"),disabled:"active"===H.status,className:"w-full",variant:"active"===H.status?"default":"outline",children:[(0,s.jsx)(g.CheckCircle,{className:"h-4 w-4 mr-2"}),"Mark as Active"]}),(0,s.jsxs)(w.Button,{onClick:()=>X("pending"),disabled:"pending"===H.status,className:"w-full",variant:"pending"===H.status?"default":"outline",children:[(0,s.jsx)(f.Clock,{className:"h-4 w-4 mr-2"}),"Mark as Pending"]}),(0,s.jsxs)(w.Button,{onClick:()=>X("sold"),disabled:"sold"===H.status,className:"w-full",variant:"sold"===H.status?"default":"outline",children:[(0,s.jsx)(p.DollarSign,{className:"h-4 w-4 mr-2"}),"Mark as Sold"]}),(0,s.jsxs)(w.Button,{onClick:()=>X("rejected"),disabled:"rejected"===H.status,className:"w-full text-red-600 hover:text-red-700",variant:"rejected"===H.status?"default":"outline",children:[(0,s.jsx)(j.XCircle,{className:"h-4 w-4 mr-2"}),"Reject Listing"]})]})]}),(0,s.jsxs)(k.Card,{children:[(0,s.jsx)(k.CardHeader,{children:(0,s.jsx)(k.CardTitle,{children:"Seller Information"})}),(0,s.jsx)(k.CardContent,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(y.User,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:H.seller?.full_name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:H.seller?.email})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(v.Calendar,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Joined ",new Date(H.seller?.created_at).toLocaleDateString()]})]})]})})]}),(0,s.jsxs)(k.Card,{children:[(0,s.jsx)(k.CardHeader,{children:(0,s.jsx)(k.CardTitle,{children:"Quick Actions"})}),(0,s.jsxs)(k.CardContent,{className:"space-y-3",children:[(0,s.jsx)(l.default,{href:`/listings/${H.category}/${H.id}`,children:(0,s.jsxs)(w.Button,{variant:"outline",className:"w-full",children:[(0,s.jsx)(m.Eye,{className:"h-4 w-4 mr-2"}),"View Public Listing"]})}),(0,s.jsxs)(w.Button,{variant:"outline",className:"w-full",children:[(0,s.jsx)(b.FileText,{className:"h-4 w-4 mr-2"}),"Export Details"]})]})]})]})]})]}):(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Listing Not Found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"The listing you're looking for doesn't exist."}),(0,s.jsx)(l.default,{href:"/dashboard/admin/listings",children:(0,s.jsx)(w.Button,{children:"Back to Listings"})})]})})}e.s(["default",()=>T])}]);