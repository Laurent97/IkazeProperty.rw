(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52200,e=>{"use strict";var s=e.i(43476),t=e.i(43432),a=e.i(63488),l=e.i(46897),i=e.i(75240);function r({className:e=""}){let{getPlatformInfo:r}=(0,i.usePaymentMethods)(),n=r();return(0,s.jsxs)("div",{className:`text-xs text-gray-600 space-y-1 ${e}`,children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(t.Phone,{className:"h-3 w-3 mr-2 text-gray-500"}),(0,s.jsx)("span",{children:n.phone})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(a.Mail,{className:"h-3 w-3 mr-2 text-gray-500"}),(0,s.jsx)("span",{children:n.email})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.MapPin,{className:"h-3 w-3 mr-2 text-gray-500"}),(0,s.jsx)("span",{children:n.address})]})]})}e.s(["default",()=>r])},3116,e=>{"use strict";let s=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>s],3116)},86536,e=>{"use strict";let s=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],86536)},55436,e=>{"use strict";let s=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>s],55436)},87316,e=>{"use strict";let s=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>s],87316)},61911,e=>{"use strict";let s=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>s],61911)},25652,e=>{"use strict";let s=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>s],25652)},98919,e=>{"use strict";let s=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>s],98919)},73375,e=>{"use strict";let s=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>s],73375)},70756,e=>{"use strict";let s=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>s],70756)},77705,e=>{"use strict";let s=(0,e.i(75254).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>s],77705)},72520,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>s],72520)},41383,42347,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(90597),l=e.i(61911),i=e.i(19455),r=e.i(75157);let n=t.forwardRef(({className:e,...t},a)=>(0,s.jsx)("div",{ref:a,className:(0,r.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));n.displayName="Avatar";let c=t.forwardRef(({className:e,...t},a)=>(0,s.jsx)("img",{ref:a,className:(0,r.cn)("aspect-square h-full w-full object-cover",e),...t}));c.displayName="AvatarImage";let d=t.forwardRef(({className:e,...t},a)=>(0,s.jsx)("div",{ref:a,className:(0,r.cn)("flex h-full w-full items-center justify-center rounded-full bg-gray-100 text-gray-600",e),...t}));d.displayName="AvatarFallback";var o=e.i(37727);let m=({open:e,onOpenChange:a,children:l})=>(0,s.jsx)(s.Fragment,{children:t.Children.map(l,s=>t.isValidElement(s)?t.cloneElement(s,{open:e,onOpenChange:a}):s)}),x=t.forwardRef(({className:e,onClick:a,open:l,onOpenChange:i,asChild:n=!1,children:c,...d},o)=>n&&t.isValidElement(c)?t.cloneElement(c,{ref:o,className:(0,r.cn)(e,c.props.className),onClick:e=>{c.props.onClick?.(e),a?.(e),i?.(!l)},...d}):(0,s.jsx)("button",{ref:o,className:e,onClick:e=>{a?.(e),i?.(!l)},...d,children:c}));x.displayName="DialogTrigger";let h=t.forwardRef(({className:e,children:t,open:a,onOpenChange:l,...i},r)=>a?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80",onClick:()=>l?.(!1)}),(0,s.jsxs)("div",{ref:r,className:`relative z-50 grid w-full max-w-lg gap-4 border bg-background p-6 shadow-lg rounded-lg ${e}`,...i,children:[(0,s.jsxs)("button",{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100",onClick:()=>l?.(!1),children:[(0,s.jsx)(o.X,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]}),t]})]}):null);h.displayName="DialogContent";let g=({className:e,...t})=>(0,s.jsx)("div",{className:`flex flex-col space-y-1.5 text-center sm:text-left ${e}`,...t});g.displayName="DialogHeader";let u=({className:e,...t})=>(0,s.jsx)("h2",{className:`text-lg font-semibold leading-none tracking-tight ${e}`,...t});u.displayName="DialogTitle";var p=e.i(86909);function y({listingId:e,likesCount:r,className:o=""}){let[y,f]=(0,t.useState)([]),[j,N]=(0,t.useState)(!1),[v,b]=(0,t.useState)(!1),w=async()=>{if(0!==r){N(!0);try{let{data:s,error:t}=await p.supabase.from("listing_likes").select(`
          user_id,
          created_at,
          users!listing_likes_user_id_fkey (
            id,
            full_name,
            email,
            avatar_url
          )
        `).eq("listing_id",e).order("created_at",{ascending:!1}).limit(20);if(t)throw t;let a=(s||[]).map(e=>e.users).filter(Boolean);f(a)}catch(e){console.error("Error fetching liked users:",e)}finally{N(!1)}}};return 0===r?(0,s.jsxs)("div",{className:`flex items-center gap-1 text-gray-500 ${o}`,children:[(0,s.jsx)(a.Heart,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm",children:"No likes yet"})]}):(0,s.jsxs)(m,{open:v,onOpenChange:e=>{b(e),e&&0===y.length&&w()},children:[(0,s.jsx)(x,{asChild:!0,children:(0,s.jsxs)(i.Button,{variant:"ghost",className:`flex items-center gap-1 text-gray-600 hover:text-red-600 ${o}`,children:[(0,s.jsx)(a.Heart,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:r}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"likes"})]})}),(0,s.jsxs)(h,{className:"max-w-md",children:[(0,s.jsx)(g,{children:(0,s.jsxs)(u,{className:"flex items-center gap-2",children:[(0,s.jsx)(a.Heart,{className:"h-5 w-5 text-red-500"}),"People who liked this listing"]})}),(0,s.jsx)("div",{className:"space-y-3",children:j?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})}):0===y.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(l.Users,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{children:"No one has liked this listing yet"})]}):(0,s.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[y.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50",children:[(0,s.jsxs)(n,{className:"h-10 w-10",children:[(0,s.jsx)(c,{src:e.avatar_url||"",alt:e.full_name||""}),(0,s.jsx)(d,{children:e.full_name?.charAt(0)?.toUpperCase()||e.email?.charAt(0)?.toUpperCase()||"U"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-sm truncate",children:e.full_name||"Anonymous User"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.email||"No email"})]})]},e.id)),y.length<r&&(0,s.jsxs)("div",{className:"text-center py-2 text-sm text-gray-500",children:["And ",r-y.length," more..."]})]})})]})]})}e.s(["default",()=>y],41383);var f=e.i(86536);function j({listingId:e,viewsCount:a,className:l=""}){let[r,n]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),[o,y]=(0,t.useState)(!1),j=async()=>{if(0!==a){d(!0);try{let{data:s,error:t}=await p.supabase.from("listing_views").select(`
          id,
          user_id,
          ip_address,
          user_agent,
          viewed_at,
          users!listing_views_user_id_fkey (
            id,
            full_name,
            email,
            avatar_url
          )
        `).eq("listing_id",e).order("viewed_at",{ascending:!1}).limit(20);t?(console.error("Error fetching views:",t),n([])):n(s||[])}catch(e){console.error("Error fetching views:",e),n([])}finally{d(!1)}}};return 0===a?(0,s.jsxs)("div",{className:`flex items-center gap-1 text-gray-500 ${l}`,children:[(0,s.jsx)(f.Eye,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm",children:"No views yet"})]}):(0,s.jsxs)(m,{open:o,onOpenChange:e=>{y(e),e&&0===r.length&&j()},children:[(0,s.jsx)(x,{asChild:!0,children:(0,s.jsxs)(i.Button,{variant:"ghost",className:`flex items-center gap-1 text-gray-600 hover:text-blue-600 ${l}`,children:[(0,s.jsx)(f.Eye,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:a}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"views"})]})}),(0,s.jsxs)(h,{className:"max-w-md",children:[(0,s.jsx)(g,{children:(0,s.jsxs)(u,{className:"flex items-center gap-2",children:[(0,s.jsx)(f.Eye,{className:"h-5 w-5 text-blue-500"}),"Recent views"]})}),(0,s.jsx)("div",{className:"space-y-3",children:c?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===r.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(f.Eye,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{children:"No views recorded yet"})]}):(0,s.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[r.map(e=>{let t,a;return(0,s.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:e.users?(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs font-medium text-blue-600",children:e.users.full_name?.charAt(0)?.toUpperCase()||"U"})}):(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-100 flex items-center justify-center",children:(0,s.jsx)(f.Eye,{className:"h-4 w-4 text-gray-500"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-sm truncate",children:e.users?.full_name||"Anonymous Visitor"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[(t=new Date(e.viewed_at),(a=Math.floor((new Date().getTime()-t.getTime())/36e5))<1?"Just now":a<24?`${a}h ago`:a<48?"Yesterday":t.toLocaleDateString()),e.ip_address&&` â€¢ ${e.ip_address}`]})]})]},e.id)}),r.length<a&&(0,s.jsxs)("div",{className:"text-center py-2 text-sm text-gray-500",children:["And ",a-r.length," more views..."]})]})})]})]})}e.s(["default",()=>j],42347)},74040,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(37727),l=e.i(73375),i=e.i(63059),r=e.i(75254);let n=(0,r.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),c=(0,r.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),d=(0,r.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function o({images:e,initialIndex:r=0,isOpen:o,onClose:m}){let[x,h]=(0,t.useState)(r),[g,u]=(0,t.useState)(1),[p,y]=(0,t.useState)({x:0,y:0}),[f,j]=(0,t.useState)(!1),[N,v]=(0,t.useState)({x:0,y:0}),[b,w]=(0,t.useState)(null),[k,C]=(0,t.useState)(0),_=(0,t.useRef)(null),M=(0,t.useRef)(null);(0,t.useEffect)(()=>{let s=s=>{"Escape"===s.key?m():"ArrowLeft"===s.key?h(s=>(s-1+e.length)%e.length):"ArrowRight"===s.key?h(s=>(s+1+e.length)%e.length):"+"===s.key||"="===s.key?S():"-"===s.key||"_"===s.key?E():"0"===s.key&&D()};if(o)return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[o,e.length,m]),(0,t.useEffect)(()=>{u(1),y({x:0,y:0})},[x]);let S=()=>{u(e=>Math.min(e+.25,3))},E=()=>{u(e=>Math.max(e-.25,.5))},D=()=>{u(1),y({x:0,y:0})},L=()=>{j(!1)},T=()=>{1===g?u(2):D()};if(!o)return null;let $=()=>{h(s=>(s-1+e.length)%e.length)},A=()=>{h(s=>(s+1+e.length)%e.length)};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",children:(0,s.jsxs)("div",{className:"relative w-full h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-2 sm:p-4",children:[(0,s.jsx)("button",{onClick:m,title:"Close image viewer",className:"p-2 sm:p-3 text-white hover:bg-gray-800 rounded-full transition-colors touch-manipulation",children:(0,s.jsx)(a.X,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,s.jsx)("button",{onClick:E,title:"Zoom out",className:"p-1.5 sm:p-2 text-white hover:bg-gray-800 rounded-full transition-colors disabled:opacity-50 touch-manipulation",disabled:g<=.5,children:(0,s.jsx)(c,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,s.jsxs)("span",{className:"text-white text-xs sm:text-sm min-w-[2.5rem] sm:min-w-[3rem] text-center",children:[Math.round(100*g),"%"]}),(0,s.jsx)("button",{onClick:S,title:"Zoom in",className:"p-1.5 sm:p-2 text-white hover:bg-gray-800 rounded-full transition-colors disabled:opacity-50 touch-manipulation",disabled:g>=3,children:(0,s.jsx)(n,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,s.jsx)("button",{onClick:D,title:"Reset zoom",className:"p-1.5 sm:p-2 text-white hover:bg-gray-800 rounded-full transition-colors touch-manipulation hidden sm:block",children:(0,s.jsx)(d,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]}),(0,s.jsx)("div",{ref:_,className:"flex-1 relative overflow-hidden flex items-center justify-center touch-none",onWheel:e=>{e.preventDefault(),e.deltaY<0?S():E()},onTouchStart:e=>{let s=e.touches;1===s.length?w({x:s[0].clientX,y:s[0].clientY,distance:0}):2===s.length&&w({x:0,y:0,distance:Math.hypot(s[1].clientX-s[0].clientX,s[1].clientY-s[0].clientY)})},onTouchMove:e=>{e.preventDefault();let s=e.touches;if(1===s.length&&b){if(g>1){let e=s[0].clientX-b.x,t=s[0].clientY-b.y;y(s=>({x:s.x+e,y:s.y+t})),w({...b,x:s[0].clientX,y:s[0].clientY})}}else if(2===s.length&&b&&b.distance>0){let e=Math.hypot(s[1].clientX-s[0].clientX,s[1].clientY-s[0].clientY);u(Math.min(Math.max(g*(e/b.distance),.5),3)),w({...b,distance:e})}},onTouchEnd:e=>{let s=new Date().getTime(),t=s-k;if(t<300&&t>0&&0===e.touches.length&&T(),C(s),b&&0===b.distance&&1===g){let s=e.changedTouches[0],t=s.clientX-b.x,a=s.clientY-b.y,l=Math.abs(t),i=Math.abs(a);l>50&&l>i&&(t>0?$():A())}w(null)},onMouseDown:e=>{g>1&&(j(!0),v({x:e.clientX-p.x,y:e.clientY-p.y}))},onMouseMove:e=>{f&&g>1&&y({x:e.clientX-N.x,y:e.clientY-N.y})},onMouseUp:L,onMouseLeave:L,children:(0,s.jsx)("div",{className:"relative",style:{"--scale":g,"--translate-x":`${p.x/g}px`,"--translate-y":`${p.y/g}px`,transform:"scale(var(--scale)) translate(var(--translate-x), var(--translate-y))",transition:f?"none":"transform 0.2s ease-out",cursor:g>1?f?"grabbing":"grab":"pointer"},onDoubleClick:T,children:(0,s.jsx)("img",{ref:M,src:e[x],alt:`Property image ${x+1}`,className:"max-w-full max-h-full object-contain select-none touch-none",draggable:!1})})}),e.length>1&&(0,s.jsxs)("div",{className:"flex justify-between items-center p-2 sm:p-4",children:[(0,s.jsx)("button",{onClick:$,title:"Previous image",className:"p-2 sm:p-3 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-all touch-manipulation",disabled:0===x,children:(0,s.jsx)(l.ChevronLeft,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,s.jsxs)("div",{className:"text-white text-xs sm:text-sm",children:[x+1," / ",e.length]}),(0,s.jsx)("button",{onClick:A,title:"Next image",className:"p-2 sm:p-3 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-all touch-manipulation",disabled:x===e.length-1,children:(0,s.jsx)(i.ChevronRight,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),(0,s.jsx)("div",{className:"block sm:hidden text-center text-white text-xs opacity-75 p-2",children:(0,s.jsx)("p",{children:"Swipe to navigate â€¢ Pinch to zoom â€¢ Double-tap to zoom"})})]})})}e.s(["default",()=>o],74040)},7640,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(22016),l=e.i(48148),i=e.i(55436),r=e.i(94351),n=e.i(5125),c=e.i(1107),d=e.i(88844),o=e.i(98919),m=e.i(61911),x=e.i(25652),h=e.i(72520),g=e.i(46897),u=e.i(87316),p=e.i(19455),y=e.i(15288),f=e.i(52200),j=e.i(87486),N=e.i(19147),v=e.i(41383),b=e.i(42347),w=e.i(70253),k=e.i(74040),C=e.i(90676);function _(){let e=(0,l.useTranslations)(),[_,M]=(0,t.useState)(""),[S,E]=(0,t.useState)([]),[D,L]=(0,t.useState)(!0),[T,$]=(0,t.useState)(!1),[A,B]=(0,t.useState)(!0),[R,z]=(0,t.useState)(0),[I,U]=(0,t.useState)("all"),[P,W]=(0,t.useState)("created_at"),[X,Y]=(0,t.useState)(0),[H,F]=(0,t.useState)([]),[q,V]=(0,t.useState)(!1),[O,K]=(0,t.useState)(0);(0,t.useRef)(null);let Z=(0,t.useRef)(null),J=async(e,s=!1)=>{try{s?$(!0):L(!0);let t=(0,C.getSupabaseClient)().from("listings").select(`
          *,
          seller:users!listings_seller_id_fkey(
            full_name,
            email
          ),
          media:listing_media(
            url,
            media_type,
            is_primary,
            order_index
          ).order('is_primary', { ascending: false }).order('order_index', { ascending: true }),
          house_details,
          car_details,
          land_details,
          other_item_details
        `,{count:"exact"}).eq("status","available");"all"!==I&&(t=t.eq("category",I)),_.trim()&&(t=t.or(`title.ilike.%${_}%,description.ilike.%${_}%`)),t=t.order(P,{ascending:!1}).range(20*e,(e+1)*20-1);let{data:a,error:l,count:i}=await t;if(l)console.error("Error fetching listings:",l);else{s?E(e=>[...e,...a||[]]):(E(a||[]),Y(i||0));let t=20===(a?.length||0)&&(e+1)*20<(i||0);B(t),s||z(0)}}catch(e){console.error("Error:",e)}finally{L(!1),$(!1)}};(0,t.useEffect)(()=>{J(0,!1)},[I,P]),(0,t.useEffect)(()=>{let e=setTimeout(()=>{0===R&&J(0,!1)},500);return()=>clearTimeout(e)},[_]);let G=(e,s)=>new Intl.NumberFormat("en-RW",{style:"currency",currency:"RWF"===s?"RWF":"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Q=[{name:e("listing.houses"),href:"/listings/houses",icon:r.Home,description:e("homepage.categories.housesDescription"),color:"bg-blue-500",count:"1,234"},{name:e("listing.cars"),href:"/listings/cars",icon:n.Car,description:e("homepage.categories.carsDescription"),color:"bg-green-500",count:"856"},{name:e("listing.land"),href:"/listings/land",icon:c.Trees,description:e("homepage.categories.landDescription"),color:"bg-yellow-500",count:"432"},{name:e("listing.other"),href:"/listings/other",icon:d.Package,description:e("homepage.categories.otherDescription"),color:"bg-purple-500",count:"2,156"}],ee=[{label:e("homepage.stats.activeListings"),value:"4,678",icon:d.Package},{label:e("homepage.stats.verifiedUsers"),value:"12,456",icon:m.Users},{label:e("homepage.stats.successfulTransactions"),value:"3,234",icon:x.TrendingUp},{label:e("homepage.stats.trustScore"),value:"98.5%",icon:o.Shield}];return(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsxs)("section",{className:"relative bg-gradient-to-r from-red-600 to-red-700 text-white py-20 overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,s.jsx)("img",{src:"/images/ikazeproperty-logo.svg",alt:"Ikaze Property Background",className:"absolute top-10 right-10 w-64 h-64 object-contain transform rotate-12"}),(0,s.jsx)("img",{src:"/images/ikazeproperty-logo.svg",alt:"Ikaze Property Background",className:"absolute bottom-10 left-10 w-48 h-48 object-contain transform -rotate-12"})]}),(0,s.jsx)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:e("homepage.hero.title")}),(0,s.jsx)("p",{className:"text-xl md:text-2xl mb-8 text-red-100",children:e("homepage.hero.subtitle")}),(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),z(0),J(0,!1)},className:"max-w-2xl mx-auto",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(i.Search,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,s.jsx)("input",{type:"text",value:_,onChange:e=>M(e.target.value),placeholder:e("homepage.hero.searchPlaceholder"),className:"w-full pl-10 pr-4 py-3 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white"})]}),(0,s.jsx)(p.Button,{type:"submit",className:"bg-white text-red-600 hover:bg-gray-100 px-8",children:e("common.search")})]})})]})})]}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"py-6",children:(0,s.jsx)(N.HomepageLeaderboard,{})})}),(0,s.jsx)("section",{className:"py-16 bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsx)("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:e("homepage.categories.title")}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:e("homepage.categories.subtitle")})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Q.map(e=>{let t=e.icon;return(0,s.jsx)(a.default,{href:e.href,children:(0,s.jsx)(y.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer group",children:(0,s.jsxs)(y.CardContent,{className:"p-6",children:[(0,s.jsx)("div",{className:`${e.color} w-12 h-12 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`,children:(0,s.jsx)(t,{className:"h-6 w-6 text-white"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.name}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-2xl font-bold text-red-600",children:e.count}),(0,s.jsx)(h.ArrowRight,{className:"h-5 w-5 text-gray-400 group-hover:text-red-600 transition-colors"})]})]})})},e.name)})})]})}),q&&(0,s.jsx)(k.default,{images:H,initialIndex:O,isOpen:q,onClose:()=>{V(!1),F([]),K(0)}}),(0,s.jsxs)("section",{className:"py-16",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-12 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:e("homepage.listings.title")}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:X>0?e("homepage.listings.showing",{count:S.length,total:X}):e("homepage.listings.browseAll")})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full lg:w-auto",children:[(0,s.jsxs)("select",{value:I,onChange:e=>{U(e.target.value),z(0)},className:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm","aria-label":e("homepage.filters.filterByCategory"),title:e("homepage.filters.filterByCategory"),children:[(0,s.jsx)("option",{value:"all",children:e("homepage.filters.allCategories")}),(0,s.jsx)("option",{value:"houses",children:e("listing.houses")}),(0,s.jsx)("option",{value:"cars",children:e("listing.cars")}),(0,s.jsx)("option",{value:"land",children:e("listing.land")}),(0,s.jsx)("option",{value:"other",children:e("listing.other")})]}),(0,s.jsxs)("select",{value:P,onChange:e=>{W(e.target.value),z(0)},className:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm","aria-label":e("homepage.filters.sortListings"),title:e("homepage.filters.sortListings"),children:[(0,s.jsx)("option",{value:"created_at",children:e("homepage.filters.newestFirst")}),(0,s.jsx)("option",{value:"price",children:e("homepage.filters.priceLowToHigh")}),(0,s.jsx)("option",{value:"views",children:e("homepage.filters.mostViewed")}),(0,s.jsx)("option",{value:"likes",children:e("homepage.filters.mostLiked")})]})]})]}),D&&0===S.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:e("homepage.listings.loading")})]}):0===S.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"ðŸ”"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e("homepage.listings.noListings")}),(0,s.jsx)("p",{className:"text-gray-600",children:_||"all"!==I?e("homepage.listings.tryAdjustingFilters"):e("homepage.listings.checkBackLater")})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map((t,l)=>(0,s.jsxs)(y.Card,{ref:l===S.length-3?Z:void 0,className:"hover:shadow-xl transition-all duration-300 hover:scale-105 group cursor-pointer border border-gray-200 hover:border-red-300",onClick:()=>window.open(`/listings/${t.category}/${t.id}`,"_blank"),children:[(0,s.jsx)(y.CardHeader,{className:"pb-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(j.Badge,{className:`${(e=>{switch(e){case"houses":return"bg-blue-100 text-blue-800";case"cars":return"bg-green-100 text-green-800";case"land":return"bg-yellow-100 text-yellow-800";default:return"bg-purple-100 text-purple-800"}})(t.category)} border-0`,children:[(e=>{switch(e){case"houses":return"ðŸ ";case"cars":return"ðŸš—";case"land":return"ðŸŒ³";default:return"ðŸ“¦"}})(t.category)," ",t.category]}),(0,s.jsxs)("div",{className:"flex-1",children:[t.featured&&(0,s.jsxs)(j.Badge,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 ml-2",children:["â­ ",e("homepage.listings.featured")]}),t.promoted&&(0,s.jsxs)(j.Badge,{variant:"secondary",className:"bg-red-100 text-red-800 ml-2",children:["ðŸš€ ",e("homepage.listings.promoted")]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl font-bold text-red-600 mb-1",children:G(t.price,t.currency)}),"negotiable"===t.price_type&&(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e("listing.negotiable"),")"]})]})]})}),(0,s.jsxs)(y.CardContent,{className:"p-6",children:[(0,s.jsx)("div",{className:"mb-4",children:t.media&&t.media.length>0?(0,s.jsxs)("div",{className:"relative",children:["video"===t.media[0].media_type?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("video",{src:t.media[0].url,className:"w-full h-56 object-cover rounded-lg",muted:!0,playsInline:!0,poster:t.media[0].url}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 rounded-lg",children:(0,s.jsx)("div",{className:"w-12 h-12 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-gray-800",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 004 4.11L6.3 2.841A1.5 1.5 0 004 4.11z"})})})})]}):(0,s.jsx)("img",{src:t.media[0].url,alt:t.title,className:"w-full h-56 object-cover rounded-lg cursor-pointer",onClick:()=>{var e;return e=t.media.filter(e=>"image"===e.media_type).map(e=>e.url),void(F(e),K(0),V(!0))}}),t.media[0].is_primary&&(0,s.jsx)(j.Badge,{className:"absolute top-2 left-2 bg-red-600 text-white text-xs",children:e("homepage.listings.primary")})]}):(0,s.jsx)("div",{className:"w-full h-56 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-gray-400 text-4xl mb-2",children:"ðŸ“·"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:e("homepage.listings.noMedia")})]})})}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-red-600 mb-3",children:[G(t.price,t.currency),"negotiable"===t.price_type&&(0,s.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",e("listing.negotiable"),")"]})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:t.description})}),(0,s.jsx)(w.default,{category:t.category,listing:t,className:"mb-3"}),t.location&&"object"==typeof t.location&&(0,s.jsxs)("div",{className:"flex items-center text-gray-500 text-sm mb-3",children:[(0,s.jsx)(g.MapPin,{className:"h-4 w-4 mr-1"}),t.location?.district||e("homepage.listings.locationNotSpecified")]}),(0,s.jsx)(f.default,{className:"mb-4"}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(b.default,{listingId:t.id,viewsCount:t.views||0,className:"text-xs"}),(0,s.jsx)(v.default,{listingId:t.id,likesCount:t.likes||0,className:"text-xs ml-3"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(u.Calendar,{className:"h-4 w-4"}),new Date(t.created_at).toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e("homepage.listings.listedBy")}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:t.seller?.full_name||e("homepage.listings.anonymous")})]}),(0,s.jsx)(a.default,{href:`/listings/${t.category}/${t.id}`,children:(0,s.jsx)(p.Button,{children:e("homepage.listings.viewDetails")})})]})]})]},t.id))}),T&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:e("homepage.listings.loadingMore")})]}),!A&&S.length>0&&(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-600",children:S.length===X?e("homepage.listings.reachedEnd",{total:X}):e("homepage.listings.noMoreListings")})})]}),(0,s.jsx)("div",{className:"hidden lg:block",children:(0,s.jsx)("div",{className:"ml-6",children:(0,s.jsx)(N.HomepageSidebar,{})})})]}),(0,s.jsx)("section",{className:"py-16 bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsx)("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:e("homepage.stats.title")}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:e("homepage.stats.subtitle")})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:ee.map(e=>{let t=e.icon;return(0,s.jsx)(y.Card,{children:(0,s.jsxs)(y.CardContent,{className:"p-6 text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(t,{className:"h-6 w-6 text-red-600"})}),(0,s.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:e.value}),(0,s.jsx)("div",{className:"text-gray-600",children:e.label})]})},e.label)})})]})}),(0,s.jsx)("section",{className:"py-16",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsx)("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:e("homepage.howItWorks.title")}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:e("homepage.howItWorks.subtitle")})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("span",{className:"text-white font-bold text-xl",children:"1"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:e("homepage.howItWorks.step1.title")}),(0,s.jsx)("p",{className:"text-gray-600",children:e("homepage.howItWorks.step1.description")})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("span",{className:"text-white font-bold text-xl",children:"2"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:e("homepage.howItWorks.step2.title")}),(0,s.jsx)("p",{className:"text-gray-600",children:e("homepage.howItWorks.step2.description")})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("span",{className:"text-white font-bold text-xl",children:"3"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:e("homepage.howItWorks.step3.title")}),(0,s.jsx)("p",{className:"text-gray-600",children:e("homepage.howItWorks.step3.description")})]})]})]})}),(0,s.jsx)("section",{className:"py-16 bg-red-600 text-white",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,s.jsx)("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:e("homepage.cta.title")}),(0,s.jsx)("p",{className:"text-xl mb-8 text-red-100",children:e("homepage.cta.subtitle")}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,s.jsx)(a.default,{href:"/create-listing",children:(0,s.jsx)(p.Button,{size:"lg",className:"bg-white text-red-600 hover:bg-gray-100",asChild:!0,children:e("homepage.cta.startSelling")})}),(0,s.jsx)(a.default,{href:"/listings",children:(0,s.jsx)(p.Button,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white hover:text-red-600",asChild:!0,children:e("homepage.cta.browseListings")})})]})]})})]})}e.s(["default",()=>_])}]);