(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59999,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(18566),a=e.i(86909);function i(){let e=(0,t.useRouter)(),[i,n]=(0,r.useState)(!0),[l,o]=(0,r.useState)(null);return((0,r.useEffect)(()=>{(async()=>{try{let{data:s,error:r}=await a.supabase.auth.getSession();if(r){console.error("Auth callback error:",r),o("Authentication failed. Please try again."),setTimeout(()=>{e.push("/login")},3e3);return}if(s.session){console.log("User authenticated:",s.session.user);let{data:r,error:t}=await a.supabase.from("users").select("*").eq("id",s.session.user.id).single();if(t&&"PGRST116"===t.code){let{error:e}=await a.supabase.from("users").insert({email:s.session.user.email||"",full_name:s.session.user.user_metadata?.full_name||s.session.user.user_metadata?.name||null,avatar_url:s.session.user.user_metadata?.avatar_url||null,role:"user",verified:!0});e&&console.error("Error creating profile:",e)}e.push("/dashboard")}else e.push("/login")}catch(s){console.error("Callback error:",s),o("An error occurred during authentication."),setTimeout(()=>{e.push("/login")},3e3)}finally{n(!1)}})()},[e]),i)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Completing sign in..."})]})}):l?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-red-600 mb-4",children:(0,s.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsx)("p",{className:"text-gray-600",children:l}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Redirecting to login page..."})]})}):null}e.s(["default",()=>i])}]);