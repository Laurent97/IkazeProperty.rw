(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,s.jsx)("div",{ref:r,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));r.displayName="Card";let d=a.forwardRef(({className:e,...a},r)=>(0,s.jsx)("div",{ref:r,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",e),...a}));d.displayName="CardHeader";let l=a.forwardRef(({className:e,...a},r)=>(0,s.jsx)("h3",{ref:r,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle",a.forwardRef(({className:e,...a},r)=>(0,s.jsx)("p",{ref:r,className:(0,t.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let i=a.forwardRef(({className:e,...a},r)=>(0,s.jsx)("div",{ref:r,className:(0,t.cn)("p-6 pt-0",e),...a}));i.displayName="CardContent",a.forwardRef(({className:e,...a},r)=>(0,s.jsx)("div",{ref:r,className:(0,t.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>i,"CardHeader",()=>d,"CardTitle",()=>l])},15690,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(19455),r=e.i(15288);function d(){let[e,d]=(0,a.useState)(!1),[l,i]=(0,a.useState)(null),[c,n]=(0,a.useState)(null),[x,m]=(0,a.useState)(""),o=async()=>{try{let e=await fetch("/api/batch-watermark",{method:"GET"}),s=await e.json();i(s)}catch(e){m("Failed to fetch statistics")}},h=async(e=!1)=>{d(!0),m("");try{let s=await fetch("/api/batch-watermark",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({batchSize:25,dryRun:e})}),a=await s.json();a.success?(n(a),await o()):m(a.error||"Processing failed")}catch(e){m("Failed to process batch")}finally{d(!1)}};return(0,a.useEffect)(()=>{o()},[]),(0,s.jsxs)("div",{className:"container mx-auto p-6 max-w-4xl",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Watermark Manager"}),(0,s.jsx)("p",{className:"text-gray-600",children:'Apply "www.ikazeproperty.org" watermarks to existing images'})]}),l&&(0,s.jsxs)(r.Card,{className:"mb-6",children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{children:"Watermark Statistics"})}),(0,s.jsx)(r.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:l.total}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Total Images"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:l.watermarked}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Watermarked"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:l.unwatermarked}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Need Watermark"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[l.percentage,"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Complete"})]})]})})]}),(0,s.jsxs)(r.Card,{className:"mb-6",children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{children:"Actions"})}),(0,s.jsx)(r.CardContent,{children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(t.Button,{onClick:()=>h(!0),disabled:e,variant:"outline",children:"Dry Run (Preview)"}),(0,s.jsx)(t.Button,{onClick:()=>h(!1),disabled:e,className:"bg-red-600 hover:bg-red-700",children:e?"Processing...":"Apply Watermarks (25 images)"})]})})]}),c&&(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{children:"Processing Results"})}),(0,s.jsxs)(r.CardContent,{children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium",children:"Total Processed:"}),(0,s.jsx)("span",{className:"font-bold",children:c.total})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium",children:"Successful:"}),(0,s.jsx)("span",{className:"font-bold text-green-600",children:c.processed})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium",children:"Failed:"}),(0,s.jsx)("span",{className:"font-bold text-red-600",children:c.failed})]})]}),c.results&&c.results.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Processed Images:"}),(0,s.jsx)("div",{className:"max-h-60 overflow-y-auto space-y-1",children:c.results.map((e,a)=>(0,s.jsxs)("div",{className:`p-3 rounded border ${e.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"font-medium text-sm",children:["ID: ",e.id]}),e.listing_title&&(0,s.jsxs)("div",{className:"text-xs text-gray-600",children:["Listing: ",e.listing_title]})]}),(0,s.jsx)("div",{className:`text-xs px-2 py-1 rounded ${e.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.success?"Success":"Failed"})]}),e.error&&(0,s.jsxs)("div",{className:"text-xs text-red-600 mt-1",children:["Error: ",e.error]})]},a))})]})]})]}),x&&(0,s.jsx)(r.Card,{children:(0,s.jsx)(r.CardContent,{children:(0,s.jsx)("div",{className:"text-red-600",children:x})})})]})}e.s(["default",()=>d])}]);