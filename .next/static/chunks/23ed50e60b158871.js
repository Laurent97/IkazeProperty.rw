(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51132,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),i=e.i(71689),l=e.i(46897),r=e.i(84614),n=e.i(19455),d=e.i(15288),c=e.i(87486),o=e.i(52200),m=e.i(23066),x=e.i(86311),h=e.i(63209),u=e.i(69638),p=e.i(57951);function g({listingId:a,sellerId:i,title:l,className:r=""}){let{user:c,isLoading:o}=(0,p.useAuth)(),[m,g]=(0,t.useState)(!1),[y,j]=(0,t.useState)(""),[f,N]=(0,t.useState)(!1),[_,b]=(0,t.useState)(""),[v,w]=(0,t.useState)(!1),C=async s=>{s.preventDefault(),N(!0),b("");try{if(!c){window.location.href="/auth/login";return}let{supabaseClient:s}=await e.A(9553),{data:{session:t}}=await s.auth.getSession();if(!t?.access_token){b("Authentication session expired. Please log in again."),window.location.href="/auth/login";return}let i=await fetch("/api/inquiries",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.access_token}`},body:JSON.stringify({listing_id:a,message:y.trim()})}),l=await i.json();if(!i.ok)throw Error(l.error||"Failed to submit inquiry");w(!0),j(""),setTimeout(()=>{g(!1),w(!1)},3e3)}catch(e){b(e.message||"Failed to submit inquiry")}finally{N(!1)}};return m?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)(d.Card,{className:"w-full max-w-md",children:(0,s.jsxs)(d.CardContent,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Express Interest"}),(0,s.jsx)("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:"Ã—"})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Listing: ",(0,s.jsx)("strong",{children:l})]})}),v?(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[(0,s.jsx)(u.CheckCircle,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),(0,s.jsx)("h4",{className:"font-semibold text-green-800 mb-1",children:"Inquiry Submitted!"}),(0,s.jsx)("p",{className:"text-sm text-green-700",children:"Your inquiry has been sent for admin review. You'll be notified once it's approved."})]}):(0,s.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[_&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-center",children:[(0,s.jsx)(h.AlertCircle,{className:"h-4 w-4 text-red-600 mr-2"}),(0,s.jsx)("span",{className:"text-red-800 text-sm",children:_})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Message *"}),(0,s.jsx)("textarea",{value:y,onChange:e=>j(e.target.value),placeholder:"Introduce yourself and express your interest in this listing...",rows:4,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>g(!1),className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)(n.Button,{type:"submit",disabled:f||!y.trim(),className:"flex-1 bg-red-600 hover:bg-red-700",children:f?"Submitting...":"Submit Inquiry"})]})]})]})})}):(0,s.jsxs)(n.Button,{onClick:()=>{if(!c){window.location.href="/auth/login";return}g(!0)},disabled:o,className:`bg-red-600 hover:bg-red-700 ${r}`,children:[(0,s.jsx)(x.MessageSquare,{className:"h-4 w-4 mr-2"}),o?"Loading...":c?"Express Interest":"Login to Inquire"]})}var y=e.i(75240);function j(){let x=(0,a.useRouter)(),h=(0,a.useParams)(),{category:u,id:p}=h;console.log("ðŸ” Route params:",h),console.log("Raw ID:",p,"Type:",typeof p,'Is string "undefined":',"undefined"===p),p&&"undefined"!==p&&"null"!==p||(console.error("âŒ Invalid ID provided:",p),(0,a.notFound)());let{paymentSettings:j}=(0,y.usePaymentContext)(),[f,N]=(0,t.useState)(null),[_,b]=(0,t.useState)([]),[v,w]=(0,t.useState)(!0),[C,k]=(0,t.useState)(0),[S,A]=(0,t.useState)([]),[P,T]=(0,t.useState)(""),[z,q]=(0,t.useState)(!1),[M,B]=(0,t.useState)("mtn_momo"),[L,I]=(0,t.useState)(!1),[F,D]=(0,t.useState)(""),[O,E]=(0,t.useState)(""),[H,R]=(0,t.useState)(null),[V,Y]=(0,t.useState)(null),[$,U]=(0,t.useState)("details"),[W,J]=(0,t.useState)([]),[K]=(0,t.useState)(15e3),G=async s=>{try{let{supabaseClient:t}=await e.A(9553),{data:a,error:i}=await t.from("listings").select(`
          id,
          title,
          price,
          currency,
          location,
          transaction_type,
          price_type,
          media:listing_media(
            url,
            media_type
          ).order('is_primary', { ascending: false }).limit(1)
        `).eq("category",s.category).eq("status","available").neq("id",s.id).limit(6).order("created_at",{ascending:!1});i?console.error("Error fetching similar listings:",i):A(a||[])}catch(e){console.error("Error fetching similar listings:",e)}};if((0,t.useEffect)(()=>{let s=!0;return(async()=>{if(console.log("ðŸ” fetchListing called with id:",p,typeof p),!p||"undefined"===p||"null"===p){console.log("âš ï¸ Invalid ID provided, returning early"),s&&(w(!1),T("Invalid listing ID"));return}w(!0),T("");try{let{supabaseClient:t}=await e.A(9553);console.log("ðŸ“‹ Fetching listing with ID:",p);let{data:a,error:i}=await t.from("listings").select(`
            *,
            seller:users!listings_seller_id_fkey(
              id,
              full_name,
              email,
              avatar_url
            ),
            listing_media(
              id,
              url,
              public_id,
              media_type,
              order_index,
              is_primary
            ),
            house_details(
              id,
              listing_id,
              property_type,
              bedrooms,
              bathrooms,
              total_area,
              year_built,
              condition,
              furnished,
              parking,
              features,
              utilities_included,
              rent_duration,
              security_deposit,
              advance_payment,
              minimum_lease_period,
              available_from
            ),
            car_details(
              id,
              listing_id,
              vehicle_type,
              make,
              model,
              year_manufacture,
              condition,
              fuel_type,
              transmission,
              engine_capacity,
              mileage,
              color,
              doors,
              seats,
              features,
              ownership_papers,
              insurance_status,
              road_worthiness,
              last_service_date,
              rental_daily_rate,
              rental_weekly_rate,
              rental_monthly_rate,
              security_deposit,
              minimum_rental_period,
              delivery_option,
              driver_included
            ),
            land_details(
              id,
              listing_id,
              plot_type,
              plot_size,
              size_unit,
              shape,
              topography,
              soil_type,
              road_access,
              fenced,
              utilities_available,
              land_title_type,
              title_deed_number,
              surveyed,
              zoning_approval,
              development_permits,
              tax_clearance,
              nearest_main_road_distance,
              nearest_town_distance,
              nearby_amenities
            ),
            other_item_details(
              id,
              listing_id,
              subcategory,
              brand,
              model,
              condition,
              warranty_available,
              warranty_period,
              reason_for_selling,
              original_purchase_date,
              age_of_item
            )
          `).eq("id",p).single();if(i||!a||(console.log("ðŸ“‹ Full listing data:",a),console.log("ðŸš— Car details in listing:",a.car_details),console.log("ðŸ  House details in listing:",a.house_details),console.log("ðŸŒ³ Land details in listing:",a.land_details),a.category!==u)){s&&(T("Listing not found"),w(!1));return}let{data:l,error:r}=await t.from("listing_media").select("*").eq("listing_id",p).order("order_index",{ascending:!0});console.log("ðŸ“¸ Media query result:",{listingId:p,mediaData:l,mediaError:r,mediaCount:l?.length||0}),s&&(N(a),b(l||[]),k(0),w(!1)),a&&G(a)}catch(e){console.error("Error fetching listing:",e),s&&(T("Listing not found"),w(!1))}})(),()=>{s=!1}},[u,p]),v)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 no-overflow-x",children:(0,s.jsx)("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 lg:px-6 lg:px-8 py-4 sm:py-8",children:(0,s.jsx)("p",{className:"text-gray-600 text-sm sm:text-base",children:"Loading listing..."})})});if(P||!f)return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 no-overflow-x",children:[(0,s.jsxs)("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 lg:px-6 lg:px-8 py-4 sm:py-8",children:[(0,s.jsxs)(n.Button,{variant:"outline",onClick:()=>x.back(),className:"touch-target",children:[(0,s.jsx)(i.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,s.jsx)("div",{className:"mt-4 sm:mt-6 text-gray-700 text-sm sm:text-base",children:P||"Listing not found"})]}),S.length>0&&(0,s.jsx)("div",{className:"mt-12",children:(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:"Similar Items You Might Like"})}),(0,s.jsx)(d.CardContent,{children:(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:S.map(e=>{let t;return(0,s.jsx)(d.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer touch-target",children:(0,s.jsxs)(d.CardContent,{className:"p-3 sm:p-4",children:[(0,s.jsx)("div",{className:"relative",children:e.media&&e.media.length>0?(0,s.jsx)("img",{src:e.media[0].url,alt:e.title,className:"w-full h-24 sm:h-28 md:h-32 object-cover rounded-lg"}):(0,s.jsxs)("div",{className:"w-full h-24 sm:h-28 md:h-32 bg-gray-200 rounded-lg flex items-center justify-center",children:[(0,s.jsx)("div",{className:"text-gray-400 text-2xl sm:text-3xl mb-1 sm:mb-2",children:"ðŸ“·"}),(0,s.jsx)("p",{className:"text-gray-500 text-xs sm:text-sm",children:"No media available"})]})}),(0,s.jsxs)("div",{className:"mt-2 sm:mt-3",children:[(0,s.jsx)("h4",{className:"text-sm sm:text-base lg:text-lg font-semibold text-gray-900 mb-1 line-clamp-1",children:e.title}),(0,s.jsxs)("div",{className:"text-base sm:text-lg lg:text-xl font-bold text-red-600 mb-1 sm:mb-2",children:[e.currency," ",e.price?.toLocaleString()]}),(0,s.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600 capitalize",children:[e.transaction_type," â€¢ ",e.price_type]}),(0,s.jsxs)("div",{className:"flex items-center text-xs sm:text-sm text-gray-500 mt-1",children:[(0,s.jsx)(l.MapPin,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),(console.log("ðŸ“ Similar listing location:",t=e.location),t)?"string"==typeof t?t:"object"==typeof t&&null!==t&&(t.district||t.sector||t.province)||"Location not specified":"Location not specified"]})]})]})},e.id)})})})]})})]});_.find(e=>e.is_primary)||_[0];let Z=f.price?.toLocaleString()||"0",Q=f.location,X=e=>"string"==typeof e?e:"object"==typeof e&&null!==e?Object.values(e).filter(Boolean).join(", "):"",ee=e=>!e||e.length<4?e:e.slice(0,3)+"*".repeat(e.length-4)+e.slice(-2),es=f.visit_fee_payment_methods||{},et=async()=>{try{let e=await fetch("/api/payments/methods"),s=await e.json();if(e.ok&&s?.methods){let e=s.methods.filter(e=>e.isActive).map(e=>e.id);J(e),e.length>0&&B(e[0])}}catch(e){console.error("Error loading payment methods:",e)}},ea=async()=>{I(!0),D(""),E("");try{let{supabaseClient:s}=await e.A(9553),{data:{session:t}}=await s.auth.getSession();if(!t?.access_token)return void D("Please login to request a visit");let a={listing_id:f.id,payment_method:M,visit_fee:K};if("mtn_momo"===M?(a.phone_number=j?.mobile_money_details?.mtn?.phone_number||"",a.account_name=j?.mobile_money_details?.mtn?.account_name||"",a.merchant_id=j?.mobile_money_details?.mtn?.merchant_id||""):"airtel_money"===M?(a.phone_number=j?.mobile_money_details?.airtel?.phone_number||"",a.account_name=j?.mobile_money_details?.airtel?.account_name||"",a.merchant_id=j?.mobile_money_details?.airtel?.merchant_id||""):"equity_bank"===M?(a.bank_name=j?.bank_details?.bank_name||"",a.account_name=j?.bank_details?.account_name||"",a.account_number=j?.bank_details?.account_number||"",a.branch_code=j?.bank_details?.branch_code||""):"crypto"===M&&(a.crypto_type="bitcoin",a.wallet_address=""),H){let e=new FormData;e.append("screenshot",H),a.screenshot=e}if(V){let e=new FormData;e.append("proof",V),a.proof=e}let i=await fetch("/api/visits",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.access_token}`},body:JSON.stringify(a)}),l=await i.json();if(!i.ok)return void D(l.error||"Failed to request visit");U("proof"),E("Thank you for your payment. Please allow 10-20 minutes for payment confirmation. Once verified, you will receive a call to schedule your visit dates and provide you with the details of the assigned agent who will conduct the property tour."),q(!1)}catch(e){D(e.message||"Failed to request visit")}finally{I(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsxs)("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 lg:px-6 lg:px-8 py-4 sm:py-8",children:[(0,s.jsxs)(n.Button,{variant:"outline",onClick:()=>x.back(),className:"touch-target",children:[(0,s.jsx)(i.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,s.jsxs)("div",{className:"mt-4 sm:mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[(0,s.jsx)(d.Card,{children:(0,s.jsx)(d.CardContent,{className:"p-0",children:(0,s.jsx)("div",{className:"relative",children:_.length>0?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative group",children:[_[C]?.media_type==="video"?(0,s.jsxs)("div",{className:"relative aspect-video bg-gray-100 rounded-lg overflow-hidden",children:[(0,s.jsx)("video",{src:_[C].url,className:"w-full h-48 sm:h-64 md:h-80 lg:h-96 object-cover",controls:!0,autoPlay:!1}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 lg:w-16 lg:h-16 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 sm:w-7 sm:h-7 lg:w-8 lg:h-8 text-gray-800",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):(0,s.jsx)("img",{src:_[C]?.url,alt:f.title,className:"w-full h-48 sm:h-64 md:h-80 lg:h-96 object-cover rounded-lg"}),_.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>k(e=>0===e?_.length-1:e-1),className:"absolute left-2 sm:left-4 top-1/2 transform -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 bg-white bg-opacity-90 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg touch-target","aria-label":"Previous image",children:(0,s.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,s.jsx)("button",{onClick:()=>k(e=>(e+1)%_.length),className:"absolute right-2 sm:right-4 top-1/2 transform -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 bg-white bg-opacity-90 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg touch-target","aria-label":"Next image",children:(0,s.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),_[C]?.is_primary&&(0,s.jsx)(c.Badge,{className:"absolute top-2 sm:top-4 left-2 sm:left-4 bg-red-600 text-white text-xs",children:"Primary"}),_[C]?.media_type==="video"&&(0,s.jsx)(c.Badge,{className:"absolute top-2 sm:top-4 right-2 sm:right-4 bg-blue-600 text-white text-xs",children:"Video"})]}),_.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-1.5 sm:gap-2 mt-3 sm:mt-4",children:_.map((e,t)=>(0,s.jsxs)("div",{className:`relative group cursor-pointer ${C===t?"ring-2 ring-blue-500 rounded-lg":""}`,onClick:()=>k(t),children:["video"===e.media_type?(0,s.jsxs)("div",{className:"relative aspect-video bg-gray-100 rounded-lg overflow-hidden",children:[(0,s.jsx)("video",{src:e.url,className:"w-full h-full object-cover",muted:!0,onMouseEnter:e=>{let s=e.target;s&&s.play()},onMouseLeave:e=>{let s=e.target;s&&s.pause()}}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})]}):(0,s.jsx)("img",{src:e.url,alt:`${f.title} - ${t+1}`,className:"w-full h-14 sm:h-16 md:h-20 object-cover rounded-lg"}),e.is_primary&&(0,s.jsx)("div",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]},e.id))}),(0,s.jsx)("div",{className:"flex justify-center space-x-1.5 sm:space-x-2 mt-3 sm:mt-4",children:_.map((e,t)=>(0,s.jsx)("button",{onClick:()=>k(t),className:`w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-colors touch-target ${C===t?"bg-blue-600":"bg-gray-300 hover:bg-gray-400"}`,"aria-label":`Go to image ${t+1}`},t))})]})]}):(0,s.jsx)("div",{className:"w-full h-48 sm:h-64 md:h-80 lg:h-96 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-gray-400 text-4xl sm:text-5xl md:text-6xl mb-2",children:"ðŸ“·"}),(0,s.jsx)("p",{className:"text-gray-500 text-xs sm:text-sm",children:"No media available"})]})})})})}),(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:"Description"})}),(0,s.jsx)(d.CardContent,{children:(0,s.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:f.description})})]}),(()=>{if(!f)return null;switch(f.category){case"houses":console.log("ðŸ  House details data:",f.house_details),console.log("ðŸ  House details keys:",f.house_details?Object.keys(f.house_details):"null");let e=f.house_details,t=Array.isArray(e)?e[0]:e;if(console.log("ðŸ  Processed house details:",t),!t)return null;return(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:"Property Details"})}),(0,s.jsx)(d.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Property Type"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:t?.property_type||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Condition"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:t?.condition||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Bedrooms"}),(0,s.jsx)("p",{className:"font-medium",children:t?.bedrooms||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Bathrooms"}),(0,s.jsx)("p",{className:"font-medium",children:t?.bathrooms||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Total Area"}),(0,s.jsxs)("p",{className:"font-medium",children:[t?.total_area||"Not specified"," mÂ²"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Year Built"}),(0,s.jsx)("p",{className:"font-medium",children:t?.year_built||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Furnished"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:t?.furnished||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Parking"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:t?.parking||"Not specified"})]})]})})]});case"cars":console.log("ðŸš— Car details data:",f.car_details),console.log("ðŸš— Car details keys:",f.car_details?Object.keys(f.car_details):"null");let a=f.car_details,i=Array.isArray(a)?a[0]:a;if(console.log("ðŸš— Processed car details:",i),!i)return null;return(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:"Vehicle Details"})}),(0,s.jsx)(d.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Vehicle Type"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:i?.vehicle_type||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Condition"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:i?.condition||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Make"}),(0,s.jsx)("p",{className:"font-medium",children:i?.make||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Model"}),(0,s.jsx)("p",{className:"font-medium",children:i?.model||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Year Manufacture"}),(0,s.jsx)("p",{className:"font-medium",children:i?.year_manufacture||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Mileage"}),(0,s.jsxs)("p",{className:"font-medium",children:[i?.mileage||"Not specified"," km"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Fuel Type"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:i?.fuel_type||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Transmission"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:i?.transmission||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Color"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:i?.color||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Doors"}),(0,s.jsx)("p",{className:"font-medium",children:i?.doors||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Seats"}),(0,s.jsx)("p",{className:"font-medium",children:i?.seats||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Engine Capacity"}),(0,s.jsxs)("p",{className:"font-medium",children:[i?.engine_capacity||"Not specified"," cc"]})]})]})})]});case"land":console.log("ðŸŒ³ Land details data:",f.land_details),console.log("ðŸŒ³ Land details keys:",f.land_details?Object.keys(f.land_details):"null");let l=f.land_details,r=Array.isArray(l)?l[0]:l;if(console.log("ðŸŒ³ Processed land details:",r),!r)return null;return(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:"Land Details"})}),(0,s.jsx)(d.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Plot Type"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:r?.plot_type||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Shape"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:r?.shape||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Plot Size"}),(0,s.jsxs)("p",{className:"font-medium",children:[r?.plot_size||"Not specified"," ",r?.size_unit]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Topography"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:r?.topography||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Road Access"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:r?.road_access||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Land Title Type"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:r?.land_title_type||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Fenced"}),(0,s.jsx)("p",{className:"font-medium",children:r?.fenced?"Yes":"No"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Surveyed"}),(0,s.jsx)("p",{className:"font-medium",children:r?.surveyed?"Yes":"No"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Soil Type"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:r?.soil_type||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Zoning Approval"}),(0,s.jsx)("p",{className:"font-medium",children:r?.zoning_approval?"Yes":"No"})]})]})})]});case"other":console.log("ðŸ“¦ Other item details data:",f.other_item_details),console.log("ðŸ“¦ Other item details keys:",f.other_item_details?Object.keys(f.other_item_details):"null");let n=f.other_item_details,c=Array.isArray(n)?n[0]:n;if(console.log("ðŸ“¦ Processed other item details:",c),!c)return null;return(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:"Item Details"})}),(0,s.jsx)(d.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Subcategory"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:c?.subcategory||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Brand"}),(0,s.jsx)("p",{className:"font-medium",children:c?.brand||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Model"}),(0,s.jsx)("p",{className:"font-medium",children:c?.model||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Condition"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:c?.condition||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Warranty Available"}),(0,s.jsx)("p",{className:"font-medium",children:c?.warranty_available?"Yes":"No"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Warranty Period"}),(0,s.jsx)("p",{className:"font-medium",children:c?.warranty_period||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Reason for Selling"}),(0,s.jsx)("p",{className:"font-medium",children:c?.reason_for_selling||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Original Purchase Date"}),(0,s.jsx)("p",{className:"font-medium",children:c?.original_purchase_date||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Age of Item"}),(0,s.jsx)("p",{className:"font-medium",children:c?.age_of_item||"Not specified"})]})]})})]});default:return null}})()]}),(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:f.title})}),(0,s.jsxs)(d.CardContent,{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:[f.currency," ",Z]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 capitalize",children:[f.transaction_type," â€¢ ",f.price_type]}),(0,s.jsxs)("div",{className:"flex items-start text-sm text-gray-700",children:[(0,s.jsx)(l.MapPin,{className:"h-4 w-4 mr-2 mt-0.5 text-gray-500"}),(0,s.jsx)("div",{children:[X(Q?.address),X(Q?.sector),X(Q?.district),X(Q?.province)].filter(Boolean).join(", ")||"Location not provided"})]})]})]}),(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:"For any questions, ideas, or inquiries, reach out to us on this number"})}),(0,s.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:(0,s.jsx)(r.User,{className:"h-5 w-5 text-gray-500"})}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:f.seller?.full_name||"Unknown Seller"})})]}),(0,s.jsx)(o.default,{})]})]}),(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:"Visit Fee"})}),(0,s.jsxs)(d.CardContent,{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Visit fee: ",(0,s.jsxs)("strong",{children:[f.visit_fee_amount?.toLocaleString()||K.toLocaleString()," RWF"]})]}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"Seller receives 70%. Platform keeps 30%."}),(0,s.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 text-xs text-gray-700 space-y-1",children:[es.mtn_momo?.phone_number&&(0,s.jsxs)("div",{children:["MTN MoMo: ",ee(es.mtn_momo.phone_number)]}),es.airtel_money?.phone_number&&(0,s.jsxs)("div",{children:["Airtel Money: ",ee(es.airtel_money.phone_number)]}),es.equity_bank?.account_number&&(0,s.jsxs)("div",{children:["Equity: ",es.equity_bank.account_name||"Account"," â€¢ ",es.equity_bank.account_number]})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,s.jsx)(g,{listingId:f.id,sellerId:f.seller_id||"",title:f.title,className:"w-full"}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(n.Button,{onClick:()=>{et(),q(!0)},className:"flex-1 bg-red-600 hover:bg-red-700",children:"Request a Visit"}),(0,s.jsx)(m.default,{listingId:f.id,size:"md",className:"flex-shrink-0"})]})]})]})]})]})]})]}),z&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-3 sm:p-4 z-50",children:(0,s.jsx)(d.Card,{className:"w-full max-w-md",children:(0,s.jsxs)(d.CardContent,{className:"p-4 sm:p-6 space-y-3 sm:space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-base sm:text-lg font-semibold",children:"Request a Visit"}),(0,s.jsx)("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600 touch-target p-1","aria-label":"Close modal",children:"Ã—"})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Visit fee: ",(0,s.jsxs)("strong",{children:[K.toLocaleString()," RWF"]})]}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"Seller receives 70%. Platform keeps 30%."}),(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 text-sm text-gray-700",children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Upload payment proof"}),(0,s.jsx)("input",{id:"payment-proof-upload",type:"file",accept:"image/*",onChange:e=>Y(e.target.files?.[0]||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg","aria-label":"Upload payment confirmation",title:"Upload screenshot or photo of payment confirmation"}),V&&(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Proof: ",V.name,(0,s.jsx)("button",{type:"button",onClick:()=>Y(null),className:"ml-2 text-red-500 hover:text-red-700",children:"Remove"})]})]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{htmlFor:"payment-method",className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),(0,s.jsx)("select",{id:"payment-method",value:M,onChange:e=>B(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",title:"Payment Method Selection",children:W.map(e=>(0,s.jsx)("option",{value:e,children:{mtn_momo:"MTN Mobile Money",airtel_money:"Airtel Money",equity_bank:"Equity Bank",crypto:"Cryptocurrency",wallet:"Wallet Balance"}[e]||e},e))}),("mtn_momo"===M||"airtel_money"===M)&&(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"font-medium text-gray-900 mb-3",children:["mtn_momo"===M?"MTN Mobile Money":"Airtel Money"," Payment Details"]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mb-3",children:"Send payment to the number below:"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Phone Number:"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"mtn_momo"===M?j?.mobile_money_details?.mtn?.phone_number||"Not configured":j?.mobile_money_details?.airtel?.phone_number||"Not configured"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Account Name:"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"mtn_momo"===M?j?.mobile_money_details?.mtn?.account_name||"Not configured":j?.mobile_money_details?.airtel?.account_name||"Not configured"})]}),("mtn_momo"===M?j?.mobile_money_details?.mtn?.merchant_id:j?.mobile_money_details?.airtel?.merchant_id)&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Merchant ID:"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"mtn_momo"===M?j?.mobile_money_details?.mtn?.merchant_id:j?.mobile_money_details?.airtel?.merchant_id})]})]}),("mtn_momo"===M?j?.mobile_money_details?.mtn?.payment_instructions:j?.mobile_money_details?.airtel?.payment_instructions)&&(0,s.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Payment Instructions:"}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"mtn_momo"===M?j?.mobile_money_details?.mtn?.payment_instructions:j?.mobile_money_details?.airtel?.payment_instructions})]})]})}),"equity_bank"===M&&(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Bank Transfer Details"}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mb-3",children:"Send payment to the account below:"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Bank Name:"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:j?.bank_details?.bank_name||"Not configured"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Account Name:"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:j?.bank_details?.account_name||"Not configured"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Account Number:"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:j?.bank_details?.account_number||"Not configured"})]}),j?.bank_details?.branch_code&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Branch Code:"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:j?.bank_details?.branch_code})]})]})]})}),"crypto"===M&&(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Cryptocurrency Payment"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Cryptocurrency payment details will be displayed here once configured by administrator."})]})})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(n.Button,{variant:"outline",onClick:()=>q(!1),className:"flex-1","aria-label":"Cancel visit request",children:"Cancel"}),(0,s.jsx)(n.Button,{onClick:ea,disabled:L,className:"flex-1 bg-red-600 hover:bg-red-700","aria-label":"Submit visit request",children:L?"Submitting...":"Pay Visit Fee"})]})]})})})]})}e.s(["default",()=>j],51132)}]);