(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,e=>{"use strict";var s=e.i(43476);let t=e.i(71645).forwardRef(({className:e,type:t,...a},i)=>(0,s.jsx)("input",{type:t,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e||""}`,ref:i,...a}));t.displayName="Input",e.s(["Input",()=>t])},10204,e=>{"use strict";var s=e.i(43476);let t=e.i(71645).forwardRef(({className:e,...t},a)=>(0,s.jsx)("label",{ref:a,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${e||""}`,...t}));t.displayName="Label",e.s(["Label",()=>t])},36961,e=>{"use strict";var s=e.i(47167),t=e.i(43476),a=e.i(71645),i=e.i(15288),n=e.i(19455),r=e.i(93479),l=e.i(10204),o=e.i(94983),d=e.i(86909);function c(){let[e,c]=(0,a.useState)(!0),[p,h]=(0,a.useState)(!1),[u,m]=(0,a.useState)(""),[g,x]=(0,a.useState)(""),[f,b]=(0,a.useState)({admin_phone:"",whatsapp_phone:"",support_email:"",office_address:""});(0,a.useEffect)(()=>{v()},[]);let v=async()=>{try{let e=await fetch("/api/site-settings"),s=await e.json();e.ok&&s?.settings&&b(s.settings)}catch(e){m(e.message||"Failed to load settings")}finally{c(!1)}},j=async()=>{h(!0),m(""),x("");try{let{data:{session:e}}=await d.supabase.auth.getSession();if(!e?.access_token)return void m("You must be logged in");console.log("Saving settings with data:",f);let s=await fetch("/api/site-settings/admin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`,Accept:"application/json"},body:JSON.stringify(f)});console.log("Response status:",s.status),console.log("Response headers:",s.headers);let t=await s.json();if(console.log("Response data:",t),!s.ok)return void m(t.error||`Failed to save settings (Status: ${s.status})`);x("Settings saved successfully")}catch(e){console.error("Save error:",e),m(e.message||"Failed to save settings")}finally{h(!1)}};return e?(0,t.jsx)("div",{className:"container mx-auto py-8",children:(0,t.jsx)("div",{className:"text-center",children:"Loading site settings..."})}):(0,t.jsxs)("div",{className:"container mx-auto py-8 space-y-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Site Settings"}),(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{children:"Default Contact Details"})}),(0,t.jsxs)(i.CardContent,{className:"space-y-4",children:[u&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700",children:u}),g&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-sm text-green-700",children:g}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"admin_phone",children:"Admin Phone"}),(0,t.jsx)(r.Input,{id:"admin_phone",value:f.admin_phone,onChange:e=>b({...f,admin_phone:e.target.value}),placeholder:s.default.env.NEXT_PUBLIC_PLATFORM_PHONE||"+250 XXX XXX XXX"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"whatsapp_phone",children:"WhatsApp Phone"}),(0,t.jsx)(r.Input,{id:"whatsapp_phone",value:f.whatsapp_phone,onChange:e=>b({...f,whatsapp_phone:e.target.value}),placeholder:s.default.env.NEXT_PUBLIC_PLATFORM_WHATSAPP||"+250 XXX XXX XXX"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"support_email",children:"Support Email"}),(0,t.jsx)(r.Input,{id:"support_email",value:f.support_email,onChange:e=>b({...f,support_email:e.target.value}),placeholder:s.default.env.NEXT_PUBLIC_PLATFORM_EMAIL||"contact@ikazeproperty.rw"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"office_address",children:"Office Address"}),(0,t.jsx)(r.Input,{id:"office_address",value:f.office_address,onChange:e=>b({...f,office_address:e.target.value}),placeholder:"KN 123 St, Kiyovu"})]}),(0,t.jsxs)("div",{className:"border-t pt-4 mt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-green-600",children:"WhatsApp Customer Service"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Update your WhatsApp customer service number and test the connection"}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Current WhatsApp Number:"}),(0,t.jsx)("p",{className:"text-lg font-bold text-green-600",children:f.whatsapp_phone||"Not set"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(n.Button,{onClick:j,disabled:p,className:"bg-red-600 hover:bg-red-700",children:p?"Saving...":"Save Settings"}),(0,t.jsxs)(n.Button,{onClick:()=>window.open(`https://wa.me/${f.whatsapp_phone?.replace(/[^\d]/g,"")}`,"_blank"),variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-50",disabled:!f.whatsapp_phone,children:[(0,t.jsx)(o.MessageCircle,{className:"h-4 w-4 mr-2"}),"Test WhatsApp Connection"]})]})]})]})]})}e.s(["default",()=>c])}]);