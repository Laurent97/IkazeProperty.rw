(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25652,e=>{"use strict";let a=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>a],25652)},86311,e=>{"use strict";let a=(0,e.i(75254).default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);e.s(["MessageSquare",()=>a],86311)},98919,e=>{"use strict";let a=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>a],98919)},7233,e=>{"use strict";let a=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},38787,e=>{"use strict";var a=e.i(43476),s=e.i(71645),r=e.i(22016),t=e.i(18566),i=e.i(94351),n=e.i(84614),l=e.i(75254);let d=(0,l.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var o=e.i(92161),c=e.i(37727),h=e.i(86311),m=e.i(90597),u=e.i(7233),x=e.i(25652),f=e.i(98919);let g=(0,l.default)("megaphone",[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]]);var b=e.i(19455),y=e.i(86909),p=e.i(57951);function j({children:e}){let[l,j]=(0,s.useState)(null),[v,N]=(0,s.useState)(null),[w,k]=(0,s.useState)(!1),M=(0,t.usePathname)(),{setUser:U}=(0,p.useAuth)();(0,s.useEffect)(()=>{q()},[]);let q=async()=>{try{let e=await (0,y.getCurrentUser)();if(!e){console.log("No user authenticated, redirecting to login"),window.location.href="/auth/login";return}j(e);try{let a=await (0,y.getUserProfile)(e.id);N(a)}catch(a){console.log("User profile not found, using default values"),N({id:e.id,email:e.email,full_name:e.user_metadata?.full_name||"User",role:"user"})}}catch(e){console.error("Error fetching user data:",e),window.location.href="/auth/login"}},S=async()=>{try{await (0,y.signOut)(),U(null),window.location.href="/"}catch(e){console.error("Error signing out:",e)}},A=v?.role==="admin",C=[{name:"Dashboard",href:A?"/dashboard/admin":"/dashboard/user",icon:i.Home,current:M===(A?"/dashboard/admin":"/dashboard/user")}];return A?C.push({name:"Users",href:"/dashboard/admin/users",icon:n.User,current:"/dashboard/admin/users"===M},{name:"Listings",href:"/dashboard/admin/listings",icon:i.Home,current:"/dashboard/admin/listings"===M},{name:"Ads",href:"/dashboard/admin/ads",icon:g,current:"/dashboard/admin/ads"===M||"/admin/ads"===M},{name:"Inquiries",href:"/dashboard/admin/inquiries",icon:h.MessageSquare,current:"/dashboard/admin/inquiries"===M},{name:"Transactions",href:"/dashboard/admin/transactions",icon:x.TrendingUp,current:"/dashboard/admin/transactions"===M}):C.push({name:"My Listings",href:"/dashboard/my-listings",icon:i.Home,current:"/dashboard/my-listings"===M},{name:"My Inquiries",href:"/dashboard/my-inquiries",icon:h.MessageSquare,current:"/dashboard/my-inquiries"===M},{name:"Favorites",href:"/dashboard/favorites",icon:m.Heart,current:"/dashboard/favorites"===M},{name:"Transactions",href:"/dashboard/transactions",icon:x.TrendingUp,current:"/dashboard/transactions"===M}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[w&&(0,a.jsx)("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>k(!1)}),(0,a.jsxs)("div",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0
        ${w?"translate-x-0":"-translate-x-full"}
      `,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[(0,a.jsxs)(r.default,{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"I"})}),(0,a.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"IkazeProperty"})]}),(0,a.jsx)("button",{onClick:()=>k(!1),className:"lg:hidden text-gray-400 hover:text-gray-600","aria-label":"Close sidebar",children:(0,a.jsx)(c.X,{className:"h-6 w-6"})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(n.User,{className:"h-5 w-5 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:v?.full_name||"User"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:v?.email||l?.email}),(0,a.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${A?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Shield,{className:"h-3 w-3 mr-1"}),"Admin"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.User,{className:"h-3 w-3 mr-1"}),"User"]})})]})]})}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:C.map(e=>{let s=e.icon;return(0,a.jsxs)(r.default,{href:e.href,className:`
                    group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors
                    ${e.current?"bg-red-50 text-red-700 border-r-2 border-red-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}
                  `,children:[(0,a.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})}),(0,a.jsx)("div",{className:"px-4 py-6 border-t border-gray-200",children:A?(0,a.jsx)(r.default,{href:"/admin/ads",children:(0,a.jsxs)(b.Button,{className:"w-full bg-red-600 hover:bg-red-700 mb-2",children:[(0,a.jsx)(g,{className:"h-4 w-4 mr-2"}),"Manage Ads"]})}):(0,a.jsx)(r.default,{href:"/create-listing",children:(0,a.jsxs)(b.Button,{className:"w-full bg-red-600 hover:bg-red-700",children:[(0,a.jsx)(u.Plus,{className:"h-4 w-4 mr-2"}),"New Listing"]})})}),(0,a.jsx)("div",{className:"px-4 py-4",children:(0,a.jsxs)(b.Button,{onClick:S,variant:"outline",className:"w-full border-gray-300 text-gray-700 hover:bg-gray-50",children:[(0,a.jsx)(d,{className:"h-4 w-4 mr-2"}),"Sign Out"]})})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-white shadow-sm border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)("button",{onClick:()=>k(!0),className:"lg:hidden text-gray-400 hover:text-gray-600","aria-label":"Open sidebar",children:(0,a.jsx)(o.Menu,{className:"h-6 w-6"})}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)(r.default,{href:"/",children:(0,a.jsxs)(b.Button,{variant:"outline",className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:[(0,a.jsx)(i.Home,{className:"h-4 w-4 mr-2"}),"Back to Site"]})})})]})}),(0,a.jsx)("main",{className:"flex-1 overflow-auto",children:e})]})]})}e.s(["default",()=>j],38787)}]);