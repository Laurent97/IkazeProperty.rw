(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86536,e=>{"use strict";let s=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],86536)},55436,e=>{"use strict";let s=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>s],55436)},27612,e=>{"use strict";let s=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>s],27612)},88511,e=>{"use strict";let s=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>s],88511)},38932,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(22016),l=e.i(94351),r=e.i(5125),i=e.i(1107),n=e.i(88844),c=e.i(86536),d=e.i(90597),o=e.i(88511),x=e.i(27612),h=e.i(7233),u=e.i(55436),m=e.i(19455),g=e.i(15288),j=e.i(86909);function f(){let[e,f]=(0,a.useState)(null),[p,y]=(0,a.useState)([]),[v,N]=(0,a.useState)(!0),[b,w]=(0,a.useState)(""),[C,S]=(0,a.useState)("all"),[_,k]=(0,a.useState)("created_at");(0,a.useEffect)(()=>{E()},[]);let E=async()=>{try{let e=await (0,j.getCurrentUser)();if(!e){window.location.href="/auth/login";return}f(e);let{data:s,error:a}=await j.supabase.from("listings").select(`
          *,
          listing_media (
            id,
            url,
            media_type,
            order_index,
            is_primary
          )
        `).eq("seller_id",e.id).order(_,{ascending:!1});if(a)throw a;y(s||[])}catch(e){console.error("Error fetching listings:",e)}finally{N(!1)}},M=async e=>{if(confirm("Are you sure you want to delete this listing?"))try{let{error:s}=await j.supabase.from("listings").delete().eq("id",e);if(s)throw s;y(p.filter(s=>s.id!==e))}catch(e){console.error("Error deleting listing:",e)}},L=p.filter(e=>{let s=e.title.toLowerCase().includes(b.toLowerCase()),a="all"===C||e.status===C;return s&&a});return v?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading your listings..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Listings"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your property and item listings"})]}),(0,s.jsx)(t.default,{href:"/create-listing",children:(0,s.jsxs)(m.Button,{className:"bg-red-600 hover:bg-red-700",children:[(0,s.jsx)(h.Plus,{className:"h-4 w-4 mr-2"}),"New Listing"]})})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsx)(g.Card,{className:"mb-6",children:(0,s.jsx)(g.CardContent,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.Search,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search listings...",value:b,onChange:e=>w(e.target.value),className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]})}),(0,s.jsxs)("select",{value:C,onChange:e=>S(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Filter by status",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"available",children:"Available"}),(0,s.jsx)("option",{value:"sold",children:"Sold"}),(0,s.jsx)("option",{value:"rented",children:"Rented"}),(0,s.jsx)("option",{value:"pending",children:"Pending"})]}),(0,s.jsxs)("select",{value:_,onChange:e=>k(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Sort by",children:[(0,s.jsx)("option",{value:"created_at",children:"Newest First"}),(0,s.jsx)("option",{value:"price_low",children:"Price: Low to High"}),(0,s.jsx)("option",{value:"price_high",children:"Price: High to Low"}),(0,s.jsx)("option",{value:"views",children:"Most Viewed"})]})]})})}),0===L.length?(0,s.jsx)(g.Card,{children:(0,s.jsxs)(g.CardContent,{className:"p-16 text-center",children:[(0,s.jsx)(l.Home,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:b||"all"!==C?"No matching listings":"No listings yet"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:b||"all"!==C?"Try adjusting your filters or search terms":"Start by creating your first listing"}),!b&&"all"===C&&(0,s.jsx)(t.default,{href:"/create-listing",children:(0,s.jsxs)(m.Button,{className:"bg-red-600 hover:bg-red-700",children:[(0,s.jsx)(h.Plus,{className:"h-4 w-4 mr-2"}),"Create Listing"]})})]})}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(e=>(0,s.jsxs)(g.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsx)("div",{className:"relative",children:e.listing_media&&e.listing_media.length>0?(0,s.jsxs)("div",{className:"w-full h-48 relative rounded-t-lg overflow-hidden",children:[(0,s.jsx)("img",{src:e.listing_media.find(e=>e.is_primary)?.url||e.listing_media[0]?.url,alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/placeholder-image.jpg"}}),e.featured&&(0,s.jsx)("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-2 py-1 rounded text-xs font-semibold",children:"FEATURED"}),(0,s.jsx)("span",{className:`absolute top-2 right-2 px-2 py-1 text-xs rounded-full ${(e=>{switch(e){case"available":return"bg-green-100 text-green-800";case"sold":return"bg-red-100 text-red-800";case"rented":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:e.status})]}):(0,s.jsx)("div",{className:"w-full h-48 bg-gray-200 rounded-t-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-500",children:"Image Placeholder"})})}),(0,s.jsxs)(g.CardContent,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-red-100 rounded flex items-center justify-center",children:(e=>{switch(e){case"houses":return(0,s.jsx)(l.Home,{className:"h-4 w-4"});case"cars":return(0,s.jsx)(r.Car,{className:"h-4 w-4"});case"land":return(0,s.jsx)(i.Trees,{className:"h-4 w-4"});default:return(0,s.jsx)(n.Package,{className:"h-4 w-4"})}})(e.category)}),(0,s.jsx)("span",{className:"text-xs text-gray-500 capitalize",children:e.category})]}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-red-600 mb-3",children:["RWF ",e.price.toLocaleString()]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(c.Eye,{className:"h-4 w-4 mr-1"}),e.views||0]}),(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(d.Heart,{className:"h-4 w-4 mr-1"}),e.likes||0]})]}),(0,s.jsx)("span",{className:"text-xs",children:new Date(e.created_at).toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(t.default,{href:`/listings/${e.category}/${e.id}`,className:"flex-1",children:(0,s.jsxs)(m.Button,{size:"sm",variant:"outline",className:"w-full",children:[(0,s.jsx)(c.Eye,{className:"h-4 w-4 mr-1"}),"View"]})}),(0,s.jsx)(t.default,{href:`/dashboard/my-listings/${e.id}/edit`,className:"flex-1",children:(0,s.jsxs)(m.Button,{size:"sm",variant:"outline",className:"w-full",children:[(0,s.jsx)(o.Edit,{className:"h-4 w-4 mr-1"}),"Edit"]})}),(0,s.jsx)(m.Button,{size:"sm",variant:"outline",onClick:()=>M(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,s.jsx)(x.Trash2,{className:"h-4 w-4"})})]})]})]},e.id))})]})]})}e.s(["default",()=>f])}]);